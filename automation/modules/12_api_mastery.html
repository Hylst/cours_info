<!-- MODULE 12: API MASTERY (NEW) -->
<section id="m12"
    style="background: radial-gradient(circle at 90% 10%, rgba(9, 132, 227, 0.05) 0%, rgba(0,0,0,0) 60%);">
    <div class="container">
        <div class="sec-header">
            <div class="sec-num" style="color:#0984e3; border-color:#0984e3;">12</div>
            <div>
                <h2 class="sec-title" style="color:#0984e3;">API Mastery</h2>
                <p class="sec-sub">Lire la documentation comme un pro</p>
            </div>
        </div>

        <!-- 12.1 ANATOMY -->
        <h3 class="sec-title-small" style="color:#fff;">A. Anatomie d'une Requête HTTP</h3>
        <div class="code-block" style="font-size:0.9rem; line-height:1.6;">
            <span style="color:#ff7675;">POST</span> <span
                style="color:#74b9ff;">https://api.stripe.com/v1/charges</span><br>
            <span style="color:#a29bfe;">Authorization:</span> Bearer sk_test_4eC39H...<br>
            <span style="color:#a29bfe;">Content-Type:</span> application/json<br>
            <br>
            {<br>
            &nbsp;&nbsp;"amount": 2000,<br>
            &nbsp;&nbsp;"currency": "usd",<br>
            &nbsp;&nbsp;"source": "tok_visa"<br>
            }
        </div>
        <div class="feature-grid" style="margin-top:15px; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
            <div>
                <strong>1. Method (Verbe)</strong>
                <p style="font-size:0.8rem; color:#b2bec3;"><code>GET</code> (Lire), <code>POST</code> (Écrire),
                    <code>PUT/PATCH</code> (Modifier), <code>DELETE</code> (Supprimer).</p>
            </div>
            <div>
                <strong>2. Endpoint (URL)</strong>
                <p style="font-size:0.8rem; color:#b2bec3;">L'adresse du guichet unique.</p>
            </div>
            <div>
                <strong>3. Headers</strong>
                <p style="font-size:0.8rem; color:#b2bec3;">Les métadonnées (Auth, Format). Le "sticker sur
                    l'enveloppe".</p>
            </div>
            <div>
                <strong>4. Body (Payload)</strong>
                <p style="font-size:0.8rem; color:#b2bec3;">Le contenu du colis (généralement en JSON).</p>
            </div>
        </div>

        <!-- 12.2 AUTHENTICATION -->
        <h3 class="sec-title-small" style="margin-top:40px; color:#fff;">B. Les Types d'Authentification</h3>
        <div class="grid2">
            <div class="scenario-card">
                <h4>Basic Auth / API Key</h4>
                <p style="font-size:0.85rem; margin-bottom:5px;">Simple & Rapide.</p>
                <code style="font-size:0.75rem; background:#000; padding:2px 5px;">Authorization: Api-Key 12345</code>
                <p style="font-size:0.8rem; color:#b2bec3; margin-top:5px;">Souvent passé en Header ou en Query Param
                    (<code>?key=123</code>).</p>
            </div>
            <div class="scenario-card" style="border-color: #fab1a0;">
                <h4>OAuth2 (Le Cauchemar nécessaire)</h4>
                <p style="font-size:0.85rem; margin-bottom:5px;">Sécurisé & Temporaire.</p>
                <ul class="clean-list" style="font-size:0.75rem;">
                    <li>1. Redirection vers Google ("Accepter ?").</li>
                    <li>2. Reçoit un <code>code</code>.</li>
                    <li>3. Échange <code>code</code> contre <code>Access Token</code> (valide 1h).</li>
                    <li>4. Utilise <code>Refresh Token</code> pour renouveler.</li>
                </ul>
                <div style="font-size:0.75rem; color:#fab1a0; margin-top:5px;">Heureusement, n8n gère ça pour vous !
                </div>
            </div>
        </div>

        <!-- 12.3 WEBHOOKS VS POLLING -->
        <div class="concept-box" style="margin-top:30px; border-left-color: #fdcb6e;">
            <strong>Polling vs Webhooks :</strong><br>
            <ul class="clean-list" style="margin-top:10px;">
                <li><strong>Polling (L'enfant impatient) :</strong> "On est arrivé ? On est arrivé ?" (Demande toutes
                    les 5min). Gaspille des ressources.</li>
                <li><strong>Webhook (Le coup de fil) :</strong> "Appelle-moi quand tu arrives." Le serveur vous notifie
                    instantanément.</li>
            </ul>
            <em>Préférez toujours les Webhooks quand c'est possible.</em>
        </div>

        <!-- 12.4 CURL DECODING -->
        <h3 class="sec-title-small" style="margin-top:40px; color:#fff;">C. Traduire le "cURL"</h3>
        <p style="font-size:0.9rem; margin-bottom:15px; color:#b2bec3;">Les docs donnent souvent des exemples en ligne
            de commande (cURL). Vous devez savoir les lire pour les mettre dans n8n.</p>
        <div class="code-block" style="font-size:0.8rem;">
            curl -X POST https://api.site.com/users \<br>
            -H "Authorization: Bearer 123" \<br>
            -d '{"name":"Bob"}'
        </div>
        <div class="tutorial-step" style="margin-top:10px;">
            <ul class="clean-list" style="font-size:0.8rem;">
                <li><code>-X POST</code> -> Méthode</li>
                <li><code>-H "..."</code> -> Header</li>
                <li><code>-d '...'</code> -> Body (Data)</li>
            </ul>
        </div>
    </div>
</section>