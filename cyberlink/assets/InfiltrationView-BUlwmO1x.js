import{c as T,r as p,j as e,G as ce}from"./index-BKqWqMuo.js";import{T as oe}from"./TechPanel-DuvaKPIq.js";import{S as le}from"./shield-alert-CsqwHIq5.js";import{Z as xe}from"./zap-BWxMnlZ8.js";import{N as W,D as X}from"./navigation-7VdHRCGR.js";import{C as de}from"./crosshair-3txiY3u5.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],fe=T("mouse-pointer-2",me);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],he=T("rotate-ccw",be);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],ue=T("skull",pe),h=7,B=Math.floor(h/2),Ee=({playSound:v,updateCredits:H})=>{const[y,S]=p.useState("BRIEFING"),[w,V]=p.useState(1),[l,U]=p.useState(10),[j,R]=p.useState({x:0,y:0}),[N,Z]=p.useState({x:9,y:9}),[z,I]=p.useState([]),[k,q]=p.useState([]),[$,D]=p.useState(30),[F,G]=p.useState(""),[_,K]=p.useState("LOW"),A=a=>{const s=Math.min(20,10+Math.floor((a-1)/2));U(s);const d=Math.min(.35,.15+a*.015),c=2+Math.floor((a-1)/1.5),t=s*2-2,n=Math.max(1.3,2.5-a*.1),g=Math.floor(t*n);let b="LOW";a>3&&(b="MED"),a>6&&(b="HIGH"),a>9&&(b="EXTREME"),K(b),D(g),R({x:0,y:0}),Z({x:s-1,y:s-1});let o=[];const i=new Set;for(let f=0;f<s;f++)for(let x=0;x<s;x++)if(!(x<3&&f<3||x>s-3&&f>s-3)&&Math.random()<d){const M=`w-${x}-${f}`;o.push({id:M,x,y:f,type:"WALL"}),i.add(`${x},${f}`)}let u=0,r=0;for(;u!==s-1||r!==s-1;){u<s-1&&Math.random()>.4?u++:r<s-1?r++:u++;const x=`${u},${r}`;i.has(x)&&(i.delete(x),o=o.filter(M=>!(M.x===u&&M.y===r)))}q(o);const m=[];let O=0;for(;m.length<c&&O<200;){O++;const f=Math.floor(Math.random()*s),x=Math.floor(Math.random()*s),M=f<5&&x<5,ne=f===s-1&&x===s-1,re=i.has(`${f},${x}`),ie=m.some(P=>P.x===f&&P.y===x);!M&&!ne&&!re&&!ie&&m.push({id:`e-${m.length}`,x:f,y:x,type:"ENEMY"})}I(m),S("PLAYING"),G(`SECTOR ${a} // THREAT: ${b}`)},J=()=>{v("click"),A(w)},E=p.useCallback((a,s)=>{y==="PLAYING"&&R(d=>{const c=d.x+a,t=d.y+s;return c<0||c>=l||t<0||t>=l?(v("error"),d):k.some(n=>n.x===c&&n.y===t)?(v("heavy_click"),d):(v("click"),D(n=>{const g=n-1;return g<=0&&L("ENERGY DEPLETED"),g}),c===N.x&&t===N.y?(ee(),{x:c,y:t}):z.some(n=>n.x===c&&n.y===t)?(L("INTERCEPTED BY SENTRY"),{x:c,y:t}):(Q(c,t),{x:c,y:t}))})},[y,k,z,N,v,l]),Q=(a,s)=>{I(d=>{const c=d.map(t=>{const n=4+Math.floor(w/3),g=Math.min(.9,.2+w*.06),b=Math.abs(t.x-a)+Math.abs(t.y-s);let o=t.x,i=t.y,u=!1;if(b<=n&&Math.random()<g){const r=a-o,m=s-i;Math.abs(r)>Math.abs(m)?r>0?o++:o--:m>0?i++:i--,u=!0}if(!u){const r=Math.floor(Math.random()*4);r===0?o++:r===1?o--:r===2?i++:r===3&&i--}return o<0||o>=l||i<0||i>=l||k.some(r=>r.x===o&&r.y===i)||o===N.x&&i===N.y||d.some(r=>r!==t&&r.x===o&&r.y===i)?t:{...t,x:o,y:i}});return c.some(t=>t.x===a&&t.y===s)&&L("AMBUSHED BY SENTRY"),c})},ee=()=>{v("success"),S("WON");const a=200+w*75;H(a),V(s=>s+1)},L=a=>{v("error"),S("LOST"),G(a)};p.useEffect(()=>{const a=s=>{if(y==="PLAYING")switch(s.key){case"ArrowUp":case"w":case"W":E(0,-1);break;case"ArrowDown":case"s":case"S":E(0,1);break;case"ArrowLeft":case"a":case"A":E(-1,0);break;case"ArrowRight":case"d":case"D":E(1,0);break}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[y,E]);const se=(a,s)=>{const{minX:d,minY:c}=Y(),t=d+a,n=c+s,g=t-j.x,b=n-j.y;Math.abs(g)+Math.abs(b)===1&&E(g,b)},Y=()=>{let a=j.x-B,s=j.y-B;return l<=h?(a=Math.floor((l-h)/2),s=Math.floor((l-h)/2)):(a<0&&(a=0),s<0&&(s=0),a>l-h&&(a=l-h),s>l-h&&(s=l-h)),{minX:a,minY:s}},{minX:te,minY:ae}=Y(),C=()=>_==="LOW"?"text-cyber-green":_==="MED"?"text-cyber-amber":_==="HIGH"?"text-cyber-red":"text-[#b026ff]";return e.jsxs("div",{className:"h-full flex flex-col gap-2 max-w-lg mx-auto pb-4 min-h-0",children:[e.jsxs(oe,{playSound:v,className:"flex-none flex justify-between items-center py-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cyber-blue font-bold text-sm",children:[e.jsx(ce,{size:16})," DATASTREAM"]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-white/50 font-mono",children:[e.jsxs("span",{children:["SEC: ",w]}),e.jsxs("span",{className:`flex items-center gap-1 font-bold ${C()}`,children:[e.jsx(le,{size:10})," ",_]})]})]}),y==="PLAYING"&&e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[9px] uppercase tracking-widest text-cyber-amber flex items-center justify-end gap-1",children:[e.jsx(xe,{size:10})," ENERGY"]}),e.jsx("div",{className:"flex items-end justify-end gap-1",children:e.jsx("div",{className:`text-xl font-mono font-bold leading-none ${$<10?"text-cyber-red animate-pulse":"text-white"}`,children:$})})]})]}),e.jsxs("div",{className:"flex-1 relative bg-cyber-black border border-white/10 rounded-xl overflow-hidden flex flex-col min-h-0 shadow-[inset_0_0_20px_rgba(0,0,0,0.8)]",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(0,50,100,0.2),transparent)]"}),e.jsx("div",{className:"absolute inset-0 bg-[size:40px_40px] bg-grid-pattern opacity-10"}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[y==="BRIEFING"&&e.jsxs("div",{className:"absolute inset-0 z-30 bg-cyber-black/95 backdrop-blur-sm flex flex-col items-center justify-center text-center p-6 animate-in fade-in zoom-in",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-cyber-blue flex items-center justify-center mb-4 shadow-[0_0_20px_#00f0ff] animate-spin-slow",children:e.jsx(W,{size:32,className:"text-cyber-blue"})}),e.jsxs("h2",{className:"text-xl font-bold text-white mb-2 tracking-widest uppercase",children:["SECTOR ",w]}),e.jsxs("div",{className:"flex gap-4 mb-4 text-xs font-mono text-white/70 bg-white/5 p-2 rounded",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-cyber-blue font-bold",children:[l,"x",l]}),e.jsx("span",{className:"opacity-50",children:"GRID"})]}),e.jsx("div",{className:"w-[1px] bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:C(),children:_}),e.jsx("span",{className:"opacity-50",children:"THREAT"})]})]}),e.jsx("p",{className:"text-sm text-white/60 mb-6 font-mono max-w-xs",children:"Route optimization required. Enemy AI adapting to intrusion patterns."}),e.jsx("button",{onClick:J,className:"bg-cyber-blue text-black font-bold py-3 px-8 rounded hover:scale-105 transition-transform uppercase tracking-wider shadow-[0_0_15px_#00f0ff]",children:"EXECUTE"})]}),y==="WON"&&e.jsxs("div",{className:"absolute inset-0 z-30 bg-cyber-green/10 backdrop-blur-md flex flex-col items-center justify-center text-center p-6 animate-in zoom-in",children:[e.jsx("div",{className:"mb-4 p-4 rounded-full bg-cyber-green/20 border border-cyber-green shadow-[0_0_20px_#0bda5e]",children:e.jsx(X,{size:40,className:"text-cyber-green"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-1 uppercase",children:"DATA SECURED"}),e.jsx("p",{className:"text-xs text-cyber-green font-mono mb-6",children:"Threat neutralized. Proceed to next sector."}),e.jsxs("button",{onClick:()=>A(w),className:"bg-cyber-green text-black font-bold py-2 px-6 rounded uppercase tracking-wider hover:bg-white transition-colors",children:["Initialize Sector ",w]})]}),y==="LOST"&&e.jsxs("div",{className:"absolute inset-0 z-30 bg-cyber-red/10 backdrop-blur-md flex flex-col items-center justify-center text-center p-6 animate-in zoom-in",children:[e.jsx(ue,{size:48,className:"text-cyber-red mb-4 drop-shadow-[0_0_10px_#ff2a2a] animate-pulse"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-1 uppercase",children:"SIGNAL LOST"}),e.jsx("p",{className:"text-xs text-cyber-red font-mono mb-6 uppercase tracking-widest",children:F}),e.jsxs("button",{onClick:()=>A(w),className:"bg-cyber-red text-white font-bold py-2 px-6 rounded uppercase tracking-wider flex items-center gap-2 hover:bg-red-600 transition-colors",children:[e.jsx(he,{size:14})," REBOOT"]})]}),e.jsx("div",{className:"grid gap-1 relative z-10 touch-none select-none transition-all duration-300",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`,width:"100%",maxWidth:"min(100%, 55vh)",aspectRatio:"1/1"},children:Array.from({length:h*h}).map((a,s)=>{const d=s%h,c=Math.floor(s/h),t=te+d,n=ae+c;if(!(t>=0&&t<l&&n>=0&&n<l))return e.jsx("div",{className:"bg-black/40 border border-white/5 opacity-30 rounded-sm"},`${t}-${n}`);const b=j.x===t&&j.y===n,o=N.x===t&&N.y===n,i=k.some(m=>m.x===t&&m.y===n),u=z.some(m=>m.x===t&&m.y===n),r=Math.abs(t-j.x)+Math.abs(n-j.y)===1;return e.jsxs("div",{onClick:()=>se(d,c),className:`
                                    relative rounded-sm border transition-all duration-150 flex items-center justify-center
                                    ${i?"bg-white/10 border-white/20":"bg-black/20 border-white/5"}
                                    ${r&&!i&&y==="PLAYING"?"cursor-pointer bg-white/5 hover:bg-white/10 hover:border-cyber-blue/50":""}
                                    ${b?"shadow-[0_0_15px_#00f0ff] z-20 border-cyber-blue":""}
                                `,children:[e.jsxs("div",{className:"absolute top-0.5 right-0.5 text-[6px] text-white/10 font-mono pointer-events-none",children:[t,",",n]}),i&&e.jsx("div",{className:"absolute inset-0 bg-[repeating-linear-gradient(45deg,transparent,transparent_2px,rgba(255,255,255,0.1)_2px,rgba(255,255,255,0.1)_4px)]"}),o&&e.jsx(X,{size:24,className:"text-cyber-amber animate-pulse drop-shadow-[0_0_5px_#ffb800]"}),u&&e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-3/4 h-3/4 bg-cyber-red/20 border border-cyber-red rotate-45 animate-pulse shadow-[0_0_8px_#ff2a2a]",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center -rotate-45",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-cyber-red rounded-full"})})})}),b&&e.jsx("div",{className:"w-full h-full bg-cyber-blue/20 flex items-center justify-center",children:e.jsx("div",{className:"w-3/4 h-3/4 bg-cyber-blue shadow-[0_0_10px_#00f0ff] animate-pulse rounded-sm"})})]},`${t}-${n}`)})})]}),y==="PLAYING"&&e.jsxs("div",{className:"flex-none p-2 bg-black/40 border-t border-white/10 flex justify-between items-center text-[10px] font-mono text-cyber-blue",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{size:12}),e.jsxs("span",{children:["POS: ",j.x,", ",j.y]})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-60 animate-pulse",children:[e.jsx(fe,{size:12}),e.jsx("span",{children:"TAP TO MOVE"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-cyber-amber",children:[e.jsx(de,{size:12}),e.jsxs("span",{children:["GOAL: ",N.x,", ",N.y]})]})]})]})]})};export{Ee as InfiltrationView};
