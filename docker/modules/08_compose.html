<!-- CHAPTER 8 -->
<section class="chapter" id="ch8">
  <div class="container">
    <div class="chapter-header">
      <div class="chapter-number">08</div>
      <div>
        <h2 class="chapter-title">Docker Compose</h2>
        <p class="chapter-subtitle">Orchestrer plusieurs conteneurs</p>
      </div>
    </div>
    <p style="margin-bottom: 30px; color: var(--text-secondary); font-size: 1.05rem;">
      Lancer des conteneurs un par un est fastidieux. Docker Compose permet de définir toute votre
      architecture (frontend, API, DB) dans un seul fichier YAML déclaratif.
    </p>

    <div class="content-block">
      <h3>Le fichier docker-compose.yml</h3>
      <p>Définissez votre infrastructure dans un fichier YAML.</p>
      <div class="code-block">
        <div class="code-header"><span class="code-dot r"></span><span class="code-dot y"></span><span
            class="code-dot g"></span> docker-compose.yml</div>
        <pre><span class="prop">version:</span> <span class="str">'3.8'</span>

<span class="prop">services:</span>
  <span class="prop">webapp:</span>
    <span class="prop">build:</span> ./app
    <span class="prop">ports:</span>
      - <span class="str">"5000"</span>
    <span class="prop">environment:</span>
      <span class="prop">REDIS_HOST:</span> cache
    <span class="prop">networks:</span>
      - backend

  <span class="prop">cache:</span>
    <span class="prop">image:</span> redis:alpine
    <span class="prop">networks:</span>
      - backend

  <span class="prop">proxy:</span>
    <span class="prop">image:</span> nginx:alpine
    <span class="prop">ports:</span>
      - <span class="str">"80:80"</span>
    <span class="prop">volumes:</span>
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
    <span class="prop">depends_on:</span>
      - webapp
    <span class="prop">networks:</span>
      - backend

<span class="prop">networks:</span>
  <span class="prop">backend:</span></pre>
      </div>
    </div>

    <div class="content-block">
      <h3>Commandes Compose</h3>
      <div class="code-block">
        <div class="code-header"><span class="code-dot r"></span><span class="code-dot y"></span><span
            class="code-dot g"></span> Terminal</div>
        <pre><span class="comment"># Démarrer toute la stack (détaché)</span>
<span class="cmd">docker compose up</span> <span class="flag">-d</span>

<span class="comment"># Arrêter et supprimer les conteneurs</span>
<span class="cmd">docker compose down</span>

<span class="comment"># Voir les logs de toute la stack</span>
<span class="cmd">docker compose logs</span> <span class="flag">-f</span>

<span class="comment"># Reconstruire les images si Dockerfile a changé</span>
<span class="cmd">docker compose up</span> <span class="flag">-d --build</span></pre>
      </div>
    </div>
  </div>
</section>