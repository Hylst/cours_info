<section id="c19">
    <div class="container">
        <div class="sec-header">
            <div class="sec-num">19</div>
            <div>
                <h2 class="sec-title">Build Systems</h2>
                <p class="sec-sub">Maven, Gradle & Packaging</p>
            </div>
        </div>

        <!-- Introduction -->
        <div class="callout callout-info">
            <h4>üéì Avant de Commencer</h4>
            <p><strong>Le Probl√®me</strong> : Compiler un projet de 1000 classes et g√©rer 50 librairies tierces √† la
                main (`javac -cp ...`) est impossible.</p>
            <p><strong>La Solution</strong> : Un outil de build (Maven ou Gradle) qui t√©l√©charge les d√©pendances,
                compile, teste et package le projet automatiquement.</p>
            <p><strong>Temps de lecture</strong> : ~15 minutes | <strong>Niveau</strong> : ‚≠ê‚≠ê‚≠ê</p>
        </div>

        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">üèóÔ∏è Maven vs Gradle</h3>

        <div class="grid2">
            <div>
                <h4>ü¶â Maven (Le Standard)</h4>
                <ul>
                    <li><strong>XML</strong> : Configuration verbeuse (`pom.xml`).</li>
                    <li><strong>Rigide</strong> : Lifecycle strict, difficile de sortir des rails.</li>
                    <li><strong>Stable</strong> : Ne change pas tous les 6 mois. Choix s√ªr pour les entreprises.</li>
                </ul>
            </div>
            <div>
                <h4>üêò Gradle (Le Moderne)</h4>
                <ul>
                    <li><strong>DSL (Groovy/Kotlin)</strong> : Scriptable et concis (`build.gradle`).</li>
                    <li><strong>Flexible</strong> : On peut tout coder (boucles, if...).</li>
                    <li><strong>Rapide</strong> : Cache incr√©mental tr√®s performant. Standard pour Android.</li>
                </ul>
            </div>
        </div>

        <!-- Maven Lifecycle Diagram -->
        <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">üîÑ Le Cycle de Vie Maven</h3>
        <p>Ce sont les √©tapes s√©quentielles. Si vous lancez <code>package</code>, toutes les √©tapes pr√©c√©dentes sont
            ex√©cut√©es.</p>

        <div class="diagram-container">
            <div class="mermaid">
                flowchart LR
                Validate --> Compile --> Test --> Package --> Verify --> Install --> Deploy

                style Validate fill:#161b22,stroke:#79c0ff,color:#f0f6fc
                style Compile fill:#161b22,stroke:#79c0ff,color:#f0f6fc
                style Test fill:#161b22,stroke:#ffa94d,color:#f0f6fc
                style Package fill:#3fb950,stroke:#3d444d,color:#0d1117
                style Install fill:#161b22,stroke:#79c0ff,color:#f0f6fc
                style Deploy fill:#ff7b72,stroke:#3d444d,color:#0d1117
            </div>
        </div>

        <div style="overflow-x:auto; margin-top: 1rem;">
            <table>
                <tr>
                    <th>Phase</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td><code>compile</code></td>
                    <td>Compile les sources (`src/main/java`) en `.class`.</td>
                </tr>
                <tr>
                    <td><code>test</code></td>
                    <td>Lance les tests unitaires (`JUnit`). √âchec = Arr√™t du build.</td>
                </tr>
                <tr>
                    <td><code>package</code></td>
                    <td>Cr√©e le JAR/WAR dans le dossier `target/`.</td>
                </tr>
                <tr>
                    <td><code>install</code></td>
                    <td>Copie le JAR dans votre d√©p√¥t local (`~/.m2`).</td>
                </tr>
            </table>
        </div>

        <!-- Dependency Management -->
        <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">üì¶ Gestion des D√©pendances</h3>
        <p>Maven t√©l√©charge automagiquement les JARs depuis Maven Central. Plus besoin de stocker des `.jar` dans Git !
        </p>

        <div class="code">
            <div class="code-head"><span class="dot g"></span>pom.xml</div>
            <pre><span class="kw">&lt;dependencies&gt;</span>
    <span class="com">&lt;!-- Import de Lombok --&gt;</span>
    <span class="kw">&lt;dependency&gt;</span>
        <span class="kw">&lt;groupId&gt;</span>org.projectlombok<span class="kw">&lt;/groupId&gt;</span>
        <span class="kw">&lt;artifactId&gt;</span>lombok<span class="kw">&lt;/artifactId&gt;</span>
        <span class="kw">&lt;version&gt;</span>1.18.30<span class="kw">&lt;/version&gt;</span>
        <span class="kw">&lt;scope&gt;</span>provided<span class="kw">&lt;/scope&gt;</span>
    <span class="kw">&lt;/dependency&gt;</span>
<span class="kw">&lt;/dependencies&gt;</span></pre>
        </div>

        <div class="callout callout-tip" style="margin-top: 1rem;">
            <h4>üîç Les Scopes Importants</h4>
            <ul style="margin-left: 1.5rem;">
                <li><code>compile</code> (d√©faut) : Dispo partout, inclus dans le final.</li>
                <li><code>test</code> : Dispo uniquement pour les tests (ex: JUnit, Mockito). Pas dans le JAR final.
                </li>
                <li><code>provided</code> : Dispo √† la compile, mais <strong>exclu</strong> du JAR final (suppos√© fourni
                    par le serveur, ex: Servlet API, Lombok).</li>
            </ul>
        </div>

        <!-- Jar Types -->
        <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">üéÅ Les Types de Packaging</h3>
        <div class="grid3">
            <div class="analogy" style="margin:0; padding:1.5rem;">
                <p style="font-size:1.1rem; margin-bottom:0.5rem; color:var(--text-accent);">Skinny JAR</p>
                <p style="font-size:0.9rem;">Contient <strong>uniquement votre code</strong>. Pour ex√©cuter, vous devez
                    avoir tous les JARs de d√©pendances dans le classpath (`cp`).</p>
            </div>
            <div class="analogy" style="margin:0; padding:1.5rem;">
                <p style="font-size:1.1rem; margin-bottom:0.5rem; color:var(--text-accent);">Fat / Uber JAR</p>
                <p style="font-size:0.9rem;">Contient votre code <strong>ET toutes les d√©pendances</strong> d√©zipp√©es et
                    fusionn√©es. Un seul fichier ex√©cutable (`java -jar app.jar`). Facile √† d√©ployer.</p>
            </div>
            <div class="analogy" style="margin:0; padding:1.5rem;">
                <p style="font-size:1.1rem; margin-bottom:0.5rem; color:var(--text-accent);">Shaded JAR</p>
                <p style="font-size:0.9rem;">Un Fat Jar o√π on <strong>renomme</strong> les packages des d√©pendances pour
                    √©viter les conflits de version (Jar Hell).</p>
            </div>
        </div>

        <!-- Cas d'Usage -->
        <div class="use-case" style="margin-top: 2rem;">
            <h4>üöÄ Cas R√©el : Maven Shade Plugin</h4>
            <p>Pour cr√©er un ex√©cutable autonome.</p>
            <div class="code" style="margin-top: 1rem;">
                <pre><span class="kw">&lt;plugin&gt;</span>
    <span class="kw">&lt;artifactId&gt;</span>maven-shade-plugin<span class="kw">&lt;/artifactId&gt;</span>
    <span class="kw">&lt;executions&gt;</span>
        <span class="kw">&lt;execution&gt;</span>
            <span class="kw">&lt;phase&gt;</span>package<span class="kw">&lt;/phase&gt;</span>
            <span class="kw">&lt;goals&gt;&lt;goal&gt;</span>shade<span class="kw">&lt;/goal&gt;&lt;/goals&gt;</span>
        <span class="kw">&lt;/execution&gt;</span>
    <span class="kw">&lt;/executions&gt;</span>
<span class="kw">&lt;/plugin&gt;</span></pre>
            </div>
        </div>

    </div>
</section>