<section id="c7">
    <div class="container">
        <div class="sec-header">
            <div class="sec-num">07</div>
            <div>
                <h2 class="sec-title">H√©ritage</h2>
                <p class="sec-sub">Extends, Super & Polymorphisme</p>
            </div>
        </div>

        <!-- Introduction -->
        <div class="callout callout-info">
            <h4>üéì Avant de Commencer</h4>
            <p><strong>Pr√©requis</strong> : Avoir compris les classes et objets (C6).</p>
            <p><strong>Ce que vous allez apprendre</strong> : Comment r√©utiliser du code, cr√©er des hi√©rarchies et
                traiter des objets diff√©rents de mani√®re uniforme.</p>
            <p><strong>Temps de lecture</strong> : ~12 minutes | <strong>Niveau</strong> : ‚≠ê‚≠ê‚òÜ</p>
        </div>

        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">üß¨ L'H√©ritage : L'ADN du Code</h3>
        <p>L'h√©ritage est le m√©canisme qui permet √† une classe d'acqu√©rir les propri√©t√©s (champs) et les comportements
            (m√©thodes) d'une autre classe. C'est l'outil ultime pour √©viter la duplication de code (principe **DRY** -
            Don't Repeat Yourself).</p>

        <p style="margin-top: 1rem;">En Java, on utilise le mot-cl√© <strong><code>extends</code></strong>. La classe qui
            h√©rite est la <strong>sous-classe</strong> (fille), celle dont on h√©rite est la
            <strong>super-classe</strong> (m√®re).</p>

        <!-- Analogy -->
        <div class="analogy">
            <p>L'H√©ritage Biologique</p>
            <div class="grid2" style="margin-top:1rem; text-align:left;">
                <div>
                    <h4>üë§ Parent (Super-classe)</h4>
                    <p>D√©finit des traits g√©n√©raux : couleur des yeux, taille, nom de famille. Il poss√®de aussi des
                        comportements : manger, marcher.</p>
                </div>
                <div>
                    <h4>üë∂ Enfant (Sous-classe)</h4>
                    <p>H√©rite de tous les traits de son parent AUTOMATIQUEMENT. Mais il peut aussi avoir ses propres
                        traits (ex: joue de la guitare) ou faire les choses diff√©remment (ex: court plus vite).</p>
                </div>
            </div>
        </div>

        <!-- Diagram -->
        <div class="diagram-container">
            <div class="mermaid">
                classDiagram
                Vehicle <|-- Car Vehicle <|-- Bike class Vehicle { +String brand +move() +stop() } class Car { +int
                    fuelLevel +honk() } class Bike { +boolean hasBell +ring() } style Vehicle
                    fill:#1c2128,stroke:#79c0ff,stroke-width:2px,color:#f0f6fc style Car
                    fill:#161b22,stroke:#3d444d,color:#f0f6fc style Bike fill:#161b22,stroke:#3d444d,color:#f0f6fc
                    </div>
                    <p style="margin-top:10px; font-size:0.9rem; color: var(--text-muted-foreground);">Hi√©rarchie simple
                        : La fl√®che pointe vers le parent.</p>
            </div>

            <!-- Key Concepts -->
            <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">üîë Concepts Fondamentaux</h3>

            <div class="grid2">
                <div class="callout callout-warning" style="margin:0">
                    <h4>‚õî Pas d'h√©ritage multiple</h4>
                    <p>En Java, une classe ne peut avoir qu'<strong>UNE SEULE</strong> m√®re. On ne peut pas faire
                        <code>class Cyborg extends Human, Robot</code>.</p>
                    <p style="margin-top: 0.5rem;"><strong>Pourquoi ?</strong> Pour √©viter le "Diamant de la mort"
                        (conflits de m√©thodes). Pour contourner cela, on utilise les <strong>Interfaces</strong> (C8).
                    </p>
                </div>
                <div class="callout callout-tip" style="margin:0">
                    <h4>üîÑ Red√©finition (@Override)</h4>
                    <p>Une fille peut r√©√©crire une m√©thode de sa m√®re pour qu'elle fasse autre chose. C'est la
                        <strong>Red√©finition</strong>.</p>
                    <p style="margin-top: 0.5rem;"><strong>Note</strong> : Utilisez toujours l'annotation
                        <code>@Override</code> pour √™tre s√ªr de ne pas faire de faute de frappe dans le nom de la
                        m√©thode.</p>
                </div>
            </div>

            <!-- Code Example: Super and Override -->
            <div class="code" style="margin-top: 2rem;">
                <div class="code-head"><span class="dot b"></span>Exemple : Super & Override</div>
                <pre><span class="kw">public class</span> <span class="type">Animal</span> {
    <span class="kw">protected</span> <span class="type">String</span> <span class="var">name</span>; <span class="com">// protected = accessible par les enfants</span>
    
    <span class="kw">public</span> <span class="mt">Animal</span>(<span class="type">String</span> <span class="var">name</span>) { <span class="kw">this</span>.<span class="var">name</span> = <span class="var">name</span>; }
    
    <span class="kw">public void</span> <span class="mt">makeSound</span>() { <span class="type">System</span>.out.println(<span class="str">"..."</span>); }
}

<span class="kw">public class</span> <span class="type">Dog</span> <span class="kw">extends</span> <span class="type">Animal</span> {
    <span class="kw">public</span> <span class="mt">Dog</span>(<span class="type">String</span> <span class="var">name</span>) {
        <span class="kw">super</span>(<span class="var">name</span>); <span class="com">// Appelle le constructeur du PARENT</span>
    }
    
    <span class="man">@Override</span>
    <span class="kw">public void</span> <span class="mt">makeSound</span>() {
        <span class="kw">super</span>.<span class="mt">makeSound</span>(); <span class="com">// Optionnel : appelle la version parente</span>
        <span class="type">System</span>.out.println(<span class="str">"Woof!"</span>);
    }
}</pre>
            </div>

            <!-- Polymorphism -->
            <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">üé≠ Le Polymorphisme : Une Interface, Plusieurs Formes
            </h3>
            <p>C'est la capacit√© de traiter des objets de types diff√©rents de mani√®re uniforme s'ils partagent le m√™me
                parent.</p>

            <div class="use-case">
                <h4>üéÆ Cas R√©el : Liste de Combat RPG</h4>
                <div class="code" style="margin-top: 1rem;">
                    <div class="code-head"><span class="dot g"></span>Le pouvoir du Polymorphisme</div>
                    <pre><span class="type">List</span>&lt;<span class="type">Character</span>&gt; <span class="var">players</span> = <span class="type">List</span>.of(
    <span class="kw">new</span> <span class="type">Warrior</span>(<span class="str">"Conan"</span>),
    <span class="kw">new</span> <span class="type">Mage</span>(<span class="str">"Gandalf"</span>),
    <span class="kw">new</span> <span class="type">Archer</span>(<span class="str">"Legolas"</span>)
);

<span class="com">// On traite tout le monde pareil !</span>
<span class="kw">for</span> (<span class="type">Character</span> <span class="var">p</span> : <span class="var">players</span>) {
    <span class="var">p</span>.<span class="mt">attack</span>(); <span class="com">// Ex√©cute l'attaque sp√©cifique de chaque classe</span>
}</pre>
                </div>
                <p style="margin-top: 1rem;"><strong>Avantage</strong> : Vous pouvez ajouter un <code>Ninja</code> plus
                    tard sans changer une seule ligne de votre boucle de combat !</p>
            </div>

            <!-- Pattern Matching -->
            <div class="code" style="margin-top: 2rem;">
                <div class="code-head"><span class="dot r"></span>Pattern Matching (Java 16+)</div>
                <pre><span class="kw">public void</span> <span class="mt">handleUser</span>(<span class="type">User</span> <span class="var">user</span>) {
    <span class="com">// Plus besoin de cast manuel ( (Admin) user )</span>
    <span class="kw">if</span> (<span class="var">user</span> <span class="kw">instanceof</span> <span class="type">Admin</span> <span class="var">a</span>) {
        <span class="var">a</span>.<span class="mt">deleteEverything</span>(); <span class="com">// 'a' est d√©j√† typ√© Admin</span>
    } <span class="kw">else if</span> (<span class="var">user</span> <span class="kw">instanceof</span> <span class="type">Guest</span> <span class="var">g</span>) {
        <span class="var">g</span>.<span class="mt">viewOnly</span>();
    }
}</pre>
            </div>

            <!-- Composition vs Inheritance -->
            <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">‚öñÔ∏è Composition vs H√©ritage</h3>
            <div class="callout callout-warning">
                <h4>üí° "Favor Composition over Inheritance"</h4>
                <p>L'h√©ritage cr√©e un lien tr√®s fort et rigide (couplage). Si la m√®re change, toutes les filles
                    tremblent.</p>
                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li><strong>H√©ritage (IS-A)</strong> : Une Voiture EST UN V√©hicule.</li>
                    <li><strong>Composition (HAS-A)</strong> : Une Voiture A UN Moteur.</li>
                </ul>
                <p style="margin-top: 0.75rem;"><strong>Conseil</strong> : Si vous pouvez utiliser la composition,
                    faites-le. C'est souvent plus flexible.</p>
            </div>

            <!-- Le Saviez-vous -->
            <div class="callout callout-recall" style="margin-top: 2rem;">
                <h4>üí° Le Saviez-vous ?</h4>
                <p><strong>final</strong> : Une classe marqu√©e <code>final</code> ne peut pas avoir d'enfants (ex:
                    <code>String</code> est final). Une m√©thode <code>final</code> ne peut pas √™tre red√©finie.</p>
                <p style="margin-top: 0.75rem;"><strong>La classe Object</strong> : En Java, TOUTES les classes h√©ritent
                    implicitement de la classe <code>Object</code>. C'est l'anc√™tre commun qui nous donne
                    <code>toString()</code>, <code>equals()</code> et <code>hashCode()</code>.</p>
                <p style="margin-top: 0.75rem;"><strong>Abstract</strong> : Une classe <code>abstract</code> est une
                    classe "incompl√®te" qu'on ne peut pas instancier. Elle sert uniquement de base pour ses h√©riti√®res.
                </p>
            </div>

            <!-- Pi√®ges -->
            <div class="callout callout-warning" style="margin-top: 2rem;">
                <h4>‚ö†Ô∏è Pi√®ges Courants</h4>
                <p><strong>1. Constructeur oubli√©</strong> : Si le parent n'a pas de constructeur vide, l'enfant DOIT
                    appeler <code>super(...)</code> explicitement en premi√®re ligne de son constructeur.</p>
                <p style="margin-top: 0.75rem;"><strong>2. Visibilit√© <code>private</code></strong> : Un enfant n'a pas
                    acc√®s aux champs <code>private</code> de son parent. Utilisez <code>protected</code> ou des getters.
                </p>
                <p style="margin-top: 0.75rem;"><strong>3. Le "Liskov Substitution Principle"</strong> : Un enfant ne
                    devrait pas casser le contrat de son parent. Si un <code>Oiseau</code> vole, et que vous cr√©ez une
                    <code>Autruche</code> qui jette une exception dans <code>voler()</code>, vous avez un probl√®me de
                    design.</p>
            </div>

            <!-- Pour Aller Plus Loin -->
            <div class="callout callout-tip" style="margin-top: 2rem;">
                <h4>üöÄ Pour Aller Plus Loin</h4>
                <p><strong>Concepts avanc√©s</strong> :</p>
                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li><strong>Dynamic Dispatch</strong> : Le m√©canisme interne qui choisit quelle m√©thode appeler au
                        runtime</li>
                    <li><strong>Sealed Classes (Java 17)</strong> : Limiter l'h√©ritage √† une liste pr√©cise de classes
                        autoris√©es</li>
                    <li><strong>Bridge Methods</strong> : G√©n√©r√©es par le compilateur pour g√©rer les g√©n√©riques et
                        l'h√©ritage</li>
                </ul>
            </div>

        </div>
</section>