<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditions - M√©mo JavaScript</title>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .tf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }

        .tf-card {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            position: relative;
        }

        .tf-card.falsy {
            border-color: #f44336;
        }

        .tf-card.truthy {
            border-color: #4caf50;
        }

        .tf-val {
            font-family: 'JetBrains Mono', monospace;
            font-weight: bold;
            margin-top: 5px;
            font-size: 0.85rem;
        }

        .struct-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .struct-card {
            background: var(--card);
            padding: 18px;
            border-radius: 10px;
            border: 1px solid var(--border);
            transition: transform 0.2s;
        }

        .struct-card:hover {
            transform: translateY(-2px);
            border-color: var(--accent);
        }

        .struct-title {
            color: var(--accent);
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.05rem;
        }

        .struct-use {
            background: rgba(255, 255, 255, 0.03);
            padding: 8px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 0.85rem;
            border-left: 3px solid var(--primary);
        }

        .playground {
            background: var(--bg2);
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
        }

        .playground-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .pg-btn {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 500;
        }

        .pg-btn:hover {
            border-color: var(--accent);
            background: var(--accent);
            color: white;
        }

        .pg-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .decision-tree {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1));
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .dt-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 8px 0;
            flex-wrap: wrap;
        }

        .dt-q {
            background: var(--card);
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid var(--accent);
            font-weight: 500;
            min-width: 200px;
        }

        .dt-arrow {
            color: var(--accent);
            font-size: 1.3rem;
        }

        .dt-a {
            font-family: 'JetBrains Mono';
            color: var(--primary);
            font-weight: bold;
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 12px;
            border-radius: 6px;
        }

        .pitfall {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
        }

        .pitfall-title {
            color: #f44336;
            font-weight: bold;
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
    <main class="container">
        <section id="s4" style="border:none; padding-top:40px">
            <div class="sec-header">
                <div class="sec-num">04</div>
                <div>
                    <h2 class="sec-title">Structures Conditionnelles</h2>
                    <p class="sec-sub">Guide Complet : 10+ Patterns Modernes</p>
                </div>
            </div>

            <!-- TRUTHY/FALSY FOUNDATION -->
            <details open>
                <summary>üåó Fondation : Truthy vs Falsy</summary>
                <div class="details-content">
                    <p>En JS, <strong>6 valeurs</strong> sont Falsy. Tout le reste est Truthy.</p>
                    <div class="tf-grid">
                        <div class="tf-card falsy">
                            <div style="font-size:1.8rem">0Ô∏è‚É£</div>
                            <div class="tf-val">0</div>
                        </div>
                        <div class="tf-card falsy">
                            <div style="font-size:1.8rem">""</div>
                            <div class="tf-val">String vide</div>
                        </div>
                        <div class="tf-card falsy">
                            <div style="font-size:1.8rem">üëª</div>
                            <div class="tf-val">null</div>
                        </div>
                        <div class="tf-card falsy">
                            <div style="font-size:1.8rem">‚ùì</div>
                            <div class="tf-val">undefined</div>
                        </div>
                        <div class="tf-card falsy">
                            <div style="font-size:1.8rem">üö´</div>
                            <div class="tf-val">false</div>
                        </div>
                        <div class="tf-card falsy">
                            <div style="font-size:1.8rem">üî¢</div>
                            <div class="tf-val">NaN</div>
                        </div>
                        <div class="tf-card truthy">
                            <div style="font-size:1.8rem">üì¶</div>
                            <div class="tf-val">{}</div>
                        </div>
                        <div class="tf-card truthy">
                            <div style="font-size:1.8rem">üìú</div>
                            <div class="tf-val">[]</div>
                        </div>
                        <div class="tf-card truthy">
                            <div style="font-size:1.8rem">üìù</div>
                            <div class="tf-val">"0"</div>
                        </div>
                    </div>
                </div>
            </details>

            <!-- COMPREHENSIVE STRUCTURES -->
            <h3 style="margin-top:40px; border-left: 4px solid var(--primary); padding-left: 12px;">üèóÔ∏è Les 10
                Structures Conditionnelles</h3>

            <div class="struct-grid">
                <!-- 1. IF/ELSE -->
                <div class="struct-card">
                    <div class="struct-title"><span>1Ô∏è‚É£</span> If / Else (Classique)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">if (age >= 18) {
    console.log("Majeur");
} else if (age >= 13) {
    console.log("Ado");
} else {
    console.log("Enfant");
}</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Logique simple avec blocs de code.</div>
                </div>

                <!-- 2. TERNARY -->
                <div class="struct-card">
                    <div class="struct-title"><span>2Ô∏è‚É£</span> Ternaire (? :)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">const status = isOnline 
    ? "üü¢ En ligne" 
    : "üî¥ Hors ligne";

// ‚ùå √âviter imbrication
const x = a ? (b ? 1 : 2) : 3;</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Assignation conditionnelle simple (1
                        ligne).</div>
                </div>

                <!-- 3. SHORT-CIRCUIT && -->
                <div class="struct-card">
                    <div class="struct-title"><span>3Ô∏è‚É£</span> Short-Circuit (&&)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">// Ex√©cute si truthy
isLoggedIn && showDashboard();

// React pattern
{user && <Profile user={user} />}</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Ex√©cution conditionnelle concise (React,
                        Vue).</div>
                </div>

                <!-- 4. SHORT-CIRCUIT || -->
                <div class="struct-card">
                    <div class="struct-title"><span>4Ô∏è‚É£</span> Fallback (||)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">const name = userName || "Anonyme";

// ‚ö†Ô∏è Pi√®ge avec 0 et ""
const count = 0;
const val = count || 10; // 10 (Bug!)</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Valeur par d√©faut (attention aux 0/false).
                    </div>
                </div>

                <!-- 5. NULLISH COALESCING -->
                <div class="struct-card">
                    <div class="struct-title"><span>5Ô∏è‚É£</span> Nullish Coalescing (??)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">const speed = 0;
const v = speed ?? 100; // 0 ‚úÖ

// Ignore seulement null/undefined
const x = "" ?? "default"; // ""</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Valeur par d√©faut robuste (configs,
                        options).</div>
                </div>

                <!-- 6. OPTIONAL CHAINING -->
                <div class="struct-card">
                    <div class="struct-title"><span>6Ô∏è‚É£</span> Optional Chaining (?.)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">const city = user?.address?.city;

// Appel de fonction safe
user?.notify?.();

// Array safe
const first = arr?.[0];</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Acc√®s profond sans crash (APIs, donn√©es
                        externes).</div>
                </div>

                <!-- 7. SWITCH -->
                <div class="struct-card">
                    <div class="struct-title"><span>7Ô∏è‚É£</span> Switch (√ânum√©ration)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">switch(role) {
    case 'admin':
        perm = 'ALL';
        break;
    case 'guest':
        perm = 'READ';
        break;
    default:
        perm = 'NONE';
}</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Multiples cas d'√©galit√© stricte.</div>
                </div>

                <!-- 8. OBJECT LOOKUP -->
                <div class="struct-card">
                    <div class="struct-title"><span>8Ô∏è‚É£</span> Object Lookup (Strategy)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">const permissions = {
    admin: 'ALL',
    guest: 'READ'
};
const perm = permissions[role] 
    ?? 'NONE';</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Remplace switch. Plus propre, extensible
                        O(1).</div>
                </div>

                <!-- 9. GUARD CLAUSES -->
                <div class="struct-card">
                    <div class="struct-title"><span>9Ô∏è‚É£</span> Guard Clauses (Early Return)</div>
                    <pre style="margin:10px 0"><code class="language-javascript">function process(user) {
    if (!user) return;
    if (!user.active) return;
    if (!user.verified) return;
    
    // Happy path ici
    doWork(user);
}</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> √âviter le "else hell". Validation en d√©but
                        de fonction.</div>
                </div>

                <!-- 10. TRY/CATCH -->
                <div class="struct-card">
                    <div class="struct-title"><span>üîü</span> Try / Catch / Finally</div>
                    <pre style="margin:10px 0"><code class="language-javascript">try {
    const data = JSON.parse(str);
    processData(data);
} catch (error) {
    logError(error);
} finally {
    cleanup(); // Toujours
}</code></pre>
                    <div class="struct-use">‚úÖ <strong>Cas d'usage :</strong> Gestion d'erreurs (parsing, fetch, I/O).
                    </div>
                </div>
            </div>

            <!-- DECISION TREE -->
            <h3 style="margin-top:40px;">üß≠ Arbre de D√©cision : Quelle Structure Choisir ?</h3>
            <div class="decision-tree">
                <div class="dt-row">
                    <div class="dt-q">Assignation simple A ou B ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">condition ? A : B</div>
                </div>
                <div class="dt-row">
                    <div class="dt-q">Ex√©cuter si condition vraie ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">cond && action()</div>
                </div>
                <div class="dt-row">
                    <div class="dt-q">Valeur par d√©faut (0 accept√©) ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">val ?? default</div>
                </div>
                <div class="dt-row">
                    <div class="dt-q">Acc√®s objet profond safe ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">obj?.prop?.sub</div>
                </div>
                <div class="dt-row">
                    <div class="dt-q">Multiples validations ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">Guard Clauses (return)</div>
                </div>
                <div class="dt-row">
                    <div class="dt-q">√ânum√©ration (5+ cas) ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">Object Lookup</div>
                </div>
                <div class="dt-row">
                    <div class="dt-q">Code risqu√© (parsing, I/O) ?</div>
                    <div class="dt-arrow">‚Üí</div>
                    <div class="dt-a">try / catch</div>
                </div>
            </div>

            <!-- PITFALLS -->
            <h3 style="margin-top:40px;">‚ö†Ô∏è Pi√®ges Courants</h3>
            <div class="pitfall">
                <div class="pitfall-title">1. Oublier le break dans switch</div>
                <pre><code class="language-javascript">switch(x) {
    case 1: console.log("Un"); // ‚ö†Ô∏è Pas de break
    case 2: console.log("Deux"); break;
}
// x=1 affiche "Un" ET "Deux" (fall-through)</code></pre>
            </div>

            <div class="pitfall">
                <div class="pitfall-title">2. Confondre || et ??</div>
                <pre><code class="language-javascript">const config = { timeout: 0 };
const t1 = config.timeout || 5000; // 5000 ‚ùå (0 est falsy)
const t2 = config.timeout ?? 5000; // 0 ‚úÖ</code></pre>
            </div>

            <div class="pitfall">
                <div class="pitfall-title">3. Ternaire imbriqu√© illisible</div>
                <pre><code class="language-javascript">// ‚ùå Cauchemar
const x = a ? (b ? (c ? 1 : 2) : 3) : 4;

// ‚úÖ Utilisez if/else ou Object Lookup</code></pre>
            </div>

            <!-- INTERACTIVE PLAYGROUND -->
            <div class="playground">
                <h3 style="margin-top:0; color:var(--accent)">üéÆ Playground Interactif</h3>
                <p style="opacity:0.8; margin-bottom:20px">Testez les diff√©rentes structures avec vos propres valeurs.
                </p>

                <div class="playground-controls">
                    <div class="pg-btn" onclick="testPattern('ternary')">Ternaire</div>
                    <div class="pg-btn" onclick="testPattern('shortcircuit')">Short-Circuit</div>
                    <div class="pg-btn" onclick="testPattern('nullish')">Nullish (??)</div>
                    <div class="pg-btn" onclick="testPattern('optional')">Optional (?. )</div>
                    <div class="pg-btn" onclick="testPattern('guard')">Guard Clause</div>
                    <div class="pg-btn" onclick="testPattern('lookup')">Object Lookup</div>
                </div>

                <div style="display:flex; gap:10px; margin-bottom:15px; flex-wrap:wrap">
                    <input type="text" id="pg-input" class="demo-input"
                        placeholder="Valeur de test (ex: 0, null, 'hello')" style="flex:1; min-width:200px" value="0">
                    <button class="demo-btn" onclick="runPlayground()">Ex√©cuter</button>
                </div>

                <div id="pg-output"
                    style="background:var(--bg); padding:20px; border-radius:8px; min-height:100px; font-family:'JetBrains Mono'; font-size:0.9rem">
                    <div style="opacity:0.5; text-align:center">S√©lectionnez un pattern et cliquez sur Ex√©cuter</div>
                </div>
            </div>

            <div style="margin-top:40px; display:flex; gap:10px">
                <a href="03_operators.html" class="demo-btn" style="text-decoration:none; background:var(--bg2)">‚Üê
                    Op√©rateurs</a>
                <a href="05_loops.html" class="demo-btn" style="text-decoration:none">Suivant: Boucles ‚Üí</a>
            </div>
        </section>
    </main>

    <script src="../assets/js/layout.js"></script>
    <script src="../assets/js/modules/04_conditions.js"></script>
</body>

</html>