import{c as S,as as W,u as X,Q as Y,r as m,y,j as e,M as k,F as T,B as t,$ as I,at as Z,m as w,S as P,I as ee,au as V}from"./index-lTRvPOam.js";import{C as u,a as x,b as h,c as j,e as C,d as N}from"./card-DcAUHDT3.js";import{T as se,a as ae,b as _,c as A}from"./tabs-DAy3at6C.js";import{A as te,a as ie,b as re}from"./avatar-Df0jrSpc.js";import{U as L,T as R}from"./textarea-COL7HmEs.js";import{A as le,a as ne,b as ce}from"./alert-gQp489nZ.js";import{F as U}from"./file-text-CdjVUfje.js";import{S as oe}from"./star-C3rRdn7i.js";import{C as de}from"./circle-alert-gejgMTRx.js";import{P as me}from"./pen-line-CcSjUlih.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=S("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=S("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),xe={username:"",avatar_url:null,bio:"",interests:[],preferred_themes:"system",accessibility_settings:{highContrast:!1,largeText:!1,reduceMotion:!1}},Ce=()=>{const{user:i,session:E}=W(),f=X(),{toast:o}=Y(),[p,v]=m.useState("profile"),[s,n]=m.useState(xe),[q,z]=m.useState(!0),[b,M]=m.useState(!1),[D,B]=m.useState([]);m.useEffect(()=>{!i&&!E?f("/login"):i&&O()},[i,E,f]);const O=async()=>{var a;if(i){z(!0);try{const{data:r,error:c}=await y.from("profiles").select("*").eq("id",i.id).single();if(c)throw c;if(r){const l=r;n({username:l.username||((a=i.email)==null?void 0:a.split("@")[0])||"Utilisateur",avatar_url:l.avatar_url,bio:l.bio||"",interests:l.interests||[],preferred_themes:l.preferred_themes||"system",accessibility_settings:l.accessibility_settings||{highContrast:!1,largeText:!1,reduceMotion:!1}})}B([{type:"TDAH",score:65,date:"2023-11-15",interpretation:"Modéré",color:"bg-yellow-500"},{type:"Autisme",score:42,date:"2023-11-10",interpretation:"Modéré",color:"bg-yellow-500"},{type:"Dyslexie",score:30,date:"2023-10-22",interpretation:"Faible",color:"bg-green-500"}])}catch(r){console.error("Error loading profile:",r),o({title:"Erreur",description:"Impossible de charger votre profil. Veuillez réessayer.",variant:"destructive"})}finally{z(!1)}}},F=async()=>{if(i){M(!0);try{const{error:a}=await y.from("profiles").upsert({id:i.id,username:s.username,avatar_url:s.avatar_url,bio:s.bio,interests:s.interests,preferred_themes:s.preferred_themes,accessibility_settings:s.accessibility_settings},{onConflict:"id"});if(a)throw a;o({title:"Profil mis à jour",description:"Vos modifications ont été enregistrées avec succès."})}catch(a){console.error("Error updating profile:",a),o({title:"Erreur",description:"Impossible de mettre à jour votre profil. Veuillez réessayer.",variant:"destructive"})}finally{M(!1)}}},Q=async a=>{const r=a.target.files;if(!r||r.length===0)return;const c=r[0],l=c.name.split(".").pop(),g=`${i==null?void 0:i.id}/avatar.${l}`;try{const{error:d}=await y.storage.from("avatars").upload(g,c,{upsert:!0});if(d)throw d;const{data:J}=y.storage.from("avatars").getPublicUrl(g);n(K=>({...K,avatar_url:J.publicUrl})),o({title:"Avatar téléchargé",description:"Votre nouvel avatar a été téléchargé."})}catch(d){console.error("Error uploading avatar:",d),o({title:"Erreur",description:"Impossible de télécharger l'avatar. Veuillez réessayer.",variant:"destructive"})}},G=async()=>{try{await y.auth.signOut(),f("/")}catch(a){console.error("Error signing out:",a),o({title:"Erreur",description:"Impossible de vous déconnecter. Veuillez réessayer.",variant:"destructive"})}};return q?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{children:"Chargement de votre profil..."})}),e.jsx(T,{})]}):i?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{}),e.jsx("main",{className:"flex-1 py-12",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-64",children:e.jsxs(u,{children:[e.jsxs(x,{className:"text-center",children:[e.jsxs("div",{className:"relative mx-auto mb-4 w-24 h-24",children:[e.jsxs(te,{className:"w-24 h-24 border-2 border-primary",children:[e.jsx(ie,{src:s.avatar_url||"",alt:s.username}),e.jsx(re,{className:"text-2xl",children:s.username.charAt(0).toUpperCase()})]}),e.jsxs("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 p-1 bg-primary text-primary-foreground rounded-full cursor-pointer",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:Q})]})]}),e.jsx(h,{children:s.username}),e.jsx(j,{children:i==null?void 0:i.email})]}),e.jsx(N,{children:e.jsxs("nav",{className:"space-y-2",children:[e.jsxs(t,{variant:p==="profile"?"default":"ghost",className:"w-full justify-start",onClick:()=>v("profile"),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Profil"]}),e.jsxs(t,{variant:p==="settings"?"default":"ghost",className:"w-full justify-start",onClick:()=>v("settings"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Paramètres"]}),e.jsxs(t,{variant:p==="results"?"default":"ghost",className:"w-full justify-start",onClick:()=>v("results"),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Résultats"]}),e.jsxs(t,{variant:p==="notes"?"default":"ghost",className:"w-full justify-start",onClick:()=>v("notes"),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Notes"]})]})}),e.jsx(C,{children:e.jsxs(t,{variant:"outline",className:"w-full",onClick:G,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Déconnexion"]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs(se,{value:p,onValueChange:v,className:"w-full",children:[e.jsxs(ae,{className:"hidden",children:[e.jsx(_,{value:"profile",children:"Profil"}),e.jsx(_,{value:"settings",children:"Paramètres"}),e.jsx(_,{value:"results",children:"Résultats"}),e.jsx(_,{value:"notes",children:"Notes"})]}),e.jsx(A,{value:"profile",children:e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Informations de profil"]}),e.jsx(j,{children:"Modifiez vos informations personnelles"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"username",children:"Nom d'utilisateur"}),e.jsx(ee,{id:"username",value:s.username,onChange:a=>n({...s,username:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"bio",children:"Biographie"}),e.jsx(R,{id:"bio",value:s.bio||"",onChange:a=>n({...s,bio:a.target.value}),placeholder:"Parlez-nous un peu de vous...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{children:"Centres d'intérêt"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["TDAH","Autisme","Dyslexie","Dyspraxie","Dyscalculie","Neuropsychologie","Sciences cognitives"].map(a=>{var r,c;return e.jsxs(t,{variant:(r=s.interests)!=null&&r.includes(a)?"default":"outline",size:"sm",onClick:()=>{var g;const l=(g=s.interests)!=null&&g.includes(a)?s.interests.filter(d=>d!==a):[...s.interests||[],a];n({...s,interests:l})},children:[a,((c=s.interests)==null?void 0:c.includes(a))&&e.jsx(oe,{className:"ml-1 h-3 w-3"})]},a)})})]})]}),e.jsx(C,{children:e.jsxs(t,{onClick:F,disabled:b,children:[b?"Enregistrement...":"Enregistrer les modifications",e.jsx($,{className:"ml-2 h-4 w-4"})]})})]})})}),e.jsx(A,{value:"settings",children:e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Paramètres du compte"]}),e.jsx(j,{children:"Personnalisez votre expérience sur la plateforme"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Thème"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["light","dark","system"].map(a=>e.jsxs(t,{variant:s.preferred_themes===a?"default":"outline",className:"w-full justify-center",onClick:()=>n({...s,preferred_themes:a}),children:[a==="light"&&"Clair",a==="dark"&&"Sombre",a==="system"&&"Système"]},a))})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Accessibilité"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Contraste élevé"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Augmente le contraste des couleurs"})]}),e.jsx(t,{variant:s.accessibility_settings.highContrast?"default":"outline",onClick:()=>n({...s,accessibility_settings:{...s.accessibility_settings,highContrast:!s.accessibility_settings.highContrast}}),children:s.accessibility_settings.highContrast?"Activé":"Désactivé"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Texte agrandi"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Augmente la taille du texte pour une meilleure lisibilité"})]}),e.jsx(t,{variant:s.accessibility_settings.largeText?"default":"outline",onClick:()=>n({...s,accessibility_settings:{...s.accessibility_settings,largeText:!s.accessibility_settings.largeText}}),children:s.accessibility_settings.largeText?"Activé":"Désactivé"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Réduire les animations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Limite les effets de mouvement"})]}),e.jsx(t,{variant:s.accessibility_settings.reduceMotion?"default":"outline",onClick:()=>n({...s,accessibility_settings:{...s.accessibility_settings,reduceMotion:!s.accessibility_settings.reduceMotion}}),children:s.accessibility_settings.reduceMotion?"Activé":"Désactivé"})]})]})]})]}),e.jsx(C,{children:e.jsxs(t,{onClick:F,disabled:b,children:[b?"Enregistrement...":"Enregistrer les paramètres",e.jsx($,{className:"ml-2 h-4 w-4"})]})})]})})}),e.jsx(A,{value:"results",children:e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Résultats des auto-évaluations"]}),e.jsx(j,{children:"Historique de vos évaluations"})]}),e.jsx(N,{children:D.length>0?e.jsx("div",{className:"space-y-6",children:D.map((a,r)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:a.type}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(a.date).toLocaleDateString("fr-FR")})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`${a.color} h-full transition-all duration-500 ease-out`,style:{width:`${a.score}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Score: ",a.score,"%"]}),e.jsxs("span",{children:["Interprétation: ",a.interpretation]})]}),e.jsx(t,{variant:"outline",size:"sm",className:"mt-1",children:"Voir les détails"}),e.jsx(V,{className:"mt-4"})]},r))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore effectué d'auto-évaluations."}),e.jsx(t,{onClick:()=>f("/auto-evaluation"),children:"Faire une évaluation"})]})})]})})}),e.jsx(A,{value:"notes",children:e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Mes notes personnelles"]}),e.jsx(j,{children:"Prenez des notes sur votre parcours neurodivergent"})]}),e.jsxs(N,{children:[e.jsxs(le,{className:"mb-6",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx(ne,{children:"Fonctionnalité en développement"}),e.jsx(ce,{children:"Le système de notes personnelles sera bientôt disponible."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{placeholder:"Commencez à écrire une note...",rows:8,disabled:!0}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(t,{variant:"outline",disabled:!0,children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Nouvelle note"]}),e.jsx(t,{disabled:!0,children:"Enregistrer"})]})]})]})]})})})]})})]})})}),e.jsx(T,{})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsxs(u,{className:"w-full max-w-md",children:[e.jsxs(x,{children:[e.jsx(h,{children:"Accès restreint"}),e.jsx(j,{children:"Vous devez être connecté pour accéder à cette page."})]}),e.jsx(C,{children:e.jsx(t,{onClick:()=>f("/login"),className:"w-full",children:"Se connecter"})})]})}),e.jsx(T,{})]})};export{Ce as default};
