<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©mo Node.js - Backend JavaScript | Guide 2025</title>
    <meta name="description"
        content="Guide Node.js : Event Loop, Modules, File System, HTTP, Express.js. D√©mos interactives et syntaxe moderne.">
    <meta name="keywords" content="Node.js, Backend, JavaScript, Express, Server, API, NPM, Modules">
    <meta name="author" content="Geoffroy Streit">
    <meta name="theme-color" content="#303030">
    <link rel="canonical" href="index.html">

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">JS</div>Node.js
            </div>
            <nav>
                <a href="#s1">Intro</a>
                <a href="#s2">Modules</a>
                <a href="#s3">FS</a>
                <a href="#s4">Events</a>
                <a href="#s5">HTTP</a>
                <a href="#s6">Express</a>
                <a href="#s9">Avanc√©</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>M√©mo Node.js</h1>
            <p>JavaScript c√¥t√© serveur. Runtime asynchrone orient√© √©v√©nements.</p>
        </div>
    </section>

    <!-- INTRO GENERAL -->
    <div class="intro-box">
        <div class="container">
            <h3>Qu'est-ce que Node.js ?</h3>
            <p style="max-width:800px;">
                Node.js n'est pas un framework, c'est un <strong>Runtime</strong> (environnement d'ex√©cution) qui permet
                d'ex√©cuter du JavaScript
                hors du navigateur (c√¥t√© serveur). Il est construit sur le moteur <strong>V8</strong> de Chrome.
            </p>
            <p style="color:var(--muted); font-size:0.95rem; margin-top:10px">
                Sa force r√©side dans son architecture <strong>Non-Bloquante</strong> et
                <strong>Single-Threaded</strong>, ce qui le rend
                extr√™mement performant pour les applications I/O intensive (API, temps r√©el, streaming).
            </p>
        </div>
    </div>

    <div class="toc">
        <div class="container">
            <div class="toc-grid">
                <a href="#s1" class="toc-item"><span class="toc-num">01</span>Runtime & Async</a>
                <a href="#s2" class="toc-item"><span class="toc-num">02</span>Modules (CJS/ESM)</a>
                <a href="#s3" class="toc-item"><span class="toc-num">03</span>File System (fs)</a>
                <a href="#s4" class="toc-item"><span class="toc-num">04</span>Events (Emitter)</a>
                <a href="#s5" class="toc-item"><span class="toc-num">05</span>HTTP Server</a>
                <a href="#s6" class="toc-item"><span class="toc-num">06</span>Express.js</a>
                <a href="#s7" class="toc-item"><span class="toc-num">07</span>NPM & Scripts</a>
                <a href="#s8" class="toc-item"><span class="toc-num">08</span>Variables d'Env</a>
                <a href="#s9" class="toc-item"><span class="toc-num">09</span>Streams & Buffers</a>
                <a href="#s10" class="toc-item"><span class="toc-num">10</span>Error Handling</a>
                <a href="#s11" class="toc-item"><span class="toc-num">11</span>OS & Process</a>
            </div>
        </div>
    </div>

    <!-- S1: RUNTIME -->
    <section id="s1">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">01</div>
                <div>
                    <h2 class="sec-title">Runtime & Async</h2>
                    <p class="sec-sub">Event Loop & Non-Blocking I/O</p>
                </div>
            </div>

            <details>
                <summary>üí° Comprendre l'Event Loop</summary>
                <div class="details-content">
                    <p>Node.js est <strong>Single-Threaded</strong> : il n'a qu'un seul fil d'ex√©cution principal.</p>
                    <p>Pourtant, il peut g√©rer des milliers de requ√™tes simultan√©es. Comment ? Gr√¢ce √† l'<strong>Event
                            Loop</strong>.
                        Les op√©rations lourdes (lecture fichier, requ√™te DB) sont d√©l√©gu√©es au syst√®me (C++ threads,
                        libuv), et Node continue d'ex√©cuter le reste du code.</p>
                    <p>Une fois l'op√©ration finie, le Callback est plac√© dans une file d'attente pour √™tre ex√©cut√© d√®s
                        que le fil principal est libre.</p>

                    <h4 style="margin-top:15px; color:var(--accent)">Les Phases (Simplifi√©)</h4>
                    <ul>
                        <li><strong>Timers</strong> : <code>setTimeout()</code>, <code>setInterval()</code></li>
                        <li><strong>Poll</strong> : I/O (lecture fichier, r√©seau)</li>
                        <li><strong>Check</strong> : <code>setImmediate()</code></li>
                        <li><strong>Microtasks</strong> (Prioritaire) : <code>Promise</code>,
                            <code>process.nextTick()</code>
                        </li>
                    </ul>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Asynchrone simple</div>
                <pre><span class="c">// 1. Code Synchrone</span>
<span class="fn">console</span>.<span class="fn">log</span>(<span class="str">"D√©but"</span>);

<span class="c">// 2. Op√©ration Asynchrone (non-bloquante)</span>
<span class="fn">setTimeout</span>(() => {
    <span class="fn">console</span>.<span class="fn">log</span>(<span class="str">"Timeout Fini"</span>);
}, <span class="num">0</span>);

<span class="c">// 3. Suite imm√©diate</span>
<span class="fn">console</span>.<span class="fn">log</span>(<span class="str">"Fin"</span>);

<span class="c">/* Ordre de sortie :
   > D√©but
   > Fin
   > Timeout Fini (m√™me avec 0ms !)
*/</span></pre>
            </div>

            <div class="demo">
                <div class="demo-title">Simulateur Event Loop</div>
                <button class="demo-btn" onclick="demoEventLoop()">Lancer simulation</button>
                <div id="demo-loop-output" class="demo-output">En attente...</div>
            </div>
        </div>
    </section>

    <!-- S2: MODULES -->
    <section id="s2">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">02</div>
                <div>
                    <h2 class="sec-title">Modules</h2>
                    <p class="sec-sub">CommonJS vs ES Modules</p>
                </div>
            </div>

            <details>
                <summary>üí° Les syst√®mes de modules</summary>
                <div class="details-content">
                    <p>Historiquement, Node utilisait <strong>CommonJS</strong> (<code>require</code>). C'est le
                        standard par d√©faut.</p>
                    <p>Depuis les versions r√©centes, Node supporte officiellement les <strong>ES Modules</strong>
                        (<code>import/export</code>), le standard du web moderne.</p>
                    <p>Pour utiliser ESM, ajoutez <code>"type": "module"</code> dans votre <code>package.json</code> ou
                        utilisez l'extension <code>.mjs</code>.</p>

                    <table style="margin-top:15px; width:100%">
                        <tr>
                            <th>Feature</th>
                            <th>CommonJS (CJS)</th>
                            <th>ES Modules (ESM)</th>
                        </tr>
                        <tr>
                            <td>Syntaxe</td>
                            <td><code>require</code> / <code>module.exports</code></td>
                            <td><code>import</code> / <code>export</code></td>
                        </tr>
                        <tr>
                            <td>Chargement</td>
                            <td>Synchrone (Dynamique)</td>
                            <td>Asynchrone (Statique)</td>
                        </tr>
                        <tr>
                            <td>Scope</td>
                            <td>Wrapper function (exports, require...)</td>
                            <td>Global lexical scope</td>
                        </tr>
                        <tr>
                            <td>Top-level await</td>
                            <td>‚ùå Non</td>
                            <td>‚úÖ Oui</td>
                        </tr>
                    </table>
                </div>
            </details>

            <div class="grid2">
                <div class="code">
                    <div class="code-head">CommonJS (Legacy/Default)</div>
                    <pre><span class="c">// math.js</span>
<span class="kw">const</span> <span class="fn">add</span> = (<span class="var">a</span>, <span class="var">b</span>) => <span class="var">a</span> + <span class="var">b</span>;
<span class="var">module</span>.<span class="var">exports</span> = { <span class="fn">add</span> };

<span class="c">// index.js</span>
<span class="kw">const</span> { <span class="fn">add</span> } = <span class="fn">require</span>(<span class="str">'./math'</span>);
<span class="fn">console</span>.<span class="fn">log</span>(<span class="fn">add</span>(<span class="num">2</span>, <span class="num">3</span>));</pre>
                </div>

                <div class="code">
                    <div class="code-head">ES Modules (Modern)</div>
                    <pre><span class="c">// math.mjs</span>
<span class="kw">export</span> <span class="kw">const</span> <span class="fn">add</span> = (<span class="var">a</span>, <span class="var">b</span>) => <span class="var">a</span> + <span class="var">b</span>;

<span class="c">// index.mjs</span>
<span class="kw">import</span> { <span class="fn">add</span> } <span class="kw">from</span> <span class="str">'./math.mjs'</span>;
<span class="fn">console</span>.<span class="fn">log</span>(<span class="fn">add</span>(<span class="num">2</span>, <span class="num">3</span>));</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S3: FILE SYSTEM -->
    <section id="s3">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">03</div>
                <div>
                    <h2 class="sec-title">File System (fs)</h2>
                    <p class="sec-sub">Lire et √©crire des fichiers</p>
                </div>
            </div>

            <details>
                <summary>üí° Sync vs Async</summary>
                <div class="details-content">
                    <p>Le module <code>fs</code> offre 3 fa√ßons de faire :</p>
                    <ol>
                        <li><strong>Synchrone</strong> (<code>readFileSync</code>) : Bloque tout le serveur. √Ä √©viter
                            (sauf au d√©marrage).</li>
                        <li><strong>Callback</strong> (<code>readFile</code>) : Non-bloquant, mais risque de "Callback
                            Hell".</li>
                        <li><strong>Promises</strong> (<code>fs/promises</code>) : Le standard moderne avec
                            <code>async/await</code>.
                        </li>
                    </ol>

                    <h4 style="margin-top:15px; color:var(--accent)">Le Buffer</h4>
                    <p>Node.js g√®re les donn√©es binaires via la classe <code>Buffer</code>. C'est un tableau d'octets de
                        taille fixe. Les m√©thodes <code>fs</code> retournent souvent des Buffers si aucun encodage n'est
                        sp√©cifi√©.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>fs/promises (Moderne)</div>
                <pre><span class="kw">import</span> <span class="var">fs</span> <span class="kw">from</span> <span class="str">'node:fs/promises'</span>;

<span class="kw">async</span> <span class="kw">function</span> <span class="fn">readConfig</span>() {
    <span class="kw">try</span> {
        <span class="kw">const</span> <span class="var">data</span> = <span class="kw">await</span> <span class="var">fs</span>.<span class="fn">readFile</span>(<span class="str">'config.json'</span>, <span class="str">'utf8'</span>);
        <span class="fn">console</span>.<span class="fn">log</span>(<span class="fn">JSON</span>.<span class="fn">parse</span>(<span class="var">data</span>));
    } <span class="kw">catch</span> (<span class="var">err</span>) {
        <span class="fn">console</span>.<span class="fn">error</span>(<span class="str">"Erreur lecture:"</span>, <span class="var">err</span>);
    }
}</pre>
            </div>

            <div class="demo">
                <div class="demo-title">Virtual File System</div>
                <button class="demo-btn" onclick="demoFSRead()">Lire Fichier</button>
                <button class="demo-btn" onclick="demoFSWrite()">√âcrire Fichier</button>
                <div id="demo-fs-output" class="demo-output">En attente d'op√©ration...</div>
            </div>
        </div>
    </section>

    <!-- S4: EVENTS -->
    <section id="s4">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">04</div>
                <div>
                    <h2 class="sec-title">Events</h2>
                    <p class="sec-sub">Architecture √âv√©nementielle</p>
                </div>
            </div>

            <details>
                <summary>üí° EventEmitter</summary>
                <div class="details-content">
                    <p>Une grande partie de Node API (Streams, HTTP, Sockets) est h√©rit√© de la classe
                        <code>EventEmitter</code>.
                    </p>
                    <p>Le principe est le pattern <strong>Observer</strong> : on "√©coute" des √©v√©nements
                        (<code>.on</code>) et on en "√©met" (<code>.emit</code>). C'est ce qui permet de d√©coupler la
                        logique.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head">Exemple Custom Emitter</div>
                <pre><span class="kw">import</span> { <span class="fn">EventEmitter</span> } <span class="kw">from</span> <span class="str">'node:events'</span>;

<span class="kw">const</span> <span class="var">myEmitter</span> = <span class="kw">new</span> <span class="fn">EventEmitter</span>();

<span class="c">// 1. √âcouter (Subscribe)</span>
<span class="var">myEmitter</span>.<span class="fn">on</span>(<span class="str">'userLogin'</span>, (<span class="var">user</span>) => {
    <span class="fn">console</span>.<span class="fn">log</span>(<span class="str">`Bienvenue ${user} !`</span>);
});

<span class="c">// 2. √âmettre (Publish)</span>
<span class="var">myEmitter</span>.<span class="fn">emit</span>(<span class="str">'userLogin'</span>, <span class="str">'Alice'</span>);</pre>
            </div>

            <div class="demo">
                <div class="demo-title">Event Simulation</div>
                <button class="demo-btn" onclick="demoSubscribe()">1. S'abonner (ON)</button>
                <button class="demo-btn" onclick="demoEmit()">2. √âmettre (EMIT)</button>
                <div id="demo-events-output" class="demo-output">Log des √©v√©nements...</div>
            </div>
        </div>
    </section>

    <!-- S5: HTTP -->
    <section id="s5">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">05</div>
                <div>
                    <h2 class="sec-title">HTTP (Natif)</h2>
                    <p class="sec-sub">Cr√©er un serveur sans framework</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>http.createServer</div>
                <pre><span class="kw">import</span> <span class="var">http</span> <span class="kw">from</span> <span class="str">'node:http'</span>;

<span class="kw">const</span> <span class="var">server</span> = <span class="var">http</span>.<span class="fn">createServer</span>((<span class="var">req</span>, <span class="var">res</span>) => {
    <span class="c">// Router basique</span>
    <span class="kw">if</span> (<span class="var">req</span>.<span class="var">url</span> === <span class="str">'/'</span>) {
        <span class="var">res</span>.<span class="fn">writeHead</span>(<span class="num">200</span>, { <span class="str">'Content-Type'</span>: <span class="str">'text/plain'</span> });
        <span class="var">res</span>.<span class="fn">end</span>(<span class="str">'Accueil'</span>);
    } <span class="kw">else</span> <span class="kw">if</span> (<span class="var">req</span>.<span class="var">url</span>.<span class="fn">startsWith</span>(<span class="str">'/api'</span>)) {
        <span class="c">// Parse URL moderne</span>
        <span class="kw">const</span> <span class="var">url</span> = <span class="kw">new</span> <span class="fn">URL</span>(<span class="var">req</span>.<span class="var">url</span>, <span class="str">`http://${req.headers.host}`</span>);
        <span class="kw">const</span> <span class="var">id</span> = <span class="var">url</span>.<span class="var">searchParams</span>.<span class="fn">get</span>(<span class="str">'id'</span>);

        <span class="var">res</span>.<span class="fn">writeHead</span>(<span class="num">200</span>, { <span class="str">'Content-Type'</span>: <span class="str">'application/json'</span> });
        <span class="var">res</span>.<span class="fn">end</span>(<span class="fn">JSON</span>.<span class="fn">stringify</span>({ <span class="var">data</span>: <span class="num">42</span>, <span class="var">queryId</span>: <span class="var">id</span> }));
    }
});

<span class="var">server</span>.<span class="fn">listen</span>(<span class="num">3000</span>, () => {
    <span class="fn">console</span>.<span class="fn">log</span>(<span class="str">'Serveur sur http://localhost:3000'</span>);
});</pre>
            </div>

            <div class="tip"><strong>üí° Note</strong> En production, on utilise rarement <code>http</code> directement.
                On pr√©f√®re un framework comme <strong>Express</strong>, <strong>Fastify</strong> ou
                <strong>NestJS</strong> pour simplifier le routing et les middlewares.
            </div>
        </div>
    </section>

    <!-- S6: EXPRESS -->
    <section id="s6">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">06</div>
                <div>
                    <h2 class="sec-title">Express.js</h2>
                    <p class="sec-sub">Le standard de facto</p>
                </div>
            </div>

            <details>
                <summary>üí° Pourquoi Express ?</summary>
                <div class="details-content">
                    <p>Express simplifie drastiquement le code HTTP natif.</p>
                    <p>Il introduit le concept de <strong>Middleware</strong> : des fonctions qui s'ex√©cutent les unes
                        apr√®s les autres (ex: logger -> v√©rifier auth -> parser JSON -> controller).</p>

                    <div
                        style="background:var(--code-bg); padding:10px; border-radius:4px; margin-top:10px; font-family:monospace; font-size:0.85rem;">
                        Request ‚û°Ô∏è Middleware 1 (Log) ‚û°Ô∏è Middleware 2 (Auth) ‚û°Ô∏è Route Handler ‚û°Ô∏è Response
                    </div>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>API REST avec Express</div>
                <pre><span class="kw">import</span> <span class="var">express</span> <span class="kw">from</span> <span class="str">'express'</span>;
<span class="kw">const</span> <span class="var">app</span> = <span class="fn">express</span>();

<span class="c">// Middleware pour parser le JSON</span>
<span class="var">app</span>.<span class="fn">use</span>(<span class="var">express</span>.<span class="fn">json</span>());

<span class="c">// Routes</span>
<span class="var">app</span>.<span class="fn">get</span>(<span class="str">'/users'</span>, (<span class="var">req</span>, <span class="var">res</span>) => {
    <span class="var">res</span>.<span class="fn">json</span>([{ <span class="var">id</span>: <span class="num">1</span>, <span class="var">name</span>: <span class="str">"Bob"</span> }]);
});

<span class="var">app</span>.<span class="fn">post</span>(<span class="str">'/users'</span>, (<span class="var">req</span>, <span class="var">res</span>) => {
    <span class="kw">const</span> <span class="var">newUser</span> = <span class="var">req</span>.<span class="var">body</span>;
    <span class="c">// Sauvegarder user...</span>
    <span class="var">res</span>.<span class="fn">status</span>(<span class="num">201</span>).<span class="fn">send</span>(<span class="str">"Cr√©√©"</span>);
});

<span class="var">app</span>.<span class="fn">listen</span>(<span class="num">3000</span>);</pre>
            </div>
        </div>
    </section>

    <!-- S7: NPM -->
    <section id="s7">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">07</div>
                <div>
                    <h2 class="sec-title">NPM & Scripts</h2>
                    <p class="sec-sub">package.json</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head">Commandes Utiles</div>
                <pre><span class="c"># Initialiser un projet</span>
npm init -y

<span class="c"># Installer des d√©pendances (Production)</span>
npm install express mongoose

<span class="c"># Installer des d√©pendances (D√©veloppement)</span>
npm install -D nodemon jest

<span class="c"># Lancer un script d√©fini dans package.json</span>
npm run start
npm run dev</pre>
            </div>

            <div class="grid2">
                <div class="ref-card"
                    style="background:var(--card); padding:15px; border-radius:8px; border:1px solid var(--border);">
                    <h4>Dependencies</h4>
                    <p style="font-size:0.9rem">Librairies n√©cessaires pour que l'app tourne (Express, React, Axios).
                    </p>
                </div>
                <div class="ref-card"
                    style="background:var(--card); padding:15px; border-radius:8px; border:1px solid var(--border);">
                    <h4>DevDependencies</h4>
                    <p style="font-size:0.9rem">Outils de travail uniquement (Linter, Tests, Bundler).</p>
                </div>
            </div>
        </div>
    </section>

    <!-- S8: ENV -->
    <section id="s8">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">08</div>
                <div>
                    <h2 class="sec-title">Environnement</h2>
                    <p class="sec-sub">process.env</p>
                </div>
            </div>

            <div class="warning"><strong>‚ö†Ô∏è S√©curit√©</strong> Ne jamais commiter de mots de passe ou cl√©s API dans le
                code ! Utilisez toujours des variables d'environnement.</div>

            <div class="code">
                <div class="code-head">.env & dotenv</div>
                <pre><span class="c">// fichier .env</span>
DB_HOST=localhost
API_KEY=12345secret

<span class="c">// app.js</span>
<span class="kw">import</span> <span class="str">'dotenv/config'</span>;

<span class="fn">console</span>.<span class="fn">log</span>(<span class="var">process</span>.<span class="var">env</span>.<span class="var">DB_HOST</span>); <span class="c">// "localhost"</span></pre>
            </div>
        </div>
    </section>

    </section>

    <!-- S9: STREAMS -->
    <section id="s9">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">09</div>
                <div>
                    <h2 class="sec-title">Streams & Buffers</h2>
                    <p class="sec-sub">Performance et gros volumes</p>
                </div>
            </div>

            <details>
                <summary>üí° Pourquoi les Streams ?</summary>
                <div class="details-content">
                    <p>Pour lire un fichier de 10 Go, impossible de tout charger en m√©moire (RAM). On utilise des
                        <strong>Streams</strong> pour lire/√©crire morceau par morceau (chunks).
                    </p>
                    <p>Le <strong>Pipe</strong> (<code>|</code>) connecte une source (ex: lecture fichier) √† une
                        destination (ex: r√©ponse HTTP) sans surcharge m√©moire.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Pipeline Optimis√©</div>
                <pre><span class="kw">import</span> { <span class="fn">pipeline</span> } <span class="kw">from</span> <span class="str">'node:stream/promises'</span>;
<span class="kw">import</span> <span class="var">fs</span> <span class="kw">from</span> <span class="str">'node:fs'</span>;
<span class="kw">import</span> <span class="var">zlib</span> <span class="kw">from</span> <span class="str">'node:zlib'</span>;

<span class="kw">async</span> <span class="kw">function</span> <span class="fn">compressBigFile</span>() {
    <span class="kw">await</span> <span class="fn">pipeline</span>(
        <span class="var">fs</span>.<span class="fn">createReadStream</span>(<span class="str">'bigfile.txt'</span>), <span class="c">// Source</span>
        <span class="var">zlib</span>.<span class="fn">createGzip</span>(),                  <span class="c">// Transform (Zip)</span>
        <span class="var">fs</span>.<span class="fn">createWriteStream</span>(<span class="str">'bigfile.txt.gz'</span>) <span class="c">// Destination</span>
    );
    <span class="fn">console</span>.<span class="fn">log</span>(<span class="str">'Compression finie sans exploser la RAM !'</span>);
}</pre>
            </div>
        </div>
    </section>

    <!-- S10: ERROR HANDLING -->
    <section id="s10">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">10</div>
                <div>
                    <h2 class="sec-title">Gestion d'Erreurs</h2>
                    <p class="sec-sub">Best Practices</p>
                </div>
            </div>

            <div class="warning">
                <strong>‚ö†Ô∏è R√®gle d'or</strong> Ne jamais "avaler" une erreur silencieusement. Logguez-la toujours
                (console.error ou monitoring) et informez l'utilisateur (code 500).
            </div>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Express Global Handler</div>
                <pre><span class="c">// 1. Wrapper pour Async (ou utiliser 'express-async-errors')</span>
<span class="var">app</span>.<span class="fn">get</span>(<span class="str">'/async'</span>, <span class="kw">async</span> (<span class="var">req</span>, <span class="var">res</span>, <span class="var">next</span>) => {
    <span class="kw">try</span> {
        <span class="kw">await</span> <span class="fn">someRiskyAction</span>();
    } <span class="kw">catch</span> (<span class="var">err</span>) {
        <span class="fn">next</span>(<span class="var">err</span>); <span class="c">// Passe l'erreur √† Express</span>
    }
});

<span class="c">// 2. Middleware d'erreur (√† la fin de app.js)</span>
<span class="var">app</span>.<span class="fn">use</span>((<span class="var">err</span>, <span class="var">req</span>, <span class="var">res</span>, <span class="var">next</span>) => {
    <span class="fn">console</span>.<span class="fn">error</span>(<span class="str">"üî• Crash:"</span>, <span class="var">err</span>.<span class="var">stack</span>);
    <span class="var">res</span>.<span class="fn">status</span>(<span class="num">500</span>).<span class="fn">json</span>({ <span class="var">error</span>: <span class="str">"Erreur interne"</span> });
});</pre>
            </div>
        </div>
    </section>

    <!-- S11: PROCESS OS -->
    <section id="s11">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">11</div>
                <div>
                    <h2 class="sec-title">Process & OS</h2>
                    <p class="sec-sub">Int√©ractions Syst√®me</p>
                </div>
            </div>

            <div class="grid2">
                <div>
                    <h3>Infos Syst√®me (os)</h3>
                    <p style="margin-bottom:10px;">Module natif pour monitorer le serveur.</p>
                    <ul style="line-height:1.8; color:var(--muted);">
                        <li><code>os.cpus()</code> : Coeurs CPU (pour Cluster)</li>
                        <li><code>os.freemem()</code> : RAM libre</li>
                        <li><code>os.homedir()</code> : Dossier utilisateur</li>
                    </ul>
                </div>
                <div class="code">
                    <div class="code-head"><span class="dot g"></span>Graceful Shutdown</div>
                    <pre><span class="c">// Intercepter l'arr√™t (CTRL+C ou Docker stop)</span>
<span class="var">process</span>.<span class="fn">on</span>(<span class="str">'SIGTERM'</span>, () => {
    <span class="fn">console</span>.<span class="fn">log</span>(<span class="str">'üõë Arr√™t demand√©...'</span>);
    
    <span class="var">server</span>.<span class="fn">close</span>(() => {
        <span class="fn">console</span>.<span class="fn">log</span>(<span class="str">'‚úÖ Connexions ferm√©es. Bye !'</span>);
        <span class="var">process</span>.<span class="fn">exit</span>(<span class="num">0</span>);
    });
});</pre>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p><strong>M√©mo Node.js</strong> ‚Ä¢ 2025 Edition</p>
            <p style="font-size:0.9rem; margin-top:12px; line-height:1.6; opacity:0.8;">
                Cr√©√© par Geoffroy Streit ‚Äî Pour consolider sa m√©moire avec un cours concis, graphique et structur√©, mais
                aussi pour le plaisir de partager la connaissance et faciliter l'apprentissage des autres.
            </p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>