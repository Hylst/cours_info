<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©mo PHP - 200+ fonctions avec exemples | Guide 2025</title>
    <meta name="description"
        content="Guide PHP complet : variables, tableaux, fonctions, POO, fichiers, sessions, PDO. Exemples pratiques vanilla PHP.">
    <meta name="keywords"
        content="PHP, programmation, backend, POO, MySQL, PDO, sessions, fichiers, tutoriel, guide, m√©mo">
    <meta name="author" content="Geoffroy Streit">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#777bb4">
    <link rel="canonical" href="index.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="M√©mo PHP">
    <meta property="og:description" content="Guide PHP avec exemples : POO, PDO, fichiers, sessions.">
    <meta property="og:url" content="https://hylst.fr/cours/docker/php/index.html">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="M√©mo PHP - 200+ fonctions">
    <meta name="twitter:description" content="Guide PHP avec exemples : POO, PDO, fichiers, sessions.">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/quiz-style.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">PHP</div>PHP
            </div>
            <nav>
                <a href="#s1">Variables</a>
                <a href="#s4">Fonctions</a>
                <a href="#s6">POO</a>
                <a href="#s8">PDO</a>
                <a href="#s10">Fichiers</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>M√©mo PHP</h1>
            <p>Guide pratique PHP vanilla avec exemples concrets.</p>
        </div>
    </section>

    <!-- INTRO GENERAL -->
    <div class="intro-box"
        style="background:var(--card-bg); border-bottom:1px solid var(--border-color); padding:30px 0;">
        <div class="container">
            <h3 style="margin-top:0; color:var(--text-color)">Pourquoi PHP ?</h3>
            <p style="color:#c9d1d9; max-width:800px; line-height:1.6;">
                PHP (Hypertext Preprocessor) est un langage de script c√¥t√© serveur, con√ßu principalement pour le
                d√©veloppement web. Il anime environ <strong>79% du web</strong>, notamment gr√¢ce √† des g√©ants comme
                Facebook et Wikipedia, et aux syst√®mes de gestion de contenu (CMS) comme WordPress qui, √† lui seul,
                alimente plus de 40% des sites web.
            </p>
            <p style="color:#8b949e; font-size:0.95rem; margin-top:15px; line-height:1.6;">
                Simple √† apprendre mais puissant, PHP a √©norm√©ment √©volu√© ces derni√®res ann√©es. Les versions modernes
                (8+) ont introduit des fonctionnalit√©s de typage strict (pour les param√®tres, retours de fonction et
                propri√©t√©s de classe), un compilateur JIT pour am√©liorer les performances, ainsi que des attributs,
                √©num√©rations et bien plus encore. Bien qu'il soit un langage √† typage dynamique et faible par d√©faut,
                PHP permet d√©sormais d'√©crire du code backend robuste et maintenable gr√¢ce √† ces outils optionnels.
            </p>
        </div>
    </div>

    <div class="toc">
        <div class="container">
            <div class="toc-grid">
                <a href="#s1" class="toc-item"><span class="toc-num">01</span>Variables</a>
                <a href="#s2" class="toc-item"><span class="toc-num">02</span>Tableaux</a>
                <a href="#s3" class="toc-item"><span class="toc-num">03</span>Structures</a>
                <a href="#s4" class="toc-item"><span class="toc-num">04</span>Fonctions</a>
                <a href="#s5" class="toc-item"><span class="toc-num">05</span>Strings</a>
                <a href="#s6" class="toc-item"><span class="toc-num">06</span>POO</a>
                <a href="#s7" class="toc-item"><span class="toc-num">07</span>Erreurs</a>
                <a href="#s8" class="toc-item"><span class="toc-num">08</span>PDO/MySQL</a>
                <a href="#s9" class="toc-item"><span class="toc-num">09</span>Sessions</a>
                <a href="#s10" class="toc-item"><span class="toc-num">10</span>Fichiers</a>
                <a href="#s11" class="toc-item"><span class="toc-num">11</span>Formulaires</a>
                <a href="#s12" class="toc-item"><span class="toc-num">12</span>R√©f√©rence</a>
                <a href="#s13" class="toc-item"><span class="toc-num">13</span>PHP 8.x</a>
                <a href="#s14" class="toc-item"><span class="toc-num">14</span>API REST</a>
                <a href="#s15" class="toc-item"><span class="toc-num">15</span>S√©curit√©</a>
                <a href="#s16" class="toc-item"><span class="toc-num">16</span>MVC & Auth</a>
            </div>
        </div>
    </div>

    <!-- S1: VARIABLES -->
    <section id="s1">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">01</div>
                <div>
                    <h2 class="sec-title">Variables & Types</h2>
                    <p class="sec-sub">D√©claration, types, constantes</p>
                </div>
            </div>

            <details>
                <summary>üìñ Les Bases du Langage</summary>
                <div>
                    <p>En PHP, toutes les variables commencent par un <strong>$</strong>.</p>
                    <p>C'est un langage <strong>dynamiquement typ√©</strong> (le type est d√©duit), mais on peut (et on
                        doit !) utiliser le typage strict dans les fonctions modernes.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Variables</div>
                <pre><span class="tag">&lt;?php</span>
<span class="c">// Variables (pr√©fixe $)</span>
<span class="var">$name</span> = <span class="str">"Alice"</span>;        <span class="c">// string</span>
<span class="var">$age</span> = <span class="num">25</span>;               <span class="c">// integer</span>
<span class="var">$price</span> = <span class="num">19.99</span>;          <span class="c">// float</span>
<span class="var">$isActive</span> = <span class="kw">true</span>;        <span class="c">// boolean</span>
<span class="var">$nothing</span> = <span class="kw">null</span>;         <span class="c">// null</span>

<span class="c">// Constantes</span>
<span class="kw">define</span>(<span class="str">'API_KEY'</span>, <span class="str">'abc123'</span>);
<span class="kw">const</span> <span class="var">MAX_SIZE</span> = <span class="num">100</span>;

<span class="c">// V√©rification de type</span>
<span class="fn">gettype</span>(<span class="var">$name</span>);          <span class="c">// "string"</span>
<span class="fn">is_string</span>(<span class="var">$name</span>);        <span class="c">// true</span>
<span class="fn">is_int</span>(<span class="var">$age</span>);            <span class="c">// true</span>
<span class="fn">is_array</span>(<span class="var">$data</span>);         <span class="c">// true/false</span>
<span class="fn">isset</span>(<span class="var">$var</span>);             <span class="c">// existe et non null?</span>
<span class="fn">empty</span>(<span class="var">$var</span>);             <span class="c">// vide? (0, "", null, false, [])</span>

<span class="c">// Conversion de type (casting)</span>
<span class="var">$str</span> = (<span class="kw">string</span>) <span class="num">42</span>;      <span class="c">// "42"</span>
<span class="var">$int</span> = (<span class="kw">int</span>) <span class="str">"42"</span>;       <span class="c">// 42</span>
<span class="var">$arr</span> = (<span class="kw">array</span>) <span class="var">$obj</span>;     <span class="c">// object to array</span>
<span class="tag">?&gt;</span></pre>
            </div>

            <div class="demo">
                <div class="demo-title">R√©sultat attendu</div>
                <div class="demo-output">
                    Nom: Alice, √Çge: 25<br>
                    Type de $name: string<br>
                    Type de $age: integer
                </div>
            </div>

            <div class="tip"><strong>üí° Typage strict (PHP 7+)</strong> Ajoutez <code>declare(strict_types=1);</code> en
                d√©but de fichier pour activer le typage strict.</div>
        </div>
    </section>

    <!-- S2: TABLEAUX -->
    <section id="s2">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">02</div>
                <div>
                    <h2 class="sec-title">Tableaux</h2>
                    <p class="sec-sub">Arrays index√©s et associatifs</p>
                </div>
            </div>

            <details>
                <summary>üìñ La Structure de Donn√©e Reine</summary>
                <div>
                    <p>En PHP, le tableau (Array) est une structure universelle : il peut √™tre √† la fois une liste
                        ordonn√©e (Vector) et une map cl√©-valeur (Dictionary).</p>
                    <p>C'est la structure la plus utilis√©e pour manipuler des donn√©es.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Arrays</div>
                <pre><span class="c">// Tableau index√©</span>
<span class="var">$fruits</span> = [<span class="str">"pomme"</span>, <span class="str">"banane"</span>, <span class="str">"orange"</span>];
<span class="var">$fruits</span>[<span class="num">0</span>];  <span class="c">// "pomme"</span>

<span class="c">// Tableau associatif</span>
<span class="var">$user</span> = [
    <span class="str">"name"</span> => <span class="str">"Alice"</span>,
    <span class="str">"age"</span> => <span class="num">25</span>,
    <span class="str">"email"</span> => <span class="str">"alice@example.com"</span>
];
<span class="var">$user</span>[<span class="str">"name"</span>];  <span class="c">// "Alice"</span>

<span class="c">// Fonctions principales</span>
<span class="fn">count</span>(<span class="var">$arr</span>);            <span class="c">// Nombre d'√©l√©ments</span>
<span class="fn">array_push</span>(<span class="var">$arr</span>, <span class="var">$val</span>); <span class="c">// Ajouter √† la fin</span>
<span class="fn">array_pop</span>(<span class="var">$arr</span>);        <span class="c">// Retirer le dernier</span>
<span class="fn">array_merge</span>(<span class="var">$a</span>, <span class="var">$b</span>);    <span class="c">// Fusionner</span>
<span class="fn">in_array</span>(<span class="var">$val</span>, <span class="var">$arr</span>);   <span class="c">// Existe?</span>
<span class="fn">array_search</span>(<span class="var">$val</span>, <span class="var">$arr</span>); <span class="c">// Index</span>
<span class="fn">array_keys</span>(<span class="var">$arr</span>);       <span class="c">// Toutes les cl√©s</span>
<span class="fn">array_values</span>(<span class="var">$arr</span>);     <span class="c">// Toutes les valeurs</span>
<span class="fn">array_map</span>(<span class="var">$fn</span>, <span class="var">$arr</span>);   <span class="c">// Transformer</span>
<span class="fn">array_filter</span>(<span class="var">$arr</span>, <span class="var">$fn</span>); <span class="c">// Filtrer</span>
<span class="fn">array_reduce</span>(<span class="var">$arr</span>, <span class="var">$fn</span>); <span class="c">// R√©duire</span>
<span class="fn">sort</span>(<span class="var">$arr</span>);             <span class="c">// Trier (modifie)</span>
<span class="fn">usort</span>(<span class="var">$arr</span>, <span class="var">$fn</span>);       <span class="c">// Tri personnalis√©</span></pre>
            </div>

            <div class="demo">
                <div class="demo-title">R√©sultat attendu</div>
                <div class="demo-output">
                    Fruits: pomme, banane, orange<br>
                    Nombre: 3<br>
                    User: {"name":"Alice","age":25}
                </div>
            </div>
        </div>
    </section>

    <!-- S3: STRUCTURES -->
    <section id="s3">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">03</div>
                <div>
                    <h2 class="sec-title">Structures de contr√¥le</h2>
                    <p class="sec-sub">Conditions, boucles</p>
                </div>
            </div>

            <details>
                <summary>üí° Syntaxe Alternative</summary>
                <div>
                    <p>Dans les vues HTML (templates), on utilise souvent la syntaxe alternative pour la lisibilit√© :
                    </p>
                    <p><code>if ($a): ... endif;</code> ou <code>foreach ($a as $b): ... endforeach;</code></p>
                </div>
            </details>

            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Conditions</div>
                    <pre><span class="c">// if / elseif / else</span>
<span class="kw">if</span> (<span class="var">$age</span> < <span class="num">18</span>) {
    <span class="kw">echo</span> <span class="str">"Mineur"</span>;
} <span class="kw">elseif</span> (<span class="var">$age</span> < <span class="num">65</span>) {
    <span class="kw">echo</span> <span class="str">"Adulte"</span>;
} <span class="kw">else</span> {
    <span class="kw">echo</span> <span class="str">"Senior"</span>;
}

<span class="c">// Ternaire</span>
<span class="var">$status</span> = <span class="var">$age</span> >= <span class="num">18</span> ? <span class="str">"Majeur"</span> : <span class="str">"Mineur"</span>;

<span class="c">// Null coalescing</span>
<span class="var">$name</span> = <span class="var">$_GET</span>[<span class="str">'name'</span>] ?? <span class="str">"Invit√©"</span>;

<span class="c">// Match (PHP 8+)</span>
<span class="var">$msg</span> = <span class="kw">match</span>(<span class="var">$code</span>) {
    <span class="num">200</span> => <span class="str">"OK"</span>,
    <span class="num">404</span> => <span class="str">"Not Found"</span>,
    <span class="kw">default</span> => <span class="str">"Error"</span>
};</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Boucles</div>
                    <pre><span class="c">// for</span>
<span class="kw">for</span> (<span class="var">$i</span> = <span class="num">0</span>; <span class="var">$i</span> < <span class="num">5</span>; <span class="var">$i</span>++) {
    <span class="kw">echo</span> <span class="var">$i</span>;
}

<span class="c">// foreach (tableaux)</span>
<span class="kw">foreach</span> (<span class="var">$fruits</span> <span class="kw">as</span> <span class="var">$fruit</span>) {
    <span class="kw">echo</span> <span class="var">$fruit</span>;
}

<span class="c">// foreach avec cl√©</span>
<span class="kw">foreach</span> (<span class="var">$user</span> <span class="kw">as</span> <span class="var">$key</span> => <span class="var">$val</span>) {
    <span class="kw">echo</span> <span class="str">"$key: $val"</span>;
}

<span class="c">// while</span>
<span class="kw">while</span> (<span class="var">$condition</span>) { }

<span class="c">// do...while</span>
<span class="kw">do</span> { } <span class="kw">while</span> (<span class="var">$cond</span>);</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S4: FONCTIONS -->
    <section id="s4">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">04</div>
                <div>
                    <h2 class="sec-title">Fonctions</h2>
                    <p class="sec-sub">D√©claration, arguments, closures</p>
                </div>
            </div>

            <details>
                <summary>üìñ Typage & Rigueur</summary>
                <div>
                    <p>Depuis PHP 7, le typage des arguments et du retour est fortement encourag√©.</p>
                    <p>Utiliser <code>declare(strict_types=1);</code> permet d'√©viter les conversions silencieuses (ex:
                        passer "5" √† une fonction attendant un int provoquera une erreur).</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Fonctions</div>
                <pre><span class="c">// Fonction simple</span>
<span class="kw">function</span> <span class="fn">greet</span>(<span class="var">$name</span>) {
    <span class="kw">return</span> <span class="str">"Hello $name!"</span>;
}

<span class="c">// Valeur par d√©faut</span>
<span class="kw">function</span> <span class="fn">power</span>(<span class="var">$base</span>, <span class="var">$exp</span> = <span class="num">2</span>) {
    <span class="kw">return</span> <span class="var">$base</span> ** <span class="var">$exp</span>;
}

<span class="c">// Typage (PHP 7+)</span>
<span class="kw">function</span> <span class="fn">add</span>(<span class="kw">int</span> <span class="var">$a</span>, <span class="kw">int</span> <span class="var">$b</span>): <span class="kw">int</span> {
    <span class="kw">return</span> <span class="var">$a</span> + <span class="var">$b</span>;
}

<span class="c">// Type nullable</span>
<span class="kw">function</span> <span class="fn">find</span>(<span class="kw">int</span> <span class="var">$id</span>): ?<span class="kw">array</span> {
    <span class="kw">return</span> <span class="var">$id</span> > <span class="num">0</span> ? [<span class="str">"id"</span> => <span class="var">$id</span>] : <span class="kw">null</span>;
}

<span class="c">// Arrow function (PHP 7.4+)</span>
<span class="var">$double</span> = <span class="kw">fn</span>(<span class="var">$x</span>) => <span class="var">$x</span> * <span class="num">2</span>;

<span class="c">// Closure / fonction anonyme</span>
<span class="var">$greet</span> = <span class="kw">function</span>(<span class="var">$name</span>) {
    <span class="kw">return</span> <span class="str">"Hi $name"</span>;
};

<span class="c">// Closure avec use</span>
<span class="var">$multiplier</span> = <span class="num">3</span>;
<span class="var">$multiply</span> = <span class="kw">function</span>(<span class="var">$x</span>) <span class="kw">use</span> (<span class="var">$multiplier</span>) {
    <span class="kw">return</span> <span class="var">$x</span> * <span class="var">$multiplier</span>;
};</pre>
            </div>

            <div class="demo">
                <div class="demo-title">R√©sultat attendu</div>
                <div class="demo-output">
                    Hello PHP!<br>
                    2^8 = 256<br>
                    double(5) = 10
                </div>
            </div>
        </div>
    </section>

    <!-- S5: STRINGS -->
    <section id="s5">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">05</div>
                <div>
                    <h2 class="sec-title">Cha√Ænes de caract√®res</h2>
                    <p class="sec-sub">Manipulation de strings</p>
                </div>
            </div>

            <details>
                <summary>üìñ Guillemets Simples vs Doubles</summary>
                <div>
                    <p><strong>'Simple quotes'</strong> : Litt√©ral (rapide). <code>$a</code> n'est PAS interpr√©t√©.</p>
                    <p><strong>"Double quotes"</strong> : Interpr√©t√©. On peut y mettre des variables
                        <code>"Bonjour $nom"</code> et des caract√®res sp√©ciaux <code>\n \t</code>.
                    </p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Strings</div>
                <pre><span class="c">// D√©claration</span>
<span class="var">$str</span> = <span class="str">"Hello World"</span>;
<span class="var">$str</span> = <span class="str">'Simple quotes'</span>;    <span class="c">// pas d'interpolation</span>
<span class="var">$str</span> = <span class="str">"Hello $name"</span>;      <span class="c">// interpolation</span>
<span class="var">$str</span> = <span class="str">"Hello {$user['name']}"</span>; <span class="c">// complexe</span>

<span class="c">// Heredoc</span>
<span class="var">$html</span> = <span class="str">&lt;&lt;&lt;HTML
&lt;div&gt;$content&lt;/div&gt;
HTML</span>;

<span class="c">// Fonctions principales</span>
<span class="fn">strlen</span>(<span class="var">$str</span>);             <span class="c">// Longueur</span>
<span class="fn">strtoupper</span>(<span class="var">$str</span>);         <span class="c">// MAJUSCULES</span>
<span class="fn">strtolower</span>(<span class="var">$str</span>);         <span class="c">// minuscules</span>
<span class="fn">ucfirst</span>(<span class="var">$str</span>);            <span class="c">// Premi√®re lettre majuscule</span>
<span class="fn">ucwords</span>(<span class="var">$str</span>);            <span class="c">// Chaque Mot</span>
<span class="fn">trim</span>(<span class="var">$str</span>);               <span class="c">// Supprimer espaces</span>
<span class="fn">substr</span>(<span class="var">$str</span>, <span class="num">0</span>, <span class="num">5</span>);       <span class="c">// Extraire</span>
<span class="fn">str_replace</span>(<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="var">$str</span>); <span class="c">// Remplacer</span>
<span class="fn">strpos</span>(<span class="var">$str</span>, <span class="str">'o'</span>);        <span class="c">// Position</span>
<span class="fn">explode</span>(<span class="str">' '</span>, <span class="var">$str</span>);       <span class="c">// String ‚Üí Array</span>
<span class="fn">implode</span>(<span class="str">', '</span>, <span class="var">$arr</span>);      <span class="c">// Array ‚Üí String</span>
<span class="fn">sprintf</span>(<span class="str">"Age: %d"</span>, <span class="var">$age</span>); <span class="c">// Formatage</span>
<span class="fn">str_contains</span>(<span class="var">$str</span>, <span class="str">'o'</span>);  <span class="c">// PHP 8: contient?</span>
<span class="fn">str_starts_with</span>(<span class="var">$str</span>, <span class="str">'H'</span>); <span class="c">// PHP 8: commence par?</span></pre>
            </div>
        </div>
    </section>

    <!-- S6: POO -->
    <section id="s6">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">06</div>
                <div>
                    <h2 class="sec-title">Programmation Orient√©e Objet</h2>
                    <p class="sec-sub">Classes, PHP 8.x, Enums, Magic Methods</p>
                </div>
            </div>

            <details>
                <summary>üìñ Le Mod√®le Objet PHP</summary>
                <div>
                    <p>PHP poss√®de un mod√®le objet complet similaire √† Java/C#.</p>
                    <p>Depuis PHP 8.x, il est encore plus puissant avec <strong>Constructor Promotion</strong>,
                        <strong>Enums</strong>, <strong>Readonly Properties</strong>, et les
                        <strong>Attributes</strong>.
                    </p>
                </div>
            </details>

            <div class="grid2">
                <!-- CLASSIC CLASS -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Classe Classique</div>
                    <pre><span class="kw">class</span> <span class="fn">User</span> {
    <span class="kw">public</span> <span class="kw">string</span> <span class="var">$name</span>;
    <span class="kw">private</span> <span class="kw">int</span> <span class="var">$age</span>;
    <span class="kw">public static int</span> <span class="var">$count</span> = <span class="num">0</span>;

    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">string</span> <span class="var">$name</span>, <span class="kw">int</span> <span class="var">$age</span>) {
        <span class="var">$this</span>-&gt;<span class="prop">name</span> = <span class="var">$name</span>;
        <span class="var">$this</span>-&gt;<span class="prop">age</span> = <span class="var">$age</span>;
        <span class="kw">self</span>::<span class="var">$count</span>++;
    }

    <span class="kw">public function</span> <span class="fn">greet</span>(): <span class="kw">string</span> {
        <span class="kw">return</span> <span class="str">"Hello, I'm {$this-&gt;name}"</span>;
    }
}</pre>
                </div>

                <!-- CONSTRUCTOR PROMOTION -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Constructor Promotion (PHP 8.0)</div>
                    <pre><span class="c">// Shorthand - propri√©t√©s d√©clar√©es dans le constructeur</span>
<span class="kw">class</span> <span class="fn">Product</span> {
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public readonly string</span> <span class="var">$name</span>,
        <span class="kw">public</span> <span class="kw">float</span> <span class="var">$price</span>,
        <span class="kw">private</span> <span class="kw">int</span> <span class="var">$stock</span> = <span class="num">0</span>
    ) {}
}

<span class="c">// √âquivalent √† d√©clarer les propri√©t√©s + les assigner</span>
<span class="var">$p</span> = <span class="kw">new</span> <span class="fn">Product</span>(<span class="str">"iPhone"</span>, <span class="num">999.99</span>, <span class="num">10</span>);
<span class="fn">echo</span> <span class="var">$p</span>-&gt;<span class="prop">name</span>; <span class="c">// "iPhone"</span></pre>
                </div>
            </div>

            <!-- ENUMS -->
            <div class="code" style="margin-top:20px;">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Enums (PHP 8.1)</div>
                <pre><span class="c">// Enum simple (Unit Enum)</span>
<span class="kw">enum</span> <span class="fn">Status</span> {
    <span class="kw">case</span> Pending;
    <span class="kw">case</span> Active;
    <span class="kw">case</span> Archived;
}
<span class="var">$status</span> = <span class="fn">Status</span>::Active;

<span class="c">// Backed Enum (avec valeurs)</span>
<span class="kw">enum</span> <span class="fn">HttpCode</span>: <span class="kw">int</span> {
    <span class="kw">case</span> Ok = <span class="num">200</span>;
    <span class="kw">case</span> NotFound = <span class="num">404</span>;
    <span class="kw">case</span> ServerError = <span class="num">500</span>;

    <span class="c">// M√©thode dans un enum</span>
    <span class="kw">public function</span> <span class="fn">label</span>(): <span class="kw">string</span> {
        <span class="kw">return match</span>(<span class="var">$this</span>) {
            <span class="kw">self</span>::Ok =&gt; <span class="str">"Success"</span>,
            <span class="kw">self</span>::NotFound =&gt; <span class="str">"Not Found"</span>,
            <span class="kw">self</span>::ServerError =&gt; <span class="str">"Server Error"</span>,
        };
    }
}
<span class="fn">echo</span> <span class="fn">HttpCode</span>::Ok-&gt;<span class="prop">value</span>; <span class="c">// 200</span>
<span class="fn">echo</span> <span class="fn">HttpCode</span>::Ok-&gt;<span class="fn">label</span>(); <span class="c">// "Success"</span></pre>
            </div>

            <!-- MAGIC METHODS -->
            <div class="code" style="margin-top:20px;">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Magic Methods</div>
                <pre><span class="kw">class</span> <span class="fn">Entity</span> {
    <span class="kw">private array</span> <span class="var">$data</span> = [];

    <span class="c">// Appel√© quand on acc√®de √† une propri√©t√© inexistante</span>
    <span class="kw">public function</span> <span class="fn">__get</span>(<span class="kw">string</span> <span class="var">$key</span>): <span class="kw">mixed</span> {
        <span class="kw">return</span> <span class="var">$this</span>-&gt;<span class="prop">data</span>[<span class="var">$key</span>] ?? <span class="kw">null</span>;
    }

    <span class="c">// Appel√© quand on assigne une propri√©t√© inexistante</span>
    <span class="kw">public function</span> <span class="fn">__set</span>(<span class="kw">string</span> <span class="var">$key</span>, <span class="kw">mixed</span> <span class="var">$value</span>): <span class="kw">void</span> {
        <span class="var">$this</span>-&gt;<span class="prop">data</span>[<span class="var">$key</span>] = <span class="var">$value</span>;
    }

    <span class="c">// Conversion en string</span>
    <span class="kw">public function</span> <span class="fn">__toString</span>(): <span class="kw">string</span> {
        <span class="kw">return</span> <span class="fn">json_encode</span>(<span class="var">$this</span>-&gt;<span class="prop">data</span>);
    }

    <span class="c">// Appel√© pour m√©thode inexistante</span>
    <span class="kw">public function</span> <span class="fn">__call</span>(<span class="kw">string</span> <span class="var">$name</span>, <span class="kw">array</span> <span class="var">$args</span>): <span class="kw">mixed</span> {
        <span class="kw">return</span> <span class="str">"Method $name not found"</span>;
    }
}

<span class="var">$e</span> = <span class="kw">new</span> <span class="fn">Entity</span>();
<span class="var">$e</span>-&gt;<span class="prop">name</span> = <span class="str">"Test"</span>; <span class="c">// __set</span>
<span class="fn">echo</span> <span class="var">$e</span>-&gt;<span class="prop">name</span>;      <span class="c">// __get ‚Üí "Test"</span>
<span class="fn">echo</span> <span class="var">$e</span>;             <span class="c">// __toString ‚Üí {"name":"Test"}</span></pre>
            </div>

            <!-- ABSTRACT & INTERFACE -->
            <div class="grid2" style="margin-top:20px;">
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Abstract & Final</div>
                    <pre><span class="c">// Classe abstraite (non instanciable)</span>
<span class="kw">abstract class</span> <span class="fn">Animal</span> {
    <span class="kw">abstract public function</span> <span class="fn">speak</span>(): <span class="kw">string</span>;
    
    <span class="kw">public function</span> <span class="fn">breathe</span>(): <span class="kw">void</span> {
        <span class="fn">echo</span> <span class="str">"Breathing..."</span>;
    }
}

<span class="c">// Final = ne peut pas √™tre √©tendue</span>
<span class="kw">final class</span> <span class="fn">Dog</span> <span class="kw">extends</span> <span class="fn">Animal</span> {
    <span class="kw">public function</span> <span class="fn">speak</span>(): <span class="kw">string</span> {
        <span class="kw">return</span> <span class="str">"Woof!"</span>;
    }
}</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Interface & Trait</div>
                    <pre><span class="c">// Interface (contrat)</span>
<span class="kw">interface</span> <span class="fn">Jsonable</span> {
    <span class="kw">public function</span> <span class="fn">toJson</span>(): <span class="kw">string</span>;
}

<span class="c">// Trait (r√©utilisation de code)</span>
<span class="kw">trait</span> <span class="fn">Timestampable</span> {
    <span class="kw">public</span> <span class="fn">DateTime</span> <span class="var">$createdAt</span>;
    
    <span class="kw">public function</span> <span class="fn">touch</span>(): <span class="kw">void</span> {
        <span class="var">$this</span>-&gt;<span class="prop">createdAt</span> = <span class="kw">new</span> <span class="fn">DateTime</span>();
    }
}

<span class="c">// Utilisation</span>
<span class="kw">class</span> <span class="fn">Post</span> <span class="kw">implements</span> <span class="fn">Jsonable</span> {
    <span class="kw">use</span> <span class="fn">Timestampable</span>;
    
    <span class="kw">public function</span> <span class="fn">toJson</span>(): <span class="kw">string</span> {
        <span class="kw">return</span> <span class="fn">json_encode</span>([<span class="str">'created'</span> =&gt; <span class="var">$this</span>-&gt;<span class="prop">createdAt</span>]);
    }
}</pre>
                </div>
            </div>

            <div class="tip" style="margin-top:20px;"><strong>üí° PHP 8.2+</strong> <code>readonly class</code> rend
                toutes les propri√©t√©s readonly automatiquement. <code>#[Override]</code> attribute v√©rifie qu'une
                m√©thode surcharge bien un parent.</div>
        </div>
    </section>

    <!-- S7: ERREURS -->
    <section id="s7">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">07</div>
                <div>
                    <h2 class="sec-title">Gestion des erreurs</h2>
                    <p class="sec-sub">Exceptions, try/catch</p>
                </div>
            </div>

            <details>
                <summary>üìñ Exceptions vs Erreurs</summary>
                <div>
                    <p>Avant, PHP utilisait beaucoup les erreurs fatales. Aujourd'hui, la plupart des probl√®mes lancent
                        des <strong>Exceptions</strong> (interceptables).</p>
                    <p>Le bloc <code>try...catch</code> est indispensable pour s√©curiser les op√©rations risqu√©es (DB,
                        Fichiers, API).</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Exceptions</div>
                <pre><span class="c">// Try / Catch / Finally</span>
<span class="kw">try</span> {
    <span class="var">$result</span> = <span class="fn">riskyOperation</span>();
} <span class="kw">catch</span> (<span class="fn">InvalidArgumentException</span> <span class="var">$e</span>) {
    <span class="kw">echo</span> <span class="str">"Argument invalide: "</span> . <span class="var">$e</span>-&gt;<span class="fn">getMessage</span>();
} <span class="kw">catch</span> (<span class="fn">Exception</span> <span class="var">$e</span>) {
    <span class="kw">echo</span> <span class="str">"Erreur: "</span> . <span class="var">$e</span>-&gt;<span class="fn">getMessage</span>();
} <span class="kw">finally</span> {
    <span class="c">// Toujours ex√©cut√©</span>
    <span class="fn">cleanup</span>();
}

<span class="c">// Lancer une exception</span>
<span class="kw">throw new</span> <span class="fn">Exception</span>(<span class="str">"Message d'erreur"</span>);
<span class="kw">throw new</span> <span class="fn">InvalidArgumentException</span>(<span class="str">"Arg invalide"</span>);

<span class="c">// Exception personnalis√©e</span>
<span class="kw">class</span> <span class="fn">UserNotFoundException</span> <span class="kw">extends</span> <span class="fn">Exception</span> {
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">int</span> <span class="var">$id</span>) {
        <span class="kw">parent</span>::<span class="fn">__construct</span>(<span class="str">"User $id not found"</span>);
    }
}

<span class="c">// Error handler</span>
<span class="fn">set_error_handler</span>(<span class="kw">function</span>(<span class="var">$errno</span>, <span class="var">$errstr</span>) {
    <span class="kw">throw new</span> <span class="fn">ErrorException</span>(<span class="var">$errstr</span>, <span class="var">$errno</span>);
});</pre>
            </div>
        </div>
    </section>

    <!-- S8: PDO -->
    <section id="s8">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">08</div>
                <div>
                    <h2 class="sec-title">PDO / MySQL</h2>
                    <p class="sec-sub">Base de donn√©es</p>
                </div>
            </div>

            <details>
                <summary>üìñ Pourquoi PDO ?</summary>
                <div>
                    <p><strong>PDO</strong> (PHP Data Objects) est une couche d'abstraction.</p>
                    <p>Elle permet de changer de base de donn√©es (MySQL, PostgreSQL, SQLite) sans r√©√©crire tout le code,
                        et prot√®ge nativement contre les injections SQL via les requ√™tes pr√©par√©es.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>PDO</div>
                <pre><span class="c">// Connexion</span>
<span class="var">$dsn</span> = <span class="str">"mysql:host=localhost;dbname=mydb;charset=utf8mb4"</span>;
<span class="var">$pdo</span> = <span class="kw">new</span> <span class="fn">PDO</span>(<span class="var">$dsn</span>, <span class="str">"user"</span>, <span class="str">"password"</span>, [
    <span class="fn">PDO</span>::<span class="var">ATTR_ERRMODE</span> =&gt; <span class="fn">PDO</span>::<span class="var">ERRMODE_EXCEPTION</span>,
    <span class="fn">PDO</span>::<span class="var">ATTR_DEFAULT_FETCH_MODE</span> =&gt; <span class="fn">PDO</span>::<span class="var">FETCH_ASSOC</span>
]);

<span class="c">// SELECT avec prepare (s√©curis√©)</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT * FROM users WHERE id = ?"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="var">$id</span>]);
<span class="var">$user</span> = <span class="var">$stmt</span>-&gt;<span class="fn">fetch</span>();

<span class="c">// SELECT avec param√®tres nomm√©s</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT * FROM users WHERE email = :email"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="str">':email'</span> =&gt; <span class="var">$email</span>]);

<span class="c">// Fetch all</span>
<span class="var">$users</span> = <span class="var">$stmt</span>-&gt;<span class="fn">fetchAll</span>();

<span class="c">// INSERT</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"INSERT INTO users (name, email) VALUES (?, ?)"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="var">$name</span>, <span class="var">$email</span>]);
<span class="var">$newId</span> = <span class="var">$pdo</span>-&gt;<span class="fn">lastInsertId</span>();

<span class="c">// UPDATE</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"UPDATE users SET name = ? WHERE id = ?"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="var">$name</span>, <span class="var">$id</span>]);

<span class="c">// DELETE</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"DELETE FROM users WHERE id = ?"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="var">$id</span>]);

<span class="c">// Transactions</span>
<span class="var">$pdo</span>-&gt;<span class="fn">beginTransaction</span>();
<span class="kw">try</span> {
    <span class="c">// ... multiple queries</span>
    <span class="var">$pdo</span>-&gt;<span class="fn">commit</span>();
} <span class="kw">catch</span> (<span class="fn">Exception</span> <span class="var">$e</span>) {
    <span class="var">$pdo</span>-&gt;<span class="fn">rollBack</span>();
}</pre>
            </div>

            <div class="warning"><strong>‚ö†Ô∏è S√©curit√©</strong> Utilisez TOUJOURS les requ√™tes pr√©par√©es pour √©viter les
                injections SQL!</div>
        </div>
    </section>

    <!-- S9: SESSIONS -->
    <section id="s9">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">09</div>
                <div>
                    <h2 class="sec-title">Sessions & Cookies</h2>
                    <p class="sec-sub">√âtat c√¥t√© serveur</p>
                </div>
            </div>

            <details>
                <summary>üìñ HTTP est sans √©tat</summary>
                <div>
                    <p>Le protocole web (HTTP) ne se "souvient" pas de vous entre deux pages.</p>
                    <p>Les <strong>Sessions</strong> permettent de stocker des donn√©es sur le serveur (via un ID de
                        session), tandis que les <strong>Cookies</strong> stockent des donn√©es sur le navigateur du
                        client.</p>
                </div>
            </details>

            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Sessions</div>
                    <pre><span class="c">// D√©marrer la session (en premier!)</span>
<span class="fn">session_start</span>();

<span class="c">// D√©finir une variable</span>
<span class="var">$_SESSION</span>[<span class="str">'user_id'</span>] = <span class="num">123</span>;
<span class="var">$_SESSION</span>[<span class="str">'username'</span>] = <span class="str">"alice"</span>;

<span class="c">// Lire</span>
<span class="var">$userId</span> = <span class="var">$_SESSION</span>[<span class="str">'user_id'</span>] ?? <span class="kw">null</span>;

<span class="c">// V√©rifier si existe</span>
<span class="kw">if</span> (<span class="fn">isset</span>(<span class="var">$_SESSION</span>[<span class="str">'user_id'</span>])) { }

<span class="c">// Supprimer une variable</span>
<span class="kw">unset</span>(<span class="var">$_SESSION</span>[<span class="str">'user_id'</span>]);

<span class="c">// D√©truire la session</span>
<span class="fn">session_destroy</span>();

<span class="c">// R√©g√©n√©rer l'ID (s√©curit√©)</span>
<span class="fn">session_regenerate_id</span>(<span class="kw">true</span>);</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Cookies</div>
                    <pre><span class="c">// Cr√©er un cookie (30 jours)</span>
<span class="fn">setcookie</span>(<span class="str">"user"</span>, <span class="str">"alice"</span>, 
    <span class="fn">time</span>() + <span class="num">86400</span> * <span class="num">30</span>, <span class="str">"/"</span>);

<span class="c">// Cookie s√©curis√©</span>
<span class="fn">setcookie</span>(<span class="str">"token"</span>, <span class="var">$token</span>, [
    <span class="str">'expires'</span> =&gt; <span class="fn">time</span>() + <span class="num">3600</span>,
    <span class="str">'path'</span> =&gt; <span class="str">'/'</span>,
    <span class="str">'secure'</span> =&gt; <span class="kw">true</span>,
    <span class="str">'httponly'</span> =&gt; <span class="kw">true</span>,
    <span class="str">'samesite'</span> =&gt; <span class="str">'Strict'</span>
]);

<span class="c">// Lire un cookie</span>
<span class="var">$user</span> = <span class="var">$_COOKIE</span>[<span class="str">'user'</span>] ?? <span class="kw">null</span>;

<span class="c">// Supprimer un cookie</span>
<span class="fn">setcookie</span>(<span class="str">"user"</span>, <span class="str">""</span>, 
    <span class="fn">time</span>() - <span class="num">3600</span>, <span class="str">"/"</span>);</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S10: FICHIERS -->
    <section id="s10">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">10</div>
                <div>
                    <h2 class="sec-title">Fichiers</h2>
                    <p class="sec-sub">Lecture, √©criture, upload</p>
                </div>
            </div>

            <details>
                <summary>üìñ Manipulation de Fichiers</summary>
                <div>
                    <p>PHP est n√© pour manipuler des fichiers textes et HTML.</p>
                    <p>Les fonctions comme <code>file_get_contents</code> sont ultra-rapides pour lire tout un fichier
                        d'un coup. Pour les gros fichiers, pr√©f√©rez les pointeurs (fopen/fread).</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Fichiers</div>
                <pre><span class="c">// Lecture</span>
<span class="var">$content</span> = <span class="fn">file_get_contents</span>(<span class="str">"file.txt"</span>);
<span class="var">$lines</span> = <span class="fn">file</span>(<span class="str">"file.txt"</span>, <span class="var">FILE_IGNORE_NEW_LINES</span>);

<span class="c">// √âcriture</span>
<span class="fn">file_put_contents</span>(<span class="str">"file.txt"</span>, <span class="var">$content</span>);
<span class="fn">file_put_contents</span>(<span class="str">"log.txt"</span>, <span class="var">$msg</span>, <span class="var">FILE_APPEND</span>);

<span class="c">// V√©rifications</span>
<span class="fn">file_exists</span>(<span class="str">"file.txt"</span>);     <span class="c">// Existe?</span>
<span class="fn">is_file</span>(<span class="str">"file.txt"</span>);         <span class="c">// Est un fichier?</span>
<span class="fn">is_dir</span>(<span class="str">"folder"</span>);           <span class="c">// Est un dossier?</span>
<span class="fn">is_readable</span>(<span class="str">"file.txt"</span>);     <span class="c">// Lisible?</span>
<span class="fn">is_writable</span>(<span class="str">"file.txt"</span>);     <span class="c">// √âcrivable?</span>
<span class="fn">filesize</span>(<span class="str">"file.txt"</span>);        <span class="c">// Taille en octets</span>

<span class="c">// Dossiers</span>
<span class="fn">mkdir</span>(<span class="str">"folder"</span>, <span class="num">0755</span>, <span class="kw">true</span>);
<span class="fn">rmdir</span>(<span class="str">"folder"</span>);
<span class="fn">scandir</span>(<span class="str">"."</span>);               <span class="c">// Liste fichiers</span>
<span class="fn">glob</span>(<span class="str">"*.php"</span>);              <span class="c">// Pattern matching</span>

<span class="c">// Upload</span>
<span class="kw">if</span> (<span class="var">$_FILES</span>[<span class="str">'upload'</span>][<span class="str">'error'</span>] === <span class="var">UPLOAD_ERR_OK</span>) {
    <span class="fn">move_uploaded_file</span>(
        <span class="var">$_FILES</span>[<span class="str">'upload'</span>][<span class="str">'tmp_name'</span>],
        <span class="str">"uploads/"</span> . <span class="fn">basename</span>(<span class="var">$_FILES</span>[<span class="str">'upload'</span>][<span class="str">'name'</span>])
    );
}</pre>
            </div>
        </div>
    </section>

    <!-- S11: FORMULAIRES -->
    <section id="s11">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">11</div>
                <div>
                    <h2 class="sec-title">Formulaires</h2>
                    <p class="sec-sub">$_GET, $_POST, validation</p>
                </div>
            </div>

            <details>
                <summary>‚ö†Ô∏è S√©curit√© Absolue</summary>
                <div>
                    <p>Une r√®gle d'or : <strong>Ne jamais faire confiance √† l'utilisateur</strong>.</p>
                    <p>Toujours valider les types (filter_var) et √©chapper les affichages (htmlspecialchars) pour √©viter
                        les failles XSS, et utiliser PDO pour √©viter les injections SQL.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Formulaires</div>
                <pre><span class="c">// R√©cup√©rer les donn√©es</span>
<span class="var">$name</span> = <span class="var">$_POST</span>[<span class="str">'name'</span>] ?? <span class="str">''</span>;
<span class="var">$id</span> = <span class="var">$_GET</span>[<span class="str">'id'</span>] ?? <span class="kw">null</span>;

<span class="c">// S√©curisation</span>
<span class="var">$name</span> = <span class="fn">htmlspecialchars</span>(<span class="var">$_POST</span>[<span class="str">'name'</span>], <span class="var">ENT_QUOTES</span>, <span class="str">'UTF-8'</span>);
<span class="var">$email</span> = <span class="fn">filter_input</span>(<span class="var">INPUT_POST</span>, <span class="str">'email'</span>, <span class="var">FILTER_SANITIZE_EMAIL</span>);

<span class="c">// Validation</span>
<span class="var">$email</span> = <span class="fn">filter_var</span>(<span class="var">$email</span>, <span class="var">FILTER_VALIDATE_EMAIL</span>);
<span class="var">$int</span> = <span class="fn">filter_var</span>(<span class="var">$val</span>, <span class="var">FILTER_VALIDATE_INT</span>);

<span class="c">// CSRF Protection</span>
<span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>] = <span class="fn">bin2hex</span>(<span class="fn">random_bytes</span>(<span class="num">32</span>));

<span class="c">// V√©rifier le token</span>
<span class="kw">if</span> (<span class="fn">hash_equals</span>(<span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>], <span class="var">$_POST</span>[<span class="str">'csrf_token'</span>])) {
    <span class="c">// Valide</span>
}</pre>
            </div>

            <div class="tip"><strong>üí° S√©curit√©</strong> Toujours valider ET √©chapper les donn√©es utilisateur!</div>
        </div>
    </section>

    <!-- S12: REFERENCE -->
    <section id="s12">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">12</div>
                <div>
                    <h2 class="sec-title">R√©f√©rence compl√®te</h2>
                    <p class="sec-sub">200+ fonctions essentielles</p>
                </div>
            </div>

            <details>
                <summary>üìñ La Biblioth√®que Standard</summary>
                <div>
                    <p>La force de PHP est sa biblioth√®que standard immense (> 1000 fonctions).</p>
                    <p>Pas besoin d'installer des paquets pour manipuler des dates, du JSON, des fichiers, des URL ou
                        des hashs : tout est inclus de base.</p>
                </div>
            </details>

            <h3>Fonctions Array</h3>
            <table>
                <tr>
                    <th>Fonction</th>
                    <th>Param√®tres</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>count()</code></td>
                    <td>$arr</td>
                    <td>Nombre d'√©l√©ments</td>
                </tr>
                <tr>
                    <td><code>array_push()</code></td>
                    <td>$arr, $val...</td>
                    <td>Ajouter √† la fin</td>
                </tr>
                <tr>
                    <td><code>array_pop()</code></td>
                    <td>$arr</td>
                    <td>Retirer le dernier</td>
                </tr>
                <tr>
                    <td><code>array_shift()</code></td>
                    <td>$arr</td>
                    <td>Retirer le premier</td>
                </tr>
                <tr>
                    <td><code>array_unshift()</code></td>
                    <td>$arr, $val...</td>
                    <td>Ajouter au d√©but</td>
                </tr>
                <tr>
                    <td><code>array_merge()</code></td>
                    <td>$arr1, $arr2...</td>
                    <td>Fusionner</td>
                </tr>
                <tr>
                    <td><code>array_map()</code></td>
                    <td>$callback, $arr</td>
                    <td>Transformer</td>
                </tr>
                <tr>
                    <td><code>array_filter()</code></td>
                    <td>$arr, $callback</td>
                    <td>Filtrer</td>
                </tr>
                <tr>
                    <td><code>array_reduce()</code></td>
                    <td>$arr, $callback, $init</td>
                    <td>R√©duire</td>
                </tr>
                <tr>
                    <td><code>array_keys()</code></td>
                    <td>$arr</td>
                    <td>Retourne les cl√©s</td>
                </tr>
                <tr>
                    <td><code>array_values()</code></td>
                    <td>$arr</td>
                    <td>Retourne les valeurs</td>
                </tr>
                <tr>
                    <td><code>in_array()</code></td>
                    <td>$val, $arr, $strict</td>
                    <td>Valeur existe?</td>
                </tr>
                <tr>
                    <td><code>array_search()</code></td>
                    <td>$val, $arr</td>
                    <td>Cherche index</td>
                </tr>
                <tr>
                    <td><code>sort() / rsort()</code></td>
                    <td>$arr</td>
                    <td>Tri croissant/d√©croissant</td>
                </tr>
                <tr>
                    <td><code>usort()</code></td>
                    <td>$arr, $callback</td>
                    <td>Tri personnalis√©</td>
                </tr>
                <tr>
                    <td><code>array_slice()</code></td>
                    <td>$arr, $start, $len</td>
                    <td>Extraire portion</td>
                </tr>
                <tr>
                    <td><code>array_unique()</code></td>
                    <td>$arr</td>
                    <td>Valeurs uniques</td>
                </tr>
                <tr>
                    <td><code>array_flip()</code></td>
                    <td>$arr</td>
                    <td>Inverse cl√©s/valeurs</td>
                </tr>
                <tr>
                    <td><code>array_reverse()</code></td>
                    <td>$arr</td>
                    <td>Inverse l'ordre</td>
                </tr>
            </table>

            <h3>Fonctions String</h3>
            <div class="ref-grid">
                <div class="ref-card">
                    <h4>Longueur & Acc√®s</h4><code>strlen()</code> <code>mb_strlen()</code> <code>substr()</code>
                    <code>mb_substr()</code>
                </div>
                <div class="ref-card">
                    <h4>Recherche</h4><code>strpos()</code> <code>strrpos()</code> <code>strstr()</code>
                    <code>str_contains()</code> <code>str_starts_with()</code> <code>str_ends_with()</code>
                </div>
                <div class="ref-card">
                    <h4>Remplacement</h4><code>str_replace()</code> <code>str_ireplace()</code>
                    <code>preg_replace()</code> <code>substr_replace()</code>
                </div>
                <div class="ref-card">
                    <h4>Formatage</h4><code>sprintf()</code> <code>printf()</code> <code>number_format()</code>
                    <code>money_format()</code>
                </div>
                <div class="ref-card">
                    <h4>Casse</h4><code>strtoupper()</code> <code>strtolower()</code> <code>ucfirst()</code>
                    <code>ucwords()</code> <code>lcfirst()</code>
                </div>
                <div class="ref-card">
                    <h4>Nettoyage</h4><code>trim()</code> <code>ltrim()</code> <code>rtrim()</code>
                    <code>strip_tags()</code> <code>htmlspecialchars()</code>
                </div>
            </div>

            <h3>Superglobales</h3>
            <div class="ref-grid">
                <div class="ref-card">
                    <h4>Serveur</h4><code>$_SERVER</code> <code>$_ENV</code> <code>$GLOBALS</code>
                </div>
                <div class="ref-card">
                    <h4>Requ√™te</h4><code>$_GET</code> <code>$_POST</code> <code>$_REQUEST</code> <code>$_FILES</code>
                </div>
                <div class="ref-card">
                    <h4>Session</h4><code>$_SESSION</code> <code>$_COOKIE</code>
                </div>
            </div>

            <h3>$_SERVER</h3>
            <table>
                <tr>
                    <th>Cl√©</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>$_SERVER['REQUEST_METHOD']</code></td>
                    <td>GET, POST, PUT, DELETE...</td>
                </tr>
                <tr>
                    <td><code>$_SERVER['REQUEST_URI']</code></td>
                    <td>URI demand√©e</td>
                </tr>
                <tr>
                    <td><code>$_SERVER['HTTP_HOST']</code></td>
                    <td>Nom de domaine</td>
                </tr>
                <tr>
                    <td><code>$_SERVER['DOCUMENT_ROOT']</code></td>
                    <td>Racine du serveur</td>
                </tr>
                <tr>
                    <td><code>$_SERVER['REMOTE_ADDR']</code></td>
                    <td>IP du client</td>
                </tr>
                <tr>
                    <td><code>$_SERVER['HTTP_USER_AGENT']</code></td>
                    <td>User-Agent</td>
                </tr>
            </table>

            <h3>JSON</h3>
            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>JSON</div>
                <pre><span class="c">// Encoder (PHP ‚Üí JSON)</span>
<span class="var">$json</span> = <span class="fn">json_encode</span>(<span class="var">$data</span>, <span class="var">JSON_PRETTY_PRINT</span>);

<span class="c">// D√©coder (JSON ‚Üí PHP)</span>
<span class="var">$data</span> = <span class="fn">json_decode</span>(<span class="var">$json</span>, <span class="kw">true</span>);  <span class="c">// true = array</span>

<span class="c">// API Response</span>
<span class="fn">header</span>(<span class="str">'Content-Type: application/json'</span>);
<span class="kw">echo</span> <span class="fn">json_encode</span>([<span class="str">'success'</span> =&gt; <span class="kw">true</span>, <span class="str">'data'</span> =&gt; <span class="var">$result</span>]);</pre>
            </div>

            <h3>Date & Time</h3>
            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Date</div>
                <pre><span class="c">// Date courante</span>
<span class="kw">echo</span> <span class="fn">date</span>(<span class="str">'Y-m-d H:i:s'</span>);       <span class="c">// 2025-12-13 02:00:00</span>
<span class="kw">echo</span> <span class="fn">time</span>();                    <span class="c">// Timestamp Unix</span>

<span class="c">// DateTime (POO)</span>
<span class="var">$date</span> = <span class="kw">new</span> <span class="fn">DateTime</span>();
<span class="var">$date</span> = <span class="kw">new</span> <span class="fn">DateTime</span>(<span class="str">'2025-01-15'</span>);
<span class="var">$date</span>-&gt;<span class="fn">format</span>(<span class="str">'d/m/Y'</span>);         <span class="c">// 15/01/2025</span>
<span class="var">$date</span>-&gt;<span class="fn">modify</span>(<span class="str">'+1 month'</span>);

<span class="c">// Diff√©rence</span>
<span class="var">$diff</span> = <span class="var">$date1</span>-&gt;<span class="fn">diff</span>(<span class="var">$date2</span>);
<span class="kw">echo</span> <span class="var">$diff</span>-&gt;<span class="prop">days</span>;              <span class="c">// Jours de diff√©rence</span>

<span class="c">// Formats courants</span>
<span class="str">'Y-m-d'</span>     <span class="c">// 2025-12-13</span>
<span class="str">'d/m/Y'</span>     <span class="c">// 13/12/2025</span>
<span class="str">'H:i:s'</span>     <span class="c">// 02:00:00</span>
<span class="str">'D, d M Y'</span>  <span class="c">// Fri, 13 Dec 2025</span></pre>
            </div>

            <h3>Password Hashing</h3>
            <div class="code">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>S√©curit√©</div>
                <pre><span class="c">// Hasher un mot de passe</span>
<span class="var">$hash</span> = <span class="fn">password_hash</span>(<span class="var">$password</span>, <span class="var">PASSWORD_DEFAULT</span>);

<span class="c">// V√©rifier</span>
<span class="kw">if</span> (<span class="fn">password_verify</span>(<span class="var">$password</span>, <span class="var">$hash</span>)) {
    <span class="c">// Mot de passe correct</span>
}

<span class="c">// G√©n√©rer token al√©atoire</span>
<span class="var">$token</span> = <span class="fn">bin2hex</span>(<span class="fn">random_bytes</span>(<span class="num">32</span>));</pre>
            </div>

            <div class="tip" style="margin-top:24px"><strong>üí° 200+ fonctions r√©f√©renc√©es</strong> ‚Äî Ce m√©mo couvre
                toutes les fonctionnalit√©s essentielles de PHP moderne!</div>
        </div>
    </section>

    <!-- S13: PHP 8 MODERN FEATURES -->
    <section id="s13">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">13</div>
                <div>
                    <h2 class="sec-title">PHP 8.x Moderne</h2>
                    <p class="sec-sub">Nouveaut√©s PHP 8.0, 8.1, 8.2, 8.3</p>
                </div>
            </div>

            <details>
                <summary>üìñ La R√©volution PHP 8</summary>
                <div>
                    <p>PHP 8 a √©t√© une r√©volution majeure avec le JIT Compiler, les Named Arguments, et Union Types.</p>
                    <p>Chaque version mineure (8.1, 8.2, 8.3) apporte de nouvelles fonctionnalit√©s essentielles.</p>
                </div>
            </details>

            <div class="grid2">
                <!-- NAMED ARGUMENTS -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Named Arguments (8.0)</div>
                    <pre><span class="c">// Appel classique (ordre impos√©)</span>
<span class="fn">str_replace</span>(<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="var">$str</span>);

<span class="c">// Named arguments (ordre libre)</span>
<span class="fn">str_replace</span>(
    subject: <span class="var">$str</span>,
    search: <span class="str">'a'</span>,
    replace: <span class="str">'b'</span>
);

<span class="c">// Tr√®s utile pour les params optionnels</span>
<span class="fn">htmlspecialchars</span>(<span class="var">$str</span>, double_encode: <span class="kw">false</span>);</pre>
                </div>

                <!-- UNION TYPES -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Union Types (8.0)</div>
                    <pre><span class="c">// Plusieurs types possibles</span>
<span class="kw">function</span> <span class="fn">format</span>(<span class="kw">int</span>|<span class="kw">float</span>|<span class="kw">string</span> <span class="var">$value</span>): <span class="kw">string</span> {
    <span class="kw">return</span> (<span class="kw">string</span>) <span class="var">$value</span>;
}

<span class="c">// Nullable raccourci</span>
<span class="kw">function</span> <span class="fn">find</span>(<span class="kw">int</span> <span class="var">$id</span>): <span class="fn">User</span>|<span class="kw">null</span> {
    <span class="kw">return</span> <span class="var">$users</span>[<span class="var">$id</span>] ?? <span class="kw">null</span>;
}

<span class="c">// mixed = accepte tout (PHP 8.0)</span>
<span class="kw">function</span> <span class="fn">debug</span>(<span class="kw">mixed</span> <span class="var">$data</span>): <span class="kw">void</span> { }</pre>
                </div>
            </div>

            <div class="grid2" style="margin-top:20px;">
                <!-- NULLSAFE -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Nullsafe Operator (8.0)</div>
                    <pre><span class="c">// Avant PHP 8</span>
<span class="var">$country</span> = <span class="kw">null</span>;
<span class="kw">if</span> (<span class="var">$user</span> !== <span class="kw">null</span>) {
    <span class="kw">if</span> (<span class="var">$user</span>-><span class="fn">getAddress</span>() !== <span class="kw">null</span>) {
        <span class="var">$country</span> = <span class="var">$user</span>-><span class="fn">getAddress</span>()-><span class="prop">country</span>;
    }
}

<span class="c">// Avec Nullsafe ?-></span>
<span class="var">$country</span> = <span class="var">$user</span>?-><span class="fn">getAddress</span>()?-><span class="prop">country</span>;

<span class="c">// Retourne null si un maillon est null</span></pre>
                </div>

                <!-- MATCH -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Match Expression (8.0)</div>
                    <pre><span class="c">// Match = switch mais expression</span>
<span class="var">$msg</span> = <span class="kw">match</span>(<span class="var">$code</span>) {
    <span class="num">200</span> => <span class="str">"OK"</span>,
    <span class="num">404</span> => <span class="str">"Not Found"</span>,
    <span class="num">500</span>, <span class="num">502</span>, <span class="num">503</span> => <span class="str">"Server Error"</span>,
    <span class="kw">default</span> => <span class="str">"Unknown"</span>
};

<span class="c">// Comparaison stricte (===)</span>
<span class="c">// L√®ve exception si aucun match</span>
<span class="c">// Pas de fall-through (pas de break)</span></pre>
                </div>
            </div>

            <!-- ATTRIBUTES -->
            <div class="code" style="margin-top:20px;">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Attributes (8.0)</div>
                <pre><span class="c">// M√©tadonn√©es sur classes/m√©thodes (remplace les DocBlocks)</span>
#[<span class="fn">Attribute</span>]
<span class="kw">class</span> <span class="fn">Route</span> {
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public string</span> <span class="var">$path</span>,
        <span class="kw">public string</span> <span class="var">$method</span> = <span class="str">'GET'</span>
    ) {}
}

<span class="c">// Utilisation</span>
<span class="kw">class</span> <span class="fn">UserController</span> {
    #[<span class="fn">Route</span>(<span class="str">'/users'</span>, <span class="str">'GET'</span>)]
    <span class="kw">public function</span> <span class="fn">index</span>(): <span class="kw">array</span> { }

    #[<span class="fn">Route</span>(<span class="str">'/users/{id}'</span>, <span class="str">'DELETE'</span>)]
    <span class="kw">public function</span> <span class="fn">delete</span>(<span class="kw">int</span> <span class="var">$id</span>): <span class="kw">void</span> { }
}

<span class="c">// Lecture via Reflection</span>
<span class="var">$ref</span> = <span class="kw">new</span> <span class="fn">ReflectionMethod</span>(<span class="fn">UserController</span>::<span class="kw">class</span>, <span class="str">'index'</span>);
<span class="var">$attrs</span> = <span class="var">$ref</span>-><span class="fn">getAttributes</span>(<span class="fn">Route</span>::<span class="kw">class</span>);</pre>
            </div>

            <div class="tip" style="margin-top:20px;"><strong>üí° PHP 8.3+</strong> <code>json_validate()</code> valide
                du JSON sans le d√©coder. <code>#[\Override]</code> force la v√©rification d'override. Typed class
                constants.</div>
        </div>
    </section>

    <!-- S14: API REST -->
    <section id="s14">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">14</div>
                <div>
                    <h2 class="sec-title">API REST</h2>
                    <p class="sec-sub">JSON, Headers, cURL, Routing</p>
                </div>
            </div>

            <details>
                <summary>üìñ API REST en PHP Vanilla</summary>
                <div>
                    <p>Cr√©er une API REST en PHP pur est simple : gestion des m√©thodes HTTP, JSON, et bonnes pratiques
                        de routing.</p>
                    <p>Pour les projets complexes, utilisez un micro-framework comme Slim ou Lumen.</p>
                </div>
            </details>

            <div class="grid2">
                <!-- JSON API -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>R√©ponse JSON</div>
                    <pre><span class="c">// Headers obligatoires</span>
<span class="fn">header</span>(<span class="str">'Content-Type: application/json; charset=utf-8'</span>);
<span class="fn">header</span>(<span class="str">'Access-Control-Allow-Origin: *'</span>); <span class="c">// CORS</span>

<span class="c">// R√©ponse structur√©e</span>
<span class="kw">function</span> <span class="fn">jsonResponse</span>(<span class="kw">mixed</span> <span class="var">$data</span>, <span class="kw">int</span> <span class="var">$code</span> = <span class="num">200</span>): <span class="kw">void</span> {
    <span class="fn">http_response_code</span>(<span class="var">$code</span>);
    <span class="kw">echo</span> <span class="fn">json_encode</span>([
        <span class="str">'success'</span> => <span class="var">$code</span> < <span class="num">400</span>,
        <span class="str">'data'</span> => <span class="var">$data</span>
    ], <span class="var">JSON_UNESCAPED_UNICODE</span>);
    <span class="kw">exit</span>;
}

<span class="c">// Utilisation</span>
<span class="fn">jsonResponse</span>([<span class="str">'users'</span> => <span class="var">$users</span>]);
<span class="fn">jsonResponse</span>([<span class="str">'error'</span> => <span class="str">'Not found'</span>], <span class="num">404</span>);</pre>
                </div>

                <!-- ROUTING -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Routing Simple</div>
                    <pre><span class="var">$method</span> = <span class="var">$_SERVER</span>[<span class="str">'REQUEST_METHOD'</span>];
<span class="var">$uri</span> = <span class="fn">parse_url</span>(<span class="var">$_SERVER</span>[<span class="str">'REQUEST_URI'</span>], <span class="var">PHP_URL_PATH</span>);

<span class="c">// Routes</span>
<span class="kw">match</span>(<span class="kw">true</span>) {
    <span class="var">$method</span> === <span class="str">'GET'</span> && <span class="var">$uri</span> === <span class="str">'/api/users'</span>
        => <span class="fn">getUsers</span>(),
    <span class="var">$method</span> === <span class="str">'GET'</span> && <span class="fn">preg_match</span>(<span class="str">'#/api/users/(\d+)#'</span>, <span class="var">$uri</span>, <span class="var">$m</span>)
        => <span class="fn">getUser</span>(<span class="var">$m</span>[<span class="num">1</span>]),
    <span class="var">$method</span> === <span class="str">'POST'</span> && <span class="var">$uri</span> === <span class="str">'/api/users'</span>
        => <span class="fn">createUser</span>(),
    <span class="var">$method</span> === <span class="str">'DELETE'</span> && <span class="fn">preg_match</span>(<span class="str">'#/api/users/(\d+)#'</span>, <span class="var">$uri</span>, <span class="var">$m</span>)
        => <span class="fn">deleteUser</span>(<span class="var">$m</span>[<span class="num">1</span>]),
    <span class="kw">default</span> => <span class="fn">jsonResponse</span>(<span class="str">'Not Found'</span>, <span class="num">404</span>)
};</pre>
                </div>
            </div>

            <!-- CORS & INPUT -->
            <div class="grid2" style="margin-top:20px;">
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Lire le Body JSON</div>
                    <pre><span class="c">// POST/PUT body (pas $_POST!)</span>
<span class="var">$json</span> = <span class="fn">file_get_contents</span>(<span class="str">'php://input'</span>);
<span class="var">$data</span> = <span class="fn">json_decode</span>(<span class="var">$json</span>, <span class="kw">true</span>);

<span class="c">// Validation</span>
<span class="kw">if</span> (<span class="fn">json_last_error</span>() !== <span class="var">JSON_ERROR_NONE</span>) {
    <span class="fn">jsonResponse</span>(<span class="str">'Invalid JSON'</span>, <span class="num">400</span>);
}

<span class="c">// PHP 8.3: json_validate()</span>
<span class="kw">if</span> (!<span class="fn">json_validate</span>(<span class="var">$json</span>)) {
    <span class="fn">jsonResponse</span>(<span class="str">'Invalid JSON'</span>, <span class="num">400</span>);
}</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>cURL - Consommer une API</div>
                    <pre><span class="c">// GET Request</span>
<span class="var">$ch</span> = <span class="fn">curl_init</span>(<span class="str">'https://api.example.com/users'</span>);
<span class="fn">curl_setopt_array</span>(<span class="var">$ch</span>, [
    <span class="var">CURLOPT_RETURNTRANSFER</span> => <span class="kw">true</span>,
    <span class="var">CURLOPT_HTTPHEADER</span> => [
        <span class="str">'Authorization: Bearer '</span> . <span class="var">$token</span>,
        <span class="str">'Accept: application/json'</span>
    ]
]);
<span class="var">$response</span> = <span class="fn">curl_exec</span>(<span class="var">$ch</span>);
<span class="var">$httpCode</span> = <span class="fn">curl_getinfo</span>(<span class="var">$ch</span>, <span class="var">CURLINFO_HTTP_CODE</span>);
<span class="fn">curl_close</span>(<span class="var">$ch</span>);

<span class="var">$data</span> = <span class="fn">json_decode</span>(<span class="var">$response</span>, <span class="kw">true</span>);</pre>
                </div>
            </div>

            <div class="warning" style="margin-top:20px;"><strong>‚ö†Ô∏è HTTP Codes</strong> 200 OK, 201 Created, 204 No
                Content, 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found, 500 Server Error</div>
        </div>
    </section>

    <!-- S15: S√âCURIT√â -->
    <section id="s15">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">15</div>
                <div>
                    <h2 class="sec-title">S√©curit√© Avanc√©e</h2>
                    <p class="sec-sub">Passwords, CSRF, Headers, Bonnes Pratiques</p>
                </div>
            </div>

            <details>
                <summary>üìñ La S√©curit√© est Primordiale</summary>
                <div>
                    <p>Une faille de s√©curit√© peut d√©truire votre application et votre r√©putation.</p>
                    <p>PHP fournit des fonctions natives robustes pour g√©rer les mots de passe, tokens, et headers de
                        s√©curit√©.</p>
                </div>
            </details>

            <div class="grid2">
                <!-- PASSWORD -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Mots de Passe</div>
                    <pre><span class="c">// JAMAIS stocker en clair ni MD5/SHA1!</span>

<span class="c">// Hasher (registration)</span>
<span class="var">$hash</span> = <span class="fn">password_hash</span>(
    <span class="var">$password</span>,
    <span class="var">PASSWORD_ARGON2ID</span>  <span class="c">// ou PASSWORD_DEFAULT</span>
);

<span class="c">// V√©rifier (login)</span>
<span class="kw">if</span> (<span class="fn">password_verify</span>(<span class="var">$password</span>, <span class="var">$hash</span>)) {
    <span class="c">// Connect√© !</span>
    
    <span class="c">// Rehash si n√©cessaire (upgrade algo)</span>
    <span class="kw">if</span> (<span class="fn">password_needs_rehash</span>(<span class="var">$hash</span>, <span class="var">PASSWORD_ARGON2ID</span>)) {
        <span class="var">$newHash</span> = <span class="fn">password_hash</span>(<span class="var">$password</span>, <span class="var">PASSWORD_ARGON2ID</span>);
        <span class="c">// Sauvegarder en DB</span>
    }
}</pre>
                </div>

                <!-- CSRF -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Protection CSRF</div>
                    <pre><span class="c">// G√©n√©rer le token (session)</span>
<span class="kw">if</span> (<span class="fn">empty</span>(<span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>])) {
    <span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>] = <span class="fn">bin2hex</span>(<span class="fn">random_bytes</span>(<span class="num">32</span>));
}

<span class="c">// Dans le formulaire HTML</span>
&lt;input type="hidden" name="csrf_token"
       value="&lt;?= $_SESSION['csrf_token'] ?&gt;"&gt;

<span class="c">// V√©rification (traitement)</span>
<span class="kw">if</span> (!<span class="fn">hash_equals</span>(
    <span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>],
    <span class="var">$_POST</span>[<span class="str">'csrf_token'</span>] ?? <span class="str">''</span>
)) {
    <span class="fn">die</span>(<span class="str">'CSRF token invalide!'</span>);
}</pre>
                </div>
            </div>

            <!-- SECURITY HEADERS -->
            <div class="code" style="margin-top:20px;">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Headers de S√©curit√©</div>
                <pre><span class="c">// √Ä placer en d√©but de script ou dans .htaccess</span>
<span class="fn">header</span>(<span class="str">'X-Content-Type-Options: nosniff'</span>);           <span class="c">// Pas de sniffing MIME</span>
<span class="fn">header</span>(<span class="str">'X-Frame-Options: DENY'</span>);                      <span class="c">// Pas d'iframe</span>
<span class="fn">header</span>(<span class="str">'X-XSS-Protection: 1; mode=block'</span>);            <span class="c">// Protection XSS navigateur</span>
<span class="fn">header</span>(<span class="str">'Referrer-Policy: strict-origin-when-cross-origin'</span>);
<span class="fn">header</span>(<span class="str">"Content-Security-Policy: default-src 'self'; script-src 'self'"</span>);

<span class="c">// HTTPS only</span>
<span class="fn">header</span>(<span class="str">'Strict-Transport-Security: max-age=31536000; includeSubDomains'</span>);</pre>
            </div>

            <!-- BEST PRACTICES -->
            <div class="grid2" style="margin-top:20px;">
                <div
                    style="background:var(--card-bg); border-radius:8px; padding:15px; border:1px solid var(--border-color);">
                    <h4 style="color:var(--success); margin-top:0;">‚úÖ √Ä FAIRE</h4>
                    <ul style="font-size:0.85rem; color:var(--text-color); margin:0; padding-left:18px;">
                        <li>Requ√™tes pr√©par√©es PDO</li>
                        <li><code>htmlspecialchars()</code> pour affichage</li>
                        <li><code>password_hash()</code> pour mots de passe</li>
                        <li>Tokens CSRF sur tous les formulaires</li>
                        <li><code>filter_var()</code> pour validation</li>
                        <li>HTTPS obligatoire</li>
                    </ul>
                </div>

                <div
                    style="background:var(--card-bg); border-radius:8px; padding:15px; border:1px solid var(--border-color);">
                    <h4 style="color:var(--error); margin-top:0;">‚ùå √Ä √âVITER</h4>
                    <ul style="font-size:0.85rem; color:var(--text-color); margin:0; padding-left:18px;">
                        <li>Concat√©ner SQL (<code>$_GET</code> directement)</li>
                        <li><code>echo $_POST['name'];</code> (XSS!)</li>
                        <li><code>md5()</code> ou <code>sha1()</code> pour passwords</li>
                        <li>Faire confiance aux donn√©es client</li>
                        <li><code>eval()</code>, <code>exec()</code> avec user input</li>
                        <li>Afficher les erreurs en production</li>
                    </ul>
                </div>
            </div>

            <div class="tip" style="margin-top:20px;"><strong>üí° Production</strong> <code>display_errors = Off</code>,
                <code>log_errors = On</code>, <code>error_log = /path/to/error.log</code>
            </div>
        </div>
    </section>

    <!-- S16: ARCHITECTURE MVC & AUTH -->
    <section id="s16">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">16</div>
                <div>
                    <h2 class="sec-title">Architecture MVC & Auth</h2>
                    <p class="sec-sub">Model, View, Controller, Routing, Authentification</p>
                </div>
            </div>

            <details>
                <summary>üìñ Qu'est-ce que le MVC ?</summary>
                <div>
                    <p>Le pattern <strong>Model-View-Controller</strong> s√©pare les responsabilit√©s pour rendre le code
                        maintenable et scalable.</p>
                    <ul>
                        <li><strong>Model</strong> : Gestion des donn√©es et de la logique m√©tier (BDD).</li>
                        <li><strong>View</strong> : Interface utilisateur (HTML/CSS).</li>
                        <li><strong>Controller</strong> : Le chef d'orchestre qui re√ßoit la requ√™te et lie le Mod√®le √†
                            la Vue.</li>
                    </ul>
                </div>
            </details>

            <!-- STRUCTURE & ROUTING -->
            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Structure de Dossiers</div>
                    <pre><span class="c">// Organisation moderne (PSR-4)</span>
/projet
  /app          <span class="c">// Logique m√©tier</span>
    /Controllers
    /Models
    /Views
  /public       <span class="c">// Seul dossier accessible web</span>
    index.php   <span class="c">// Front Controller</span>
    .htaccess   <span class="c">// Apache rewrite</span>
    /assets     <span class="c">// css, js, images</span>
  /vendor       <span class="c">// D√©pendances Composer</span>
  composer.json</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Routage (.htaccess)</div>
                    <pre><span class="c">// Redirige toutes les requ√™tes vers index.php</span>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

<span class="c">// Dans index.php (Front Controller)</span>
<span class="var">$uri</span> = <span class="var">$_SERVER</span>[<span class="str">'REQUEST_URI'</span>];
<span class="kw">switch</span>(<span class="var">$uri</span>) {
    <span class="kw">case</span> <span class="str">'/'</span>: <span class="var">$ctrl</span>-><span class="fn">home</span>(); <span class="kw">break</span>;
    <span class="kw">case</span> <span class="str">'/login'</span>: <span class="var">$ctrl</span>-><span class="fn">login</span>(); <span class="kw">break</span>;
    <span class="kw">default</span>: <span class="fn">header</span>(<span class="str">"HTTP/1.0 404"</span>);
}</pre>
                </div>
            </div>

            <!-- AUTHENTIFICATION FLOW -->
            <h3 style="margin-top:30px;">Flux d'Authentification</h3>
            <div class="grid2">
                <!-- SIGN UP / IN -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>Inscription & Connexion</div>
                    <pre><span class="c">// 1. Inscription (Sign Up)</span>
<span class="var">$hash</span> = <span class="fn">password_hash</span>(<span class="var">$pass</span>, <span class="var">PASSWORD_DEFAULT</span>);
<span class="var">$db</span>-><span class="fn">exec</span>(<span class="str">"INSERT INTO users..."</span>);

<span class="c">// 2. Connexion (Sign In)</span>
<span class="var">$user</span> = <span class="var">$db</span>-><span class="fn">find</span>(<span class="var">$email</span>);
<span class="kw">if</span> (<span class="var">$user</span> && <span class="fn">password_verify</span>(<span class="var">$pass</span>, <span class="var">$user</span>[<span class="str">'pass'</span>])) {
    <span class="var">$_SESSION</span>[<span class="str">'user_id'</span>] = <span class="var">$user</span>[<span class="str">'id'</span>];
    <span class="var">$_SESSION</span>[<span class="str">'role'</span>] = <span class="var">$user</span>[<span class="str">'role'</span>];
    <span class="fn">header</span>(<span class="str">'Location: /dashboard'</span>);
}</pre>
                </div>

                <!-- SIGN OUT / MIDDLEWARE -->
                <div class="code">
                    <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                            class="dot g"></span>D√©connexion & Contr√¥le</div>
                    <pre><span class="c">// 3. D√©connexion (Sign Out)</span>
<span class="fn">session_destroy</span>();
<span class="fn">header</span>(<span class="str">'Location: /'</span>);

<span class="c">// 4. Middleware Auth (V√©rification)</span>
<span class="kw">function</span> <span class="fn">requireAuth</span>() {
    <span class="kw">if</span> (!<span class="kw">isset</span>(<span class="var">$_SESSION</span>[<span class="str">'user_id'</span>])) {
        <span class="fn">header</span>(<span class="str">'Location: /login'</span>);
        <span class="kw">exit</span>;
    }
}

<span class="c">// Utilisation en d√©but de controller</span>
<span class="fn">requireAuth</span>();</pre>
                </div>
            </div>

            <!-- MVC EXAMPLE -->
            <div class="code" style="margin-top:20px;">
                <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                        class="dot g"></span>Exemple Controller MVC</div>
                <pre><span class="kw">class</span> <span class="fn">UserController</span> <span class="kw">extends</span> <span class="fn">BaseController</span> {
    <span class="kw">public function</span> <span class="fn">showProfile</span>(<span class="kw">int</span> <span class="var">$id</span>) {
        <span class="c">// Model</span>
        <span class="var">$user</span> = <span class="var">$this</span>-><span class="fn">userModel</span>-><span class="fn">find</span>(<span class="var">$id</span>);
        
        <span class="c">// View</span>
        <span class="kw">return</span> <span class="var">$this</span>-><span class="fn">render</span>(<span class="str">'profile.php'</span>, [<span class="str">'user'</span> => <span class="var">$user</span>]);
    }
}</pre>
            </div>

            <div class="tip" style="margin-top:20px;"><strong>üí° Conseil</strong> : Ne r√©inventez pas la roue pour les
                gros projets. Utilisez un framework comme <strong>Laravel</strong> ou <strong>Symfony</strong> qui
                impl√©mentent parfaitement ces concepts par d√©faut.</div>
        </div>
    </section>

    <!-- SECTION QUIZ -->
    <section id="quiz-section" class="quiz-container">
        <div class="container">
            <h2>Testez vos connaissances</h2>
            <div id="quiz-app"></div>
        </div>
    </section>

    <script type="module">
        import '../../assets/js/quiz-engine.js';
        document.addEventListener('DOMContentLoaded', () => {
            new window.QuizEngine({ containerId: 'quiz-app', jsonPath: 'quiz_php.json', questionsPerSession: 10 });
        });
    </script>
    <script src="../../assets/js/quiz-engine.js"></script>
    <script>
        window.addEventListener('load', () => {
            if (window.QuizEngine && !document.querySelector('.quiz-intro')) {
                new window.QuizEngine({ containerId: 'quiz-app', jsonPath: 'quiz_php.json', questionsPerSession: 10 });
            }
        });
    </script>

    <footer>
        <div class="container">
            <p style="margin-bottom:8px"><strong>M√©mo PHP</strong> ‚Ä¢ 200+ fonctions ‚Ä¢ PHP 8+ ‚Ä¢ 2025</p>
            <p style="font-size:.8rem">Cr√©√© par <strong>Geoffroy Streit</strong>, assist√© par IA ‚Äî Pour consolider sa
                m√©moire avec un
                cours concis, graphique et structur√©, mais aussi pour le plaisir de partager la connaissance et
                faciliter l'apprentissage des autres.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>