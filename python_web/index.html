<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©mo Python Web - Guide 2025</title>
    <meta name="description"
        content="Guide complet Python pour le Web : Flask, Django, FastAPI, S√©curit√©, Async, Docker.">
    <meta name="keywords"
        content="Python, Web, Flask, Django, FastAPI, Async, Docker, Backend, HTML, API, tutoriel, guide">
    <meta name="author" content="Geoffroy Streit">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#10b981">
    <link rel="canonical" href="index.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="M√©mo Python Web - API & Backend">
    <meta property="og:description"
        content="Guide complet Python pour le Web : Flask, Django, FastAPI, S√©curit√©, Async, Docker.">
    <meta property="og:url" content="https://hylst.fr/cours/docker/python_web/index.html">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="M√©mo Python Web - API & Backend">
    <meta name="twitter:description"
        content="Guide complet Python pour le Web : Flask, Django, FastAPI, S√©curit√©, Async, Docker.">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/quiz-style.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">üåê</div>Python Web
            </div>
            <nav>
                <a href="#s0">Intro</a>
                <a href="#s2">Flask</a>
                <a href="#s5">FastAPI</a>
                <a href="#s7">Secu</a>
                <a href="#s12">Docker</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>M√©mo Python Web</h1>
            <p>Guide moderne du d√©veloppement Back-end : Micro-frameworks, APIs robustes, S√©curit√© et D√©ploiement Cloud.
            </p>
        </div>
    </section>

    <!-- INTRO GENERAL -->
    <div class="intro-box"
        style="background:var(--card-bg); border-bottom:1px solid var(--border-color); padding:30px 0;">
        <div class="container">
            <h3 style="margin-top:0; color:var(--text-color)">Pourquoi Python pour le Web ?</h3>
            <p style="color:#c9d1d9; max-width:800px;">
                Si JavaScript r√®gne sur le Frontend, Python est le roi du Backend moderne, notamment gr√¢ce √† l'essor de
                l'IA.
                Des g√©ants comme <strong>Instagram, Spotify, Netflix et Uber</strong> utilisent Python pour g√©rer des
                millions de requ√™tes.
            </p>
            <p style="color:#8b949e; font-size:0.95rem; margin-top:10px;">
                Avec l'arriv√©e de l'asynchrone (FastAPI) et la maturit√© de Django, Python offre l'√©quilibre parfait
                entre
                rapidit√© de d√©veloppement et performance √† l'√©chelle.
            </p>
        </div>
    </div>

    <div class="toc">
        <div class="container">
            <div class="toc-grid">
                <a href="#s0" class="toc-item"><span class="toc-num">00</span>Panorama Web</a>
                <a href="#s1" class="toc-item"><span class="toc-num">01</span>Environnement</a>
                <a href="#s2" class="toc-item"><span class="toc-num">02</span>Flask (Micro)</a>
                <a href="#s3" class="toc-item"><span class="toc-num">03</span>SQLAlchemy</a>
                <a href="#s4" class="toc-item"><span class="toc-num">04</span>Django (Full)</a>
                <a href="#s5" class="toc-item"><span class="toc-num">05</span>FastAPI (Modern)</a>
                <a href="#s6" class="toc-item"><span class="toc-num">06</span>API REST / JSON</a>
                <a href="#s7" class="toc-item"><span class="toc-num">07</span>S√©curit√© & Auth</a>
                <a href="#s8" class="toc-item"><span class="toc-num">08</span>Async & WS</a>
                <a href="#s9" class="toc-item"><span class="toc-num">09</span>Background Tasks</a>
                <a href="#s10" class="toc-item"><span class="toc-num">10</span>Tests & Qualit√©</a>
                <a href="#s11" class="toc-item"><span class="toc-num">11</span>Serveurs App</a>
                <a href="#s12" class="toc-item"><span class="toc-num">12</span>Docker & Cloud</a>
                <a href="#s13" class="toc-item"><span class="toc-num">13</span>R√©f√©rence</a>
            </div>
        </div>
    </div>

    <!-- S0: PANORAMA -->
    <section id="s0">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">00</div>
                <div>
                    <h2 class="sec-title">Le Python dans le Web</h2>
                    <p class="sec-sub">Mise en situation et architectures</p>
                </div>
            </div>

            <details>
                <summary>üìñ Comprendre le r√¥le de Python sur le Web</summary>
                <div>
                    <p>Python n'est pas ex√©cut√© nativement par les navigateurs (contrairement √† JavaScript). Son r√¥le se
                        situe c√¥t√© <strong>Serveur (Back-end)</strong>.</p>
                    <p>Il re√ßoit les requ√™tes HTTP, traite la logique m√©tier, interagit avec la base de donn√©es, et
                        renvoie une r√©ponse (HTML ou JSON).</p>
                    <p>Pour communiquer avec les serveurs web (comme Nginx ou Apache), Python utilise des standards :
                        <strong>WSGI</strong> (synchrone, classique) ou <strong>ASGI</strong> (asynchrone, moderne).
                    </p>
                </div>
            </details>

            <div class="grid3" style="margin-top:20px;">
                <div class="framework-card">
                    <h4>Flask</h4>
                    <span class="badge flask">Micro-framework</span>
                    <p>Minimaliste, flexible. Vous choisissez vos outils. Id√©al pour d√©buter ou pour des micro-services.
                    </p>
                </div>
                <div class="framework-card">
                    <h4>Django</h4>
                    <span class="badge django">Batteries included</span>
                    <p>Tout inclus (ORM, Admin, Auth). Robuste et s√©curis√©. Id√©al pour des projets complexes rapides.
                    </p>
                </div>
                <div class="framework-card">
                    <h4>FastAPI</h4>
                    <span class="badge fastapi">Haute performance</span>
                    <p>Moderne, asynchrone, typ√©. G√©n√®re automatiquement la doc API. Le nouveau standard.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- S1: ENVIRONNEMENT -->
    <section id="s1">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">01</div>
                <div>
                    <h2 class="sec-title">Environnement Pro</h2>
                    <p class="sec-sub">Virtualenv, Pip, Structure</p>
                </div>
            </div>

            <details>
                <summary>üìñ Comprendre l'isolation des environnements</summary>
                <div>
                    <p>En d√©veloppement web, il est CRITIQUE d'isoler les d√©pendances de chaque projet pour √©viter les
                        conflits de versions.</p>
                    <p>On utilise un <strong>Virtual Environment (venv)</strong>. C'est un dossier local qui contient
                        une copie de l'interpr√©teur Python et des biblioth√®ques install√©es.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Setup Projet</div>
                <pre><span class="c"># 1. Cr√©er le dossier projet</span>
mkdir mon_projet ; cd mon_projet

<span class="c"># 2. Cr√©er l'environnement virtuel</span>
python -m venv venv

<span class="c"># 3. Activer l'environnement</span>
<span class="c"># Windows :</span> venv\Scripts\activate
<span class="c"># Mac/Linux :</span> source venv/bin/activate

<span class="c"># 4. Installer les d√©pendances</span>
pip install flask sqlalchemy python-dotenv

<span class="c"># 5. Figer les versions</span>
pip freeze > requirements.txt</pre>
            </div>
        </div>
    </section>

    <!-- S2: FLASK -->
    <section id="s2">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">02</div>
                <div>
                    <h2 class="sec-title">Flask : L'essentiel</h2>
                    <p class="sec-sub">Micro-framework WSGI</p>
                </div>
            </div>

            <details>
                <summary>üìñ Comprendre Flask avanc√©</summary>
                <div>
                    <p>Le pattern <strong>Application Factory</strong> (<code>create_app</code>) permet de cr√©er
                        l'application dans une fonction, facilitant les tests et la config.</p>
                    <p>Les <strong>Blueprints</strong> d√©coupent l'application en modules (ex: Auth, Admin, API).</p>
                </div>
            </details>

            <h3 style="margin-top:30px">Structure "Pro" & Blueprints</h3>
            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot r"></span>Structure</div>
                    <pre>/mon_projet
‚îÇ
‚îú‚îÄ‚îÄ /app                <span class="c"># Package Python</span>
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py     <span class="c"># create_app()</span>
‚îÇ   ‚îú‚îÄ‚îÄ models.py       <span class="c"># Base de donn√©es</span>
‚îÇ   ‚îú‚îÄ‚îÄ /templates      <span class="c"># HTML</span>
‚îÇ   ‚îú‚îÄ‚îÄ /static         <span class="c"># CSS, JS, Images</span>
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ /auth           <span class="c"># Module Auth</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes.py
‚îÇ   ‚îî‚îÄ‚îÄ /main           <span class="c"># Module Principal</span>
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ routes.py
‚îÇ
‚îú‚îÄ‚îÄ config.py           <span class="c"># Variables Config</span>
‚îú‚îÄ‚îÄ wsgi.py             <span class="c"># Point entr√©e Prod</span>
‚îî‚îÄ‚îÄ requirements.txt</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot g"></span>Factory Pattern</div>
                    <pre><span class="kw">from</span> flask <span class="kw">import</span> Flask
<span class="kw">from</span> .models <span class="kw">import</span> db

<span class="kw">def</span> <span class="fn">create_app</span>(<span class="var">config_name</span>=<span class="str">'default'</span>):
    <span class="var">app</span> = <span class="cls">Flask</span>(<span class="var">__name__</span>)
    <span class="var">app</span>.<span class="prop">config</span>.<span class="fn">from_object</span>(<span class="str">f'config.Config'</span>)

    <span class="var">db</span>.<span class="fn">init_app</span>(<span class="var">app</span>)

    <span class="kw">from</span> .auth <span class="kw">import</span> <span class="var">auth_bp</span>
    <span class="var">app</span>.<span class="fn">register_blueprint</span>(<span class="var">auth_bp</span>)

    <span class="kw">return</span> <span class="var">app</span></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S3: ORM -->
    <section id="s3">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">03</div>
                <div>
                    <h2 class="sec-title">SQLAlchemy</h2>
                    <p class="sec-sub">Interaction Base de Donn√©es (ORM)</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>models.py</div>
                <pre><span class="kw">from</span> flask_sqlalchemy <span class="kw">import</span> SQLAlchemy

<span class="var">db</span> = <span class="cls">SQLAlchemy</span>()

<span class="kw">class</span> <span class="cls">User</span>(<span class="var">db</span>.<span class="cls">Model</span>):
    <span class="var">id</span> = <span class="var">db</span>.<span class="fn">Column</span>(<span class="var">db</span>.<span class="cls">Integer</span>, primary_key=<span class="kw">True</span>)
    <span class="var">username</span> = <span class="var">db</span>.<span class="fn">Column</span>(<span class="var">db</span>.<span class="cls">String</span>(<span class="num">80</span>), unique=<span class="kw">True</span>)
    <span class="var">email</span> = <span class="var">db</span>.<span class="fn">Column</span>(<span class="var">db</span>.<span class="cls">String</span>(<span class="num">120</span>), unique=<span class="kw">True</span>)

    <span class="kw">def</span> <span class="fn">__repr__</span>(<span class="var">self</span>):
        <span class="kw">return</span> <span class="str">f'&lt;User </span>{<span class="var">self</span>.<span class="prop">username</span>}<span class="str">&gt;'</span>

<span class="c"># Utilisation</span>
<span class="var">new_user</span> = <span class="cls">User</span>(username=<span class="str">"admin"</span>, email=<span class="str">"test@test.com"</span>)
<span class="var">db</span>.<span class="prop">session</span>.<span class="fn">add</span>(<span class="var">new_user</span>)
<span class="var">db</span>.<span class="prop">session</span>.<span class="fn">commit</span>()
<span class="var">user</span> = <span class="cls">User</span>.<span class="prop">query</span>.<span class="fn">filter_by</span>(username=<span class="str">"admin"</span>).<span class="fn">first</span>()</pre>
            </div>
        </div>
    </section>

    <!-- S4: DJANGO -->
    <section id="s4">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">04</div>
                <div>
                    <h2 class="sec-title">Django</h2>
                    <p class="sec-sub">Le Framework "Batteries Included"</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Class-Based Views (CBV)</div>
                <pre><span class="kw">from</span> django.views.generic <span class="kw">import</span> ListView
<span class="kw">from</span> .models <span class="kw">import</span> Post

<span class="kw">class</span> <span class="cls">PostListView</span>(<span class="cls">ListView</span>):
    <span class="var">model</span> = <span class="cls">Post</span>
    <span class="var">template_name</span> = <span class="str">'post_list.html'</span>
    <span class="var">context_object_name</span> = <span class="str">'posts'</span>
    <span class="var">paginate_by</span> = <span class="num">10</span>  <span class="c"># Pagination auto !</span></pre>
            </div>
        </div>
    </section>

    <!-- S5: FASTAPI -->
    <section id="s5">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">05</div>
                <div>
                    <h2 class="sec-title">FastAPI</h2>
                    <p class="sec-sub">APIs Modernes & Asynchrones</p>
                </div>
            </div>

            <details>
                <summary>üìñ Comprendre FastAPI avanc√©</summary>
                <div>
                    <p>FastAPI repose sur Pydantic (validation de donn√©es) et Starlette (serveur asynchrone).</p>
                    <p>La <strong>Dependency Injection</strong> ("Depends") est un concept cl√© pour l'auth et la
                        connexion DB.</p>
                </div>
            </details>

            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot g"></span>Route typ√©e & Valid√©e</div>
                    <pre><span class="kw">from</span> fastapi <span class="kw">import</span> FastAPI, Body
<span class="kw">from</span> pydantic <span class="kw">import</span> BaseModel, EmailStr

<span class="var">app</span> = <span class="cls">FastAPI</span>()

<span class="kw">class</span> <span class="cls">UserCreate</span>(<span class="cls">BaseModel</span>):
    <span class="var">username</span>: <span class="cls">str</span>
    <span class="var">email</span>: <span class="cls">EmailStr</span>
    <span class="var">age</span>: <span class="cls">int</span> | <span class="kw">None</span> = <span class="kw">None</span>

<span class="dec">@app.post</span>(<span class="str">"/users/"</span>)
<span class="kw">async def</span> <span class="fn">create_user</span>(<span class="var">user</span>: <span class="cls">UserCreate</span>):
    <span class="c"># Auto-validation JSON -> Objet Python</span>
    <span class="kw">return</span> {<span class="str">"message"</span>: <span class="str">"User created"</span>}</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span>Dependency Injection</div>
                    <pre><span class="kw">from</span> fastapi <span class="kw">import</span> Depends, HTTPException

<span class="kw">async def</span> <span class="fn">verify_token</span>(<span class="var">token</span>: <span class="cls">str</span>):
    <span class="kw">if</span> <span class="var">token</span> != <span class="str">"secret"</span>:
        <span class="kw">raise</span> <span class="cls">HTTPException</span>(status_code=<span class="num">401</span>)
    <span class="kw">return</span> <span class="str">"admin"</span>

<span class="dec">@app.get</span>(<span class="str">"/admin"</span>)
<span class="kw">async def</span> <span class="fn">admin_panel</span>(
    <span class="var">user</span>: <span class="cls">str</span> = <span class="fn">Depends</span>(<span class="fn">verify_token</span>)
):
    <span class="kw">return</span> {<span class="str">"user"</span>: <span class="var">user</span>}</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S6: API REST (Concepts) -->
    <section id="s6">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">06</div>
                <div>
                    <h2 class="sec-title">Concepts API REST</h2>
                    <p class="sec-sub">M√©thodes, Codes, JSON</p>
                </div>
            </div>
            <div class="ref-grid">
                <div class="ref-card">
                    <h4>200 OK</h4>
                    <p>Succ√®s standard.</p>
                </div>
                <div class="ref-card">
                    <h4>201 Created</h4>
                    <p>Ressource cr√©√©e.</p>
                </div>
                <div class="ref-card">
                    <h4>401 Unauth</h4>
                    <p>Token manquant/invalide.</p>
                </div>
                <div class="ref-card">
                    <h4>403 Forbidden</h4>
                    <p>Droits insuffisants.</p>
                </div>
                <div class="ref-card">
                    <h4>404 Not Found</h4>
                    <p>Ressource introuvable.</p>
                </div>
                <div class="ref-card">
                    <h4>500 Error</h4>
                    <p>Crash serveur.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- S7: SECURIT√â (NEW) -->
    <section id="s7">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">07</div>
                <div>
                    <h2 class="sec-title">S√©curit√© & Authentification</h2>
                    <p class="sec-sub">JWT, Hashing, OWASP</p>
                </div>
            </div>

            <details>
                <summary>üìñ Les r√®gles d'or de la s√©curit√© Web</summary>
                <div>
                    <p>1. <strong>Ne jamais stocker de mots de passe en clair</strong>. Utilisez des algorithmes de
                        hachage lents comme <strong>BCrypt</strong> ou <strong>Argon2</strong>.</p>
                    <p>2. <strong>JWT (JSON Web Tokens)</strong> : Le standard pour l'authentification des APIs
                        (Stateless). Le serveur signe un token que le client renvoie √† chaque requ√™te.</p>
                    <p>3. <strong>HTTPS partout</strong>. Sans chiffrement, les tokens transitent en clair.</p>
                </div>
            </details>

            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot g"></span>Hashing (Passlib)</div>
                    <pre><span class="kw">from</span> passlib.context <span class="kw">import</span> CryptContext

<span class="var">pwd_context</span> = <span class="cls">CryptContext</span>(schemes=[<span class="str">"bcrypt"</span>])

<span class="c"># Hacher un mot de passe (Inscription)</span>
<span class="var">hash</span> = <span class="var">pwd_context</span>.<span class="fn">hash</span>(<span class="str">"secret123"</span>)
<span class="c"># -> $2b$12$EixZaYVK1...</span>

<span class="c"># V√©rifier (Login)</span>
<span class="var">is_valid</span> = <span class="var">pwd_context</span>.<span class="fn">verify</span>(<span class="str">"secret123"</span>, <span class="var">hash</span>)</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot g"></span>JWT (Jose / PyJWT)</div>
                    <pre><span class="kw">from</span> jose <span class="kw">import</span> jwt
<span class="kw">from</span> datetime <span class="kw">import</span> datetime, timedelta

<span class="var">SECRET</span> = <span class="str">"my_super_secret_key"</span>
<span class="var">ALGO</span> = <span class="str">"HS256"</span>

<span class="c"># Cr√©er un Token</span>
<span class="kw">def</span> <span class="fn">create_token</span>(<span class="var">user_id</span>: <span class="cls">int</span>):
    <span class="var">expire</span> = <span class="fn">datetime</span>.utcnow() + <span class="fn">timedelta</span>(minutes=<span class="num">30</span>)
    <span class="var">payload</span> = {<span class="str">"sub"</span>: <span class="fn">str</span>(<span class="var">user_id</span>), <span class="str">"exp"</span>: <span class="var">expire</span>}
    <span class="kw">return</span> <span class="var">jwt</span>.<span class="fn">encode</span>(<span class="var">payload</span>, <span class="var">SECRET</span>, algorithm=<span class="var">ALGO</span>)

<span class="c"># D√©coder</span>
<span class="var">payload</span> = <span class="var">jwt</span>.<span class="fn">decode</span>(<span class="var">token</span>, <span class="var">SECRET</span>, algorithms=[<span class="var">ALGO</span>])</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S8: ASYNC & WEBSOCKETS (NEW) -->
    <section id="s8">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">08</div>
                <div>
                    <h2 class="sec-title">Async & Temps R√©el</h2>
                    <p class="sec-sub">WebSockets, AsyncIO</p>
                </div>
            </div>

            <details>
                <summary>üìñ WebSockets vs HTTP</summary>
                <div>
                    <p>HTTP est "Unidirectionnel" (Client demande -> Serveur r√©pond).</p>
                    <p><strong>WebSocket</strong> est "Bidirectionnel" et persistant. Le serveur peut pousser des
                        donn√©es au client (Chat, Notifications, Trading).</p>
                    <p>FastAPI g√®re nativement les WebSockets gr√¢ce √† son moteur asynchrone.</p>
                </div>
            </details>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Chat WebSocket (FastAPI)</div>
                <pre><span class="kw">from</span> fastapi <span class="kw">import</span> WebSocket

<span class="dec">@app.websocket</span>(<span class="str">"/ws"</span>)
<span class="kw">async def</span> <span class="fn">websocket_endpoint</span>(<span class="var">websocket</span>: <span class="cls">WebSocket</span>):
    <span class="kw">await</span> <span class="var">websocket</span>.<span class="fn">accept</span>()
    <span class="kw">while True</span>:
        <span class="c"># Attendre un message du client</span>
        <span class="var">data</span> = <span class="kw">await</span> <span class="var">websocket</span>.<span class="fn">receive_text</span>()
        
        <span class="c"># Renvoyer (Echo ou Broadcast)</span>
        <span class="kw">await</span> <span class="var">websocket</span>.<span class="fn">send_text</span>(<span class="str">f"Re√ßu : </span>{<span class="var">data</span>}<span class="str">"</span>)</pre>
            </div>
        </div>
    </section>

    <!-- S9: BACKGROUND TASKS (NEW) -->
    <section id="s9">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">09</div>
                <div>
                    <h2 class="sec-title">T√¢ches d'Arri√®re-plan</h2>
                    <p class="sec-sub">Celery, Redis, BackgroundTasks</p>
                </div>
            </div>

            <details>
                <summary>üìñ Pourquoi les t√¢ches background ?</summary>
                <div>
                    <p>Une requ√™te web doit r√©pondre en < 200ms. Si vous devez envoyer un email, g√©n√©rer un PDF ou
                            traiter une image, <strong>ne le faites pas dans la requ√™te</strong>.</p>
                    <p>D√©l√©guez le travail √† une "Queue" (Redis) et un "Worker" (Celery/Dramatiq) qui le traitera plus
                        tard.</p>
                </div>
            </details>

            <div class="grid2">
                <div class="code">
                    <div class="code-head"><span class="dot y"></span>FastAPI (Simple)</div>
                    <pre><span class="kw">from</span> fastapi <span class="kw">import</span> BackgroundTasks

<span class="kw">def</span> <span class="fn">send_email</span>(<span class="var">email</span>: <span class="cls">str</span>):
    <span class="c"># Code lent (SMTP...)</span>
    <span class="fn">time.sleep</span>(<span class="num">2</span>)

<span class="dec">@app.post</span>(<span class="str">"/signup"</span>)
<span class="kw">async def</span> <span class="fn">signup</span>(<span class="var">bg_tasks</span>: <span class="cls">BackgroundTasks</span>):
    <span class="c"># La r√©ponse part tout de suite !</span>
    <span class="var">bg_tasks</span>.<span class="fn">add_task</span>(<span class="fn">send_email</span>, <span class="str">"user@mail.com"</span>)
    <span class="kw">return</span> {<span class="str">"status"</span>: <span class="str">"Email en cours d'envoi"</span>}</pre>
                </div>

                <div class="code">
                    <div class="code-head"><span class="dot r"></span>Celery (Robuste)</div>
                    <pre><span class="kw">from</span> celery <span class="kw">import</span> Celery

<span class="var">celery</span> = <span class="cls">Celery</span>(<span class="str">'tasks'</span>, broker=<span class="str">'redis://localhost:6379'</span>)

<span class="dec">@celery.task</span>
<span class="kw">def</span> <span class="fn">process_image</span>(<span class="var">img_id</span>):
    <span class="c"># Traitement tr√®s lourd (IA, resize...)</span>
    <span class="kw">return</span> <span class="str">"Done"</span>

<span class="c"># Appel asynchrone</span>
<span class="fn">process_image</span>.<span class="fn">delay</span>(<span class="num">123</span>)</pre>
                </div>
            </div>
        </div>
    </section>

    <!-- S10: TESTING (NEW) -->
    <section id="s10">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">10</div>
                <div>
                    <h2 class="sec-title">Tests Automatis√©s</h2>
                    <p class="sec-sub">Pytest, Coverage</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head"><span class="dot g"></span>Test API avec Pytest</div>
                <pre><span class="c"># test_main.py</span>
<span class="kw">from</span> fastapi.testclient <span class="kw">import</span> TestClient
<span class="kw">from</span> main <span class="kw">import</span> app

<span class="var">client</span> = <span class="cls">TestClient</span>(<span class="var">app</span>)

<span class="kw">def</span> <span class="fn">test_read_main</span>():
    <span class="var">response</span> = <span class="var">client</span>.<span class="fn">get</span>(<span class="str">"/"</span>)
    <span class="kw">assert</span> <span class="var">response</span>.<span class="prop">status_code</span> == <span class="num">200</span>
    <span class="kw">assert</span> <span class="var">response</span>.<span class="fn">json</span>() == {<span class="str">"msg"</span>: <span class="str">"Hello World"</span>}

<span class="kw">def</span> <span class="fn">test_create_item</span>():
    <span class="var">response</span> = <span class="var">client</span>.<span class="fn">post</span>(
        <span class="str">"/items/"</span>,
        json={<span class="str">"name"</span>: <span class="str">"Test Item"</span>, <span class="str">"price"</span>: <span class="num">10</span>}
    )
    <span class="kw">assert</span> <span class="var">response</span>.<span class="prop">status_code</span> == <span class="num">200</span></pre>
            </div>
        </div>
    </section>

    <!-- S11: SERVEURS APP -->
    <section id="s11">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">11</div>
                <div>
                    <h2 class="sec-title">Production</h2>
                    <p class="sec-sub">Gunicorn, Uvicorn</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Terminal</div>
                <pre><span class="c"># Lancer Flask/Django avec Gunicorn (WSGI)</span>
gunicorn -w 4 src.app:app

<span class="c"># Lancer FastAPI avec Uvicorn (ASGI)</span>
uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4</pre>
            </div>
        </div>
    </section>

    <!-- S12: DOCKER -->
    <section id="s12">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">12</div>
                <div>
                    <h2 class="sec-title">Dockerisation</h2>
                    <p class="sec-sub">Containeriser son app Python</p>
                </div>
            </div>

            <div class="code">
                <div class="code-head"><span class="dot r"></span>Dockerfile</div>
                <pre><span class="kw">FROM</span> python:3.10-slim
<span class="kw">WORKDIR</span> /app

<span class="c"># Optimisation cache: Copier requirements d'abord</span>
<span class="kw">COPY</span> requirements.txt .
<span class="kw">RUN</span> pip install --no-cache-dir -r requirements.txt

<span class="kw">COPY</span> . .
<span class="kw">CMD</span> ["gunicorn", "-w", "4", "-b", "0.0.0.0:8000", "app:app"]</pre>
            </div>
        </div>
    </section>

    <!-- S13: REFERENCE -->
    <section id="s13">
        <div class="container">
            <div class="sec-header">
                <div class="sec-num">13</div>
                <div>
                    <h2 class="sec-title">R√©f√©rence Web</h2>
                    <p class="sec-sub">Outils et Librairies cl√©s</p>
                </div>
            </div>

            <table>
                <tr>
                    <th>Domaine</th>
                    <th>Librairie</th>
                    <th>Usage</th>
                </tr>
                <tr>
                    <td><strong>Web Framework</strong></td>
                    <td>Flask, Django, FastAPI</td>
                    <td>Base du site</td>
                </tr>
                <tr>
                    <td><strong>Serveur</strong></td>
                    <td>Gunicorn, Uvicorn</td>
                    <td>Production WSGI/ASGI</td>
                </tr>
                <tr>
                    <td><strong>HTTP Client</strong></td>
                    <td>Requests, Httpx (async)</td>
                    <td>Appeler des APIs externes</td>
                </tr>
                <tr>
                    <td><strong>Validation</strong></td>
                    <td>Pydantic, Marshmallow</td>
                    <td>Valider forms/JSON</td>
                </tr>
                <tr>
                    <td><strong>S√©curit√©</strong></td>
                    <td>Passlib, BCrypt, PyJWT</td>
                    <td>Mots de passe, Tokens</td>
                </tr>
                <tr>
                    <td><strong>Testing</strong></td>
                    <td>Pytest, Playwright</td>
                    <td>Tests unitaires / E2E</td>
                </tr>
                <tr>
                    <td><strong>T√¢ches fond</strong></td>
                    <td>Celery, Redis Queue</td>
                    <td>Emails, traitements lourds</td>
                </tr>
            </table>

            <div class="tip" style="margin-top:24px"><strong>üí° Cloud Ready</strong> ‚Äî Les apps Python containeris√©es se
                d√©ploient facilement sur AWS, Azure, Google Cloud ou des PaaS comme Render/Railway.</div>
        </div>
    </section>

    <!-- SECTION QUIZ -->
    <section id="quiz-section" class="quiz-container">
        <div class="container">
            <h2>Testez vos connaissances</h2>
            <div id="quiz-app"></div>
        </div>
    </section>

    <script type="module">
        import '../../assets/js/quiz-engine.js';
        document.addEventListener('DOMContentLoaded', () => {
            new window.QuizEngine({ containerId: 'quiz-app', jsonPath: 'quiz_web.json', questionsPerSession: 10 });
        });
    </script>
    <script src="../../assets/js/quiz-engine.js"></script>
    <script>
        window.addEventListener('load', () => {
            if (window.QuizEngine && !document.querySelector('.quiz-intro')) {
                new window.QuizEngine({ containerId: 'quiz-app', jsonPath: 'quiz_web.json', questionsPerSession: 10 });
            }
        });
    </script>

    <footer>
        <div class="container">
            <p style="margin-bottom:8px"><strong>M√©mo Python Web</strong> ‚Ä¢ Flask / Django / FastAPI ‚Ä¢ 2025</p>
            <p style="font-size:.8rem">Cr√©√© par <strong>Geoffroy Streit</strong> ‚Äî Guide complet pour le d√©veloppement
                Back-end moderne.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>