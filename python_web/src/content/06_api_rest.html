<section id="s6">
    <div class="container">
        <div class="sec-header">
            <div class="sec-num">06</div>
            <div>
                <h2 class="sec-title">API REST : Architectures & Standards</h2>
                <p class="sec-sub">Concevoir des interfaces robustes, pr√©visibles et scalables</p>
            </div>
        </div>

        <div class="intro-box"
            style="margin-bottom: 30px; background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border);">
            <p>Le style architectural <strong>REST</strong> (Representational State Transfer) n'est pas un protocole,
                mais un ensemble de contraintes. Une API "RESTful" utilise les standards du web (HTTP, URL, JSON) pour
                manipuler des <strong>ressources</strong> de mani√®re sans √©tat (stateless).</p>
        </div>

        <div class="grid2">
            <div>
                <h3>1. Les 6 Contraintes REST</h3>
                <ul class="ref-list" style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 10px;">üë§ <strong>Client-Serveur</strong> : S√©paration des pr√©occupations
                        (UI vs Data).</li>
                    <li style="margin-bottom: 10px;">‚òÅÔ∏è <strong>Stateless</strong> : Chaque requ√™te doit contenir toute
                        l'info n√©cessaire.</li>
                    <li style="margin-bottom: 10px;">üíæ <strong>Cacheable</strong> : Les r√©ponses doivent indiquer si
                        elles sont r√©utilisables.</li>
                    <li style="margin-bottom: 10px;">üß± <strong>Layered System</strong> : Le client ne sait pas s'il
                        parle au serveur final.</li>
                    <li style="margin-bottom: 10px;">üåê <strong>Interface Uniforme</strong> : Utilisation coh√©rente des
                        URI et m√©thodes.</li>
                    <li style="margin-bottom: 10px;">üìú <strong>Code on Demand</strong> (Optionnel) : Envoi de scripts
                        ex√©cutables.</li>
                </ul>
            </div>
            <div>
                <h3>2. Cycle Requ√™te / R√©ponse</h3>
                <div class="mermaid" style="background: var(--bg2); padding: 15px; border-radius: 8px; margin: 15px 0;">
                    sequenceDiagram
                    participant C as Client
                    participant S as API REST
                    C->>S: METHOD /resource (JSON/Headers)
                    Note over S: Auth -> Validation -> Business Logic
                    S-->>C: HTTP STATUS CODE + Body (JSON)
                </div>
            </div>
        </div>

        <h3 style="margin-top:40px">3. M√©thodes HTTP & Idempotence</h3>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>M√©thode</th>
                        <th>Action</th>
                        <th>Idempotent ?</th>
                        <th>Usage</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>GET</code></td>
                        <td>üîç R√©cup√©rer</td>
                        <td>‚úÖ Oui</td>
                        <td>R√©cup√©rer une liste ou un √©l√©ment (Lecture seule).</td>
                    </tr>
                    <tr>
                        <td><code>POST</code></td>
                        <td>‚ûï Cr√©er</td>
                        <td>‚ùå Non</td>
                        <td>Cr√©er une nouvelle ressource (N+1 ex√©cutions = N+1 cr√©ations).</td>
                    </tr>
                    <tr>
                        <td><code>PUT</code></td>
                        <td>üîÑ Remplacer</td>
                        <td>‚úÖ Oui</td>
                        <td>Remplacer enti√®rement une ressource existante.</td>
                    </tr>
                    <tr>
                        <td><code>PATCH</code></td>
                        <td>üìù Modifier</td>
                        <td>‚ùå Non</td>
                        <td>Modification partielle d'une ressource (souvent asynchrone).</td>
                    </tr>
                    <tr>
                        <td><code>DELETE</code></td>
                        <td>üóëÔ∏è Supprimer</td>
                        <td>‚úÖ Oui</td>
                        <td>Supprimer une ressource (2 ex√©cutions = m√™me r√©sultat final).</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin-top:40px">4. Les Points de Douleur & Alternatives</h3>
        <div class="grid3">
            <div class="ref-card" style="border-top: 3px solid var(--blue);">
                <h4>Over-fetching</h4>
                <p>REST renvoie souvent trop de donn√©es. <strong>GraphQL</strong> permet au client de choisir exactement
                    ses champs.</p>
            </div>
            <div class="ref-card" style="border-top: 3px solid var(--orange);">
                <h4>Under-fetching</h4>
                <p> REST n√©cessite souvent plusieurs appels d'API. <strong>HATEOAS</strong> (liens hyperm√©dias) aide √†
                    la navigation.</p>
            </div>
            <div class="ref-card" style="border-top: 3px solid var(--purple);">
                <h4>Performance</h4>
                <p>Pour des microservices ultra-rapides, <strong>gRPC</strong> (Protocol Buffers) est souvent plus
                    efficace que le JSON/REST.</p>
            </div>
        </div>

        <h3 style="margin-top:40px">5. Codes de Statut (R√©sum√© Quick-Ref)</h3>
        <div class="grid2">
            <div class="code">
                <div class="code-head"><span class="dot g"></span>Familles de codes</div>
                <ul class="ref-list" style="list-style: none; padding: 15px;">
                    <li>üü¢ <strong>2xx (Success)</strong> : 200 (OK), 201 (Created), 204 (No Content).</li>
                    <li>üü° <strong>3xx (Redirection)</strong> : 301 (Moved Permanently), 304 (Not Modified).</li>
                    <li>üü† <strong>4xx (Client Error)</strong> : 400 (Bad Req), 401 (Unauthorized), 403 (Forbidden), 404
                        (Not Found).</li>
                    <li>üî¥ <strong>5xx (Server Error)</strong> : 500 (Internal Error), 502 (Bad Gateway), 503 (Service
                        Unavailable).</li>
                </ul>
            </div>
            <div class="info"
                style="border-left: 4px solid var(--primary); background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 4px;">
                <strong>üí° Richardson Maturity Model</strong>
                <p>Niveau 0 : HTTP pur. Niveau 1 : Ressources (URI). Niveau 2 : Verbes HTTP. Niveau 3 : HATEOAS (Le
                    Graal du REST).</p>
            </div>
        </div>

        <details style="margin-top: 30px;">
            <summary>‚ûï Bonnes Pratiques JSON</summary>
            <div class="grid2" style="margin-top: 15px;">
                <div class="code">
                    <div class="code-head"><span class="dot b"></span>Exemple JSON:API</div>
                    <pre>{
  <span class="str">"data"</span>: {
    <span class="str">"type"</span>: <span class="str">"articles"</span>,
    <span class="str">"id"</span>: <span class="str">"1"</span>,
    <span class="str">"attributes"</span>: { <span class="str">"title"</span>: <span class="str">"REST is Life"</span> },
    <span class="str">"links"</span>: { <span class="str">"self"</span>: <span class="str">"/articles/1"</span> }
  }
}</pre>
                </div>
                <div class="ref-card">
                    <ul class="ref-list">
                        <li>Utilisez <strong>snake_case</strong> ou <strong>camelCase</strong> de mani√®re coh√©rente.
                        </li>
                        <li>√âvitez les tableaux √† la racine (s√©curit√©).</li>
                        <li>Incluez toujours un champ <code>id</code>.</li>
                        <li>G√©rez l'UTF-8 par d√©faut.</li>
                    </ul>
                </div>
            </div>
        </details>
    </div>
</section>