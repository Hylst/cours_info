<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forms - M√©mo React.js</title>
    <meta name="description"
        content="G√©rer les formulaires en React : Controlled Components et Single Source of Truth.">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/quiz-style.css">
    <link rel="stylesheet" href="../style.css">
    <script src="../js/nav.js" defer></script>
    <script src="../script.js" defer></script>
</head>

<body>
    <header></header>
    <div class="main-layout">
        <aside id="sidebar-container"></aside>
        <main>
            <section id="s8" class="module-content">
                <div class="container">
                    <div class="sec-header">
                        <div class="sec-num">08</div>
                        <div>
                            <h2 class="sec-title">Formulaires</h2>
                            <p class="sec-sub">Controlled Components</p>
                        </div>
                    </div>

                    <details>
                        <summary>üí° Single Source of Truth</summary>
                        <div class="details-content">
                            <p>Dans un formulaire HTML classique, l'input garde son propre √©tat interne. En React, on
                                veut que
                                le <strong>State</strong> soit la seule source de v√©rit√©.</p>
                            <p>C'est le pattern "Composant Contr√¥l√©" :</p>
                            <ol>
                                <li>L'input affiche la valeur du State (<code>value={state}</code>).</li>
                                <li>L'input d√©clenche un changement (<code>onChange</code>).</li>
                                <li>Le handler met √† jour le State (<code>setState</code>).</li>
                                <li>React re-render l'input avec la nouvelle valeur.</li>
                            </ol>
                        </div>
                    </details>

                    <div class="code">
                        <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                class="dot g"></span>Input contr√¥l√©</div>
                        <pre><span class="kw">function</span> <span class="fn">Form</span>() {
    <span class="kw">const</span> [<span class="var">text</span>, <span class="fn">setText</span>] = <span class="fn">useState</span>(<span class="str">""</span>);

    <span class="kw">return</span> (
        <span class="tag">&lt;input</span>
            <span class="attr">type</span>=<span class="str">"text"</span>
            <span class="attr">value</span>={ <span class="var">text</span> }  <span class="c">// Source de v√©rit√© = State</span>
            <span class="attr">onChange</span>={ <span class="var">e</span> => <span class="fn">setText</span>(<span class="var">e</span>.<span class="prop">target</span>.<span class="prop">value</span>) }
        <span class="tag">/&gt;</span>
    );
}</pre>
                    </div>

                    <div class="code">
                        <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                class="dot g"></span>Plusieurs champs (Objet)</div>
                        <pre><span class="kw">const</span> [<span class="var">form</span>, <span class="fn">setForm</span>] = <span class="fn">useState</span>({ <span class="prop">email</span>: <span class="str">""</span>, <span class="prop">password</span>: <span class="str">""</span> });

<span class="kw">const</span> <span class="fn">handleChange</span> = (<span class="var">e</span>) => {
    <span class="c">// Met √† jour uniquement la cl√© correspondante (name="email" ou "password")</span>
    <span class="fn">setForm</span>({ 
        ...<span class="var">form</span>, 
        [<span class="var">e</span>.<span class="prop">target</span>.<span class="prop">name</span>]: <span class="var">e</span>.<span class="prop">target</span>.<span class="prop">value</span> 
    });
};

<span class="c">// &lt;input name="email" value={form.email} onChange={handleChange} /&gt;</span></pre>
                    </div>

                    <div class="grid2">
                        <div class="code">
                            <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                    class="dot g"></span>Validation Simple</div>
                            <pre><span class="kw">const</span> <span class="fn">handleSubmit</span> = (<span class="var">e</span>) => {
    <span class="var">e</span>.<span class="fn">preventDefault</span>();
    <span class="kw">if</span> (!<span class="var">email</span>.<span class="fn">includes</span>(<span class="str">"@"</span>)) {
        <span class="fn">setError</span>(<span class="str">"Email invalide"</span>);
        <span class="kw">return</span>;
    }
    <span class="c">// Envoi des donn√©es...</span>
};</pre>
                        </div>
                        <div class="ref-card"
                            style="border:1px solid var(--border); padding:20px; background:var(--bg2); border-radius:10px;">
                            <h4>üöÄ Quick Tip : Uncontrolled</h4>
                            <p style="font-size:0.9rem; margin-top:10px;">Pour des formulaire tr√®s simples ou
                                l'int√©gration de librairies non-React, vous pouvez utiliser <code>useRef</code> pour
                                lire la valeur seulement √† la soumission, sans re-render √† chaque frappe.</p>
                            <pre
                                style="margin-top:10px; background:var(--bg); padding:10px; border-radius:6px; font-size:0.8rem;"><span class="kw">const</span> <span class="var">inputRef</span> = <span class="fn">useRef</span>();
<span class="c">// Acc√®s : inputRef.current.value</span></pre>
                        </div>
                    </div>


                    <div class="grid2" style="margin-top:20px;">
                        <div class="ref-card" style="background:var(--bg2); border-left:4px solid var(--blue);">
                            <h4>üìù Analogie : Formulaire Papier vs Tablette</h4>
                            <p style="font-size:0.9rem; margin-top:10px;">
                                <strong>Uncontrolled (HTML classique)</strong> : Vous remplissez un formulaire papier.
                                Personne ne v√©rifie rien tant que vous ne l'avez pas rendu au guichet (Submit).
                                <br>
                                <strong>Controlled (React State)</strong> : Une tablette qui v√©rifie chaque champ
                                <em>pendant</em> que vous tapez (rouge si erreur, vert si bon). C'est plus de code, mais
                                une meilleure UX.
                            </p>
                        </div>
                        <div class="code">
                            <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                    class="dot g"></span>Advanced : Libraries</div>
                            <pre
                                style="font-size:0.8rem; line-height:1.4"><span class="c">// Pour les GROS formulaires, Controlled est lent.</span>
<span class="c">// Utilisez "React Hook Form" (Uncontrolled + Hooks).</span>

<span class="kw">import</span> { <span class="fn">useForm</span> } <span class="kw">from</span> <span class="str">"react-hook-form"</span>;

<span class="kw">const</span> { <span class="fn">register</span>, <span class="fn">handleSubmit</span> } = <span class="fn">useForm</span>();
<span class="tag">&lt;input</span> {...<span class="fn">register</span>(<span class="str">"email"</span>)} <span class="tag">/&gt;</span></pre>
                        </div>
                    </div>

                    <div class="nav-buttons">
                        <a href="07_lists.html" class="btn-prev">‚Üê Lists</a>
                        <a href="09_hooks_rules.html" class="btn-next">Suivant : Hooks Rules ‚Üí</a>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>

</html>