<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hooks Rules - M√©mo React.js</title>
    <meta name="description" content="Les r√®gles d'or des Hooks en React : pas de conditions, top level uniquement.">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/quiz-style.css">
    <link rel="stylesheet" href="../style.css">
    <script src="../js/nav.js" defer></script>
    <script src="../script.js" defer></script>
</head>

<body>
    <header></header>
    <div class="main-layout">
        <aside id="sidebar-container"></aside>
        <main>
            <section id="s9" class="module-content">
                <div class="container">
                    <div class="sec-header">
                        <div class="sec-num">09</div>
                        <div>
                            <h2 class="sec-title">R√®gles des Hooks</h2>
                            <p class="sec-sub">√Ä respecter imp√©rativement</p>
                        </div>
                    </div>

                    <details>
                        <summary>üí° La "Magie" des Hooks</summary>
                        <div class="details-content">
                            <p>React ne scanne pas votre code pour trouver les Hooks. Il compte simplement l'ordre
                                d'appel.</p>
                            <p>"Au premier rendu, le 1er Hook est un useState(0). Le 2√®me est un useEffect..."</p>
                            <p>Si vous mettez un Hook dans un <code>if</code>, l'ordre des appels change au rendu
                                suivant, et
                                React perd le fil ("Attends, le 2√®me Hook √©tait un useEffect, pourquoi c'est un useState
                                maintenant ?"). C'est pour √ßa que l'ordre doit √™tre stable.</p>
                        </div>
                    </details>

                    <div class="grid2">
                        <div class="ref-card">
                            <h4>1. Top Level Uniquement</h4>
                            <p>Ne jamais appeler un Hook dans une boucle, une condition ou une fonction imbriqu√©e.</p>
                        </div>
                        <div class="ref-card">
                            <h4>2. React Functions Uniquement</h4>
                            <p>Appeler les Hooks seulement depuis des composants React ou des Custom Hooks.</p>
                        </div>
                        <div class="ref-card">
                            <h4>3. Nommage</h4>
                            <p>Les Custom Hooks doivent toujours commencer par <code>use...</code> (ex:
                                <code>useAuth</code>).
                            </p>
                        </div>
                    </div>

                    <div class="code">
                        <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                class="dot g"></span>Deep Dive : Pourquoi l'ordre compte ?</div>
                        <pre><span class="c">// En interne, React stocke les Hooks dans un tableau (Linked List)</span>
<span class="c">// Rendu N¬∞1</span>
[0] useState("Alice") <span class="c">// Nom</span>
[1] useEffect(...)    <span class="c">// Document Title</span>
[2] useState("Blue")  <span class="c">// Th√®me</span>

<span class="c">// Si vous mettez une condition sur le useEffect et qu'elle passe √† false...</span>
<span class="c">// Rendu N¬∞2 (BUG)</span>
[0] useState("Alice") <span class="c">// OK</span>
[1] useState("Blue")  <span class="c">// ERREUR ! React pense que c'est le useEffect.</span></pre>
                    </div>

                    <div class="info">
                        <strong>üõ†Ô∏è Outils</strong>
                        <p>Ne comptez pas sur votre vigilance. Installez le plugin ESLint officiel :</p>
                        <code>npm install eslint-plugin-react-hooks --save-dev</code>
                    </div>


                    <div class="ref-card"
                        style="margin-top:20px; background:var(--bg2); padding:20px; border-radius:10px; border-left:4px solid var(--purple);">
                        <h4>üéß Analogie : La Playlist Musicale (Mental Model)</h4>
                        <p style="margin-top:10px;">Imaginez que React conserve les valeurs (State) de vos hooks dans
                            une liste, comme une playlist MP3 :</p>
                        <ul style="margin-top:10px; list-style:none; padding-left:10px;">
                            <li>1. üéµ <code>useState('Alice')</code> (Piste 1)</li>
                            <li>2. üéµ <code>useEffect(...)</code> (Piste 2)</li>
                            <li>3. üéµ <code>useState('Dark')</code> (Piste 3)</li>
                        </ul>
                        <p style="margin-top:10px;">Si au rendu suivant, vous mettez une condition et sautez la piste
                            2...</p>
                        <p>React va jouer la piste 3 (Theme) en pensant que c'est la piste 2 (Effect). <strong>Tout se
                                d√©calle !</strong> üí•</p>
                    </div>

                    <div class="code">
                        <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                class="dot g"></span>Visualisation du Crash</div>
                        <pre style="line-height:1.2">
<span class="c">// Rendu 1 (Normal)</span>
[0] "Alice"
[1] Effect
[2] "Dark"

<span class="c">// Rendu 2 (Avec condition if(false) sur le Hook 2)</span>
[0] "Alice"
[1] "Dark" <span class="c">// ‚ö†Ô∏è React essaye de lire un State comme un Effect !</span>
[2] undefined <span class="c">// Perdu dans les limbes</span>
</pre>
                    </div>

                    <details>
                        <summary>üõ°Ô∏è Le garde du corps : ESLint</summary>
                        <div class="details-content">
                            <p>Le plugin <code>eslint-plugin-react-hooks</code> est votre meilleur ami. Il v√©rifie deux
                                choses :</p>
                            <ol>
                                <li><strong>Rules of Hooks</strong> : V√©rifie que vous n'appelez pas de hooks dans des
                                    conditions.</li>
                                <li><strong>Exhaustive Deps</strong> : V√©rifie que le tableau de d√©pendances de
                                    <code>useEffect</code> ou <code>useMemo</code> est complet.</li>
                            </ol>
                            <p><strong>Ne d√©sactivez jamais cette r√®gle</strong> (<code>// eslint-disable-line</code>)
                                sauf si vous savez EXACTEMENT ce que vous faites (et encore...).</p>
                        </div>
                    </details>

                    <div class="grid2">
                        <div class="code">
                            <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                    class="dot g"></span>Astuce : Reset State</div>
                            <pre><span class="c">// Si vous voulez RAZ un composant (et tous ses hooks)</span>
<span class="c">// Changez sa prop "key" !</span>

<span class="tag">&lt;UserProfile</span> <span class="attr">key</span>={ <span class="var">userId</span> } <span class="tag">/&gt;</span>

<span class="c">// Si userId change, React d√©truit l'ancien composant</span>
<span class="c">// et en recr√©e un neuf (State √† 0).</span></pre>
                        </div>
                    </div>

                    <div class="nav-buttons">
                        <a href="08_forms.html" class="btn-prev">‚Üê Forms</a>
                        <a href="10_custom_hooks.html" class="btn-next">Suivant : Custom Hooks ‚Üí</a>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>

</html>