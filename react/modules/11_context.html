<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context API - M√©mo React.js</title>
    <meta name="description" content="React Context API : √©viter le Prop Drilling et g√©rer l'√©tat global.">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/quiz-style.css">
    <link rel="stylesheet" href="../style.css">
    <script src="../js/nav.js" defer></script>
    <script src="../script.js" defer></script>
</head>

<body>
    <header></header>
    <div class="main-layout">
        <aside id="sidebar-container"></aside>
        <main>
            <section id="s11" class="module-content">
                <div class="container">
                    <div class="sec-header">
                        <div class="sec-num">11</div>
                        <div>
                            <h2 class="sec-title">Context API</h2>
                            <p class="sec-sub">√âviter le Prop Drilling</p>
                        </div>
                    </div>

                    <details>
                        <summary>üí° Prop Drilling vs Context</summary>
                        <div class="details-content">
                            <p>Le "Prop Drilling", c'est quand vous devez passer une donn√©e du Grand-Parent -> Parent ->
                                Enfant
                                -> Petit-Enfant, alors que seul le Petit-Enfant en a besoin. C'est lourd.</p>
                            <p>Le <strong>Context</strong> permet de "t√©l√©porter" la donn√©e directement. Attention :
                                n'en abusez
                                pas, car cela rend les composants moins r√©utilisables (ils deviennent d√©pendants du
                                contexte).
                            </p>
                        </div>
                    </details>

                    <div class="code">
                        <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                class="dot g"></span>useContext</div>
                        <pre><span class="c">// 1. Cr√©ation</span>
<span class="kw">const</span> <span class="var">ThemeContext</span> = <span class="fn">createContext</span>(<span class="str">"light"</span>);

<span class="c">// 2. Provider (Parent)</span>
<span class="tag">&lt;ThemeContext.Provider</span> <span class="attr">value</span>=<span class="str">"dark"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;App /&gt;</span>
<span class="tag">&lt;/ThemeContext.Provider&gt;</span>

<span class="c">// 3. Consumer (Enfant, n'importe o√π)</span>
<span class="kw">function</span> <span class="fn">ThemedButton</span>() {
    <span class="kw">const</span> <span class="var">theme</span> = <span class="fn">useContext</span>(<span class="var">ThemeContext</span>);
    <span class="kw">return</span> <span class="tag">&lt;button</span> <span class="attr">className</span>={ <span class="var">theme</span> }<span class="tag">&gt;</span>OK<span class="tag">&lt;/button&gt;</span>;
}</pre>
                    </div>

                    <div class="code">
                        <div class="code-head"><span class="dot r"></span><span class="dot y"></span><span
                                class="dot g"></span>Pattern : Provider Component</div>
                        <pre><span class="c">// Encapsuler la logique dans un composant d√©di√©</span>
<span class="kw">export</span> <span class="kw">function</span> <span class="fn">ThemeProvider</span>({ <span class="var">children</span> }) {
    <span class="kw">const</span> [<span class="var">theme</span>, <span class="fn">setTheme</span>] = <span class="fn">useState</span>(<span class="str">"light"</span>);
    
    <span class="kw">return</span> (
        <span class="tag">&lt;ThemeContext.Provider</span> <span class="attr">value</span>={{ <span class="var">theme</span>, <span class="fn">setTheme</span> }}<span class="tag">&gt;</span>
            {<span class="var">children</span>}
        <span class="tag">&lt;/ThemeContext.Provider&gt;</span>
    );
}</pre>
                    </div>

                    <div class="warning">
                        <strong>‚ö° Performance</strong>
                        <p>Tout composant qui consomme un Contexte (<code>useContext</code>) va se re-rendre √†
                            <strong>CHAQUE</strong> fois que la valeur du Provider change.</p>
                        <p>Pour √©viter les re-rendus inutiles sur les gros objets complexes : s√©parez les contextes ou
                            utilisez <code>useMemo</code>.</p>
                    </div>

                    <div class="ref-card"
                        style="border:1px solid var(--border); padding:20px; background:var(--bg2); border-radius:10px; margin-top:20px;">
                        <h4>üõ†Ô∏è Combo : Context + useReducer</h4>
                        <p style="font-size:0.9rem; margin-top:10px;">C'est la m√©thode standard pour g√©rer des √©tats
                            complexes globaux (similaire √† Redux mais natif).</p>
                    </div>

                    <div class="nav-buttons">
                        <a href="10_custom_hooks.html" class="btn-prev">‚Üê Custom Hooks</a>
                        <a href="12_refs.html" class="btn-next">Suivant : Refs ‚Üí</a>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>

</html>